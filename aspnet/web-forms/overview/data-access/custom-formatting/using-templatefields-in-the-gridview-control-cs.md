---
uid: web-forms/overview/data-access/custom-formatting/using-templatefields-in-the-gridview-control-cs
title: "在 GridView 控制項 (C#) 中使用 TemplateFields |Microsoft 文件"
author: rick-anderson
description: "若要提供彈性，GridView 提供 TemplateField，呈現 使用範本。 範本可以包含靜態的 HTML、 Web 控制項的混合和..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 03/31/2010
ms.topic: article
ms.assetid: 11de31e8-a78a-4f96-bd75-66e994175902
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/data-access/custom-formatting/using-templatefields-in-the-gridview-control-cs
msc.type: authoredcontent
ms.openlocfilehash: 4202f25b241a6ca115c1ffc0a80258ee96563f72
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 11/10/2017
---
<a name="using-templatefields-in-the-gridview-control-c"></a><span data-ttu-id="fd154-104">使用 TemplateFields GridView 控制項中 (C#)</span><span class="sxs-lookup"><span data-stu-id="fd154-104">Using TemplateFields in the GridView Control (C#)</span></span>
====================
<span data-ttu-id="fd154-105">由[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="fd154-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="fd154-106">[下載範例應用程式](http://download.microsoft.com/download/9/6/9/969e5c94-dfb6-4e47-9570-d6d9e704c3c1/ASPNET_Data_Tutorial_12_CS.exe)或[下載 PDF](using-templatefields-in-the-gridview-control-cs/_static/datatutorial12cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="fd154-106">[Download Sample App](http://download.microsoft.com/download/9/6/9/969e5c94-dfb6-4e47-9570-d6d9e704c3c1/ASPNET_Data_Tutorial_12_CS.exe) or [Download PDF](using-templatefields-in-the-gridview-control-cs/_static/datatutorial12cs1.pdf)</span></span>

> <span data-ttu-id="fd154-107">若要提供彈性，GridView 提供 TemplateField，呈現 使用範本。</span><span class="sxs-lookup"><span data-stu-id="fd154-107">To provide flexibility, the GridView offers the TemplateField, which renders using a template.</span></span> <span data-ttu-id="fd154-108">範本可以包含混合的靜態的 HTML 網頁的控制項和資料繫結語法。</span><span class="sxs-lookup"><span data-stu-id="fd154-108">A template can include a mix of static HTML, Web controls, and databinding syntax.</span></span> <span data-ttu-id="fd154-109">在本教學課程中，我們將檢驗如何使用 TemplateField 以達到更大的 GridView 控制項的自訂。</span><span class="sxs-lookup"><span data-stu-id="fd154-109">In this tutorial we'll examine how to use the TemplateField to achieve a greater degree of customization with the GridView control.</span></span>


## <a name="introduction"></a><span data-ttu-id="fd154-110">簡介</span><span class="sxs-lookup"><span data-stu-id="fd154-110">Introduction</span></span>

<span data-ttu-id="fd154-111">在 GridView 組成的一組欄位，以指出哪些屬性從`DataSource`要包含在轉譯的輸出，以及資料顯示方式。</span><span class="sxs-lookup"><span data-stu-id="fd154-111">The GridView is composed of a set of fields that indicate what properties from the `DataSource` are to be included in the rendered output along with how the data will be displayed.</span></span> <span data-ttu-id="fd154-112">最簡單的欄位型別是 BoundField，後者會顯示為文字的資料值。</span><span class="sxs-lookup"><span data-stu-id="fd154-112">The simplest field type is the BoundField, which displays a data value as text.</span></span> <span data-ttu-id="fd154-113">其他欄位的類型顯示的資料，使用替代的 HTML 項目。</span><span class="sxs-lookup"><span data-stu-id="fd154-113">Other field types display the data using alternate HTML elements.</span></span> <span data-ttu-id="fd154-114">CheckBoxField，比方說，會轉譯成指定的資料欄位; 的值取決於其核取的狀態的核取方塊ImageField 呈現的影像的影像來源為基礎的指定的資料欄位。</span><span class="sxs-lookup"><span data-stu-id="fd154-114">The CheckBoxField, for example, renders as a checkbox whose checked state depends on the value of a specified data field; the ImageField renders an image whose image source is based upon a specified data field.</span></span> <span data-ttu-id="fd154-115">轉譯超連結和按鈕的狀態取決於基礎的資料欄位值，可以使用 HyperLinkField 和 ButtonField 欄位類型。</span><span class="sxs-lookup"><span data-stu-id="fd154-115">Hyperlinks and buttons whose state depends on an underlying data field value can be rendered using the HyperLinkField and ButtonField field types.</span></span>

<span data-ttu-id="fd154-116">儘管 CheckBoxField、 ImageField、 HyperLinkField 和 ButtonField 欄位型別，允許替代檢視表的資料，它們仍是相當有限相對於格式設定。</span><span class="sxs-lookup"><span data-stu-id="fd154-116">While the CheckBoxField, ImageField, HyperLinkField, and ButtonField field types allow for an alternate view of the data, they still are fairly limited with respect to formatting.</span></span> <span data-ttu-id="fd154-117">CheckBoxField 只能顯示單一的核取方塊，而 ImageField 只能顯示單一映像。</span><span class="sxs-lookup"><span data-stu-id="fd154-117">A CheckBoxField can only display a single checkbox, whereas an ImageField can only display a single image.</span></span> <span data-ttu-id="fd154-118">特定欄位要顯示的文字，核取方塊，該怎麼辦*和*映像，所有根據不同的資料欄位值嗎？</span><span class="sxs-lookup"><span data-stu-id="fd154-118">What if a particular field needs to display some text, a checkbox, *and* an image, all based upon different data field values?</span></span> <span data-ttu-id="fd154-119">或者，如果我們想要顯示的資料，請使用核取方塊、 影像、 超連結或按鈕以外的 Web 控制項？</span><span class="sxs-lookup"><span data-stu-id="fd154-119">Or what if we wanted to display the data using a Web control other than the CheckBox, Image, HyperLink, or Button?</span></span> <span data-ttu-id="fd154-120">此外，BoundField 限制其顯示單一資料欄位。</span><span class="sxs-lookup"><span data-stu-id="fd154-120">Furthermore, the BoundField limits its display to a single data field.</span></span> <span data-ttu-id="fd154-121">如果我們想要在單一的 GridView 資料行中顯示兩個或多個資料欄位值嗎？</span><span class="sxs-lookup"><span data-stu-id="fd154-121">What if we wanted to show two or more data field values in a single GridView column?</span></span>

<span data-ttu-id="fd154-122">為了容納此層級的彈性 GridView 提供 TemplateField，使用轉譯*範本*。</span><span class="sxs-lookup"><span data-stu-id="fd154-122">To accommodate this level of flexibility the GridView offers the TemplateField, which renders using a *template*.</span></span> <span data-ttu-id="fd154-123">範本可以包含混合的靜態的 HTML 網頁的控制項和資料繫結語法。</span><span class="sxs-lookup"><span data-stu-id="fd154-123">A template can include a mix of static HTML, Web controls, and databinding syntax.</span></span> <span data-ttu-id="fd154-124">此外，TemplateField 有各式各樣的範本可以用來自訂轉譯，針對不同的情況。</span><span class="sxs-lookup"><span data-stu-id="fd154-124">Furthermore, the TemplateField has a variety of templates that can be used to customize the rendering for different situations.</span></span> <span data-ttu-id="fd154-125">例如，`ItemTemplate`預設用來呈現的資料格的每個資料列，但`EditItemTemplate`範本可以用來編輯資料時，自訂介面。</span><span class="sxs-lookup"><span data-stu-id="fd154-125">For example, the `ItemTemplate` is used by default to render the cell for each row, but the `EditItemTemplate` template can be used to customize the interface when editing data.</span></span>

<span data-ttu-id="fd154-126">在本教學課程中，我們將檢驗如何使用 TemplateField 以達到更大的 GridView 控制項的自訂。</span><span class="sxs-lookup"><span data-stu-id="fd154-126">In this tutorial we'll examine how to use the TemplateField to achieve a greater degree of customization with the GridView control.</span></span> <span data-ttu-id="fd154-127">在[前述教學課程](custom-formatting-based-upon-data-cs.md)我們可了解如何自訂根據基礎的資料使用的格式設定`DataBound`和`RowDataBound`事件處理常式。</span><span class="sxs-lookup"><span data-stu-id="fd154-127">In the [preceding tutorial](custom-formatting-based-upon-data-cs.md) we saw how to customize the formatting based on the underlying data using the `DataBound` and `RowDataBound` event handlers.</span></span> <span data-ttu-id="fd154-128">另一種方式來自訂格式的基礎資料為基礎，就藉由呼叫格式化範本內的方法。</span><span class="sxs-lookup"><span data-stu-id="fd154-128">Another way to customize the formatting based on the underlying data is by calling formatting methods from within a template.</span></span> <span data-ttu-id="fd154-129">在本教學課程，我們會探討這項技術。</span><span class="sxs-lookup"><span data-stu-id="fd154-129">We'll look at this technique in this tutorial as well.</span></span>

<span data-ttu-id="fd154-130">在此教學課程中，我們將使用 TemplateFields 訂員工清單。</span><span class="sxs-lookup"><span data-stu-id="fd154-130">For this tutorial we will use TemplateFields to customize the appearance of a list of employees.</span></span> <span data-ttu-id="fd154-131">具體來說，我們將會列出所有員工，但會顯示員工的一個資料行、 雇用日期的日曆控制項，以及指出多少天後他們已採用在公司的狀態資料行中的第一個和最後一個名稱。</span><span class="sxs-lookup"><span data-stu-id="fd154-131">Specifically, we'll list all of the employees, but will display the employee's first and last names in one column, their hire date in a Calendar control, and a status column that indicates how many days they've been employed at the company.</span></span>


<span data-ttu-id="fd154-132">[![三個 TemplateFields 可用來自訂顯示](using-templatefields-in-the-gridview-control-cs/_static/image2.png)](using-templatefields-in-the-gridview-control-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="fd154-132">[![Three TemplateFields are Used to Customize the Display](using-templatefields-in-the-gridview-control-cs/_static/image2.png)](using-templatefields-in-the-gridview-control-cs/_static/image1.png)</span></span>

<span data-ttu-id="fd154-133">**圖 1**： 三個 TemplateFields 可用來自訂顯示 ([按一下以檢視完整大小的影像](using-templatefields-in-the-gridview-control-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="fd154-133">**Figure 1**: Three TemplateFields are Used to Customize the Display ([Click to view full-size image](using-templatefields-in-the-gridview-control-cs/_static/image3.png))</span></span>


## <a name="step-1-binding-the-data-to-the-gridview"></a><span data-ttu-id="fd154-134">步驟 1: 將資料繫結至 GridView</span><span class="sxs-lookup"><span data-stu-id="fd154-134">Step 1: Binding the Data to the GridView</span></span>

<span data-ttu-id="fd154-135">在報表中您要使用自訂的外觀 TemplateFields 的案例，我簡便的方法藉由建立 GridView 控制項，其中包含只 BoundFields 先啟動然後再新增新 TemplateFields 或轉換至現有的 BoundFields視 TemplateFields。</span><span class="sxs-lookup"><span data-stu-id="fd154-135">In reporting scenarios where you need to use TemplateFields to customize the appearance, I find it easiest to start by creating a GridView control that contains just BoundFields first and then to add new TemplateFields or convert the existing BoundFields to TemplateFields as needed.</span></span> <span data-ttu-id="fd154-136">因此，讓我們開始本教學課程頁面透過設計工具中加入 GridView 和繫結至 ObjectDataSource 傳回員工的清單。</span><span class="sxs-lookup"><span data-stu-id="fd154-136">Therefore, let's start this tutorial by adding a GridView to the page through the Designer and binding it to an ObjectDataSource that returns the list of employees.</span></span> <span data-ttu-id="fd154-137">這些步驟將每個員工欄位，以建立與 BoundFields GridView。</span><span class="sxs-lookup"><span data-stu-id="fd154-137">These steps will create a GridView with BoundFields for each of the employee fields.</span></span>

<span data-ttu-id="fd154-138">開啟`GridViewTemplateField.aspx`頁面上，並從 [工具箱] 拖曳至設計工具拖曳 GridView。</span><span class="sxs-lookup"><span data-stu-id="fd154-138">Open the `GridViewTemplateField.aspx` page and drag a GridView from the Toolbox onto the Designer.</span></span> <span data-ttu-id="fd154-139">從 GridView 的智慧標籤中，選擇要加入新的 ObjectDataSource 控制項叫用`EmployeesBLL`類別的`GetEmployees()`方法。</span><span class="sxs-lookup"><span data-stu-id="fd154-139">From the GridView's smart tag choose to add a new ObjectDataSource control that invokes the `EmployeesBLL` class's `GetEmployees()` method.</span></span>


<span data-ttu-id="fd154-140">[![加入新的 ObjectDataSource 控制項叫用 GetEmployees() 方法](using-templatefields-in-the-gridview-control-cs/_static/image5.png)](using-templatefields-in-the-gridview-control-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="fd154-140">[![Add a New ObjectDataSource Control that Invokes the GetEmployees() Method](using-templatefields-in-the-gridview-control-cs/_static/image5.png)](using-templatefields-in-the-gridview-control-cs/_static/image4.png)</span></span>

<span data-ttu-id="fd154-141">**圖 2**: ObjectDataSource 控制項新增該 Invokes`GetEmployees()`方法 ([按一下以檢視完整大小的影像](using-templatefields-in-the-gridview-control-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="fd154-141">**Figure 2**: Add a New ObjectDataSource Control that Invokes the `GetEmployees()` Method ([Click to view full-size image](using-templatefields-in-the-gridview-control-cs/_static/image6.png))</span></span>


<span data-ttu-id="fd154-142">這種方式中的繫結的 GridView 會自動將新增 BoundField 的每一個員工屬性： `EmployeeID`， `LastName`， `FirstName`， `Title`， `HireDate`， `ReportsTo`，和`Country`。</span><span class="sxs-lookup"><span data-stu-id="fd154-142">Binding the GridView in this manner will automatically add a BoundField for each of the employee properties: `EmployeeID`, `LastName`, `FirstName`, `Title`, `HireDate`, `ReportsTo`, and `Country`.</span></span> <span data-ttu-id="fd154-143">此報表讓我們費心思顯示`EmployeeID`， `ReportsTo`，或`Country`屬性。</span><span class="sxs-lookup"><span data-stu-id="fd154-143">For this report let's not bother with displaying the `EmployeeID`, `ReportsTo`, or `Country` properties.</span></span> <span data-ttu-id="fd154-144">若要移除這些 BoundFields 中，您可以：</span><span class="sxs-lookup"><span data-stu-id="fd154-144">To remove these BoundFields you can:</span></span>

- <span data-ttu-id="fd154-145">使用欄位對話方塊中，按一下從 GridView 的智慧標籤的 [編輯資料行] 連結，以顯示此對話方塊。</span><span class="sxs-lookup"><span data-stu-id="fd154-145">Use the Fields dialog box click on the Edit Columns link from the GridView's smart tag to bring up this dialog box.</span></span> <span data-ttu-id="fd154-146">接下來，選取從左下方 BoundFields 清單，然後按一下紅色的 X 按鈕移除 BoundField。</span><span class="sxs-lookup"><span data-stu-id="fd154-146">Next, select the BoundFields from the lower left list and click the red X button to remove the BoundField.</span></span>
- <span data-ttu-id="fd154-147">從來源檢視，以手動方式編輯 GridView 的宣告式語法，請刪除`<asp:BoundField>`BoundField 您想要移除的項目。</span><span class="sxs-lookup"><span data-stu-id="fd154-147">Edit the GridView's declarative syntax by hand from the Source view, delete the `<asp:BoundField>` element for the BoundField you wish to remove.</span></span>

<span data-ttu-id="fd154-148">移除之後`EmployeeID`， `ReportsTo`，和`Country`BoundFields，您的 GridView 標記應該看起來：</span><span class="sxs-lookup"><span data-stu-id="fd154-148">After you have removed the `EmployeeID`, `ReportsTo`, and `Country` BoundFields, your GridView's markup should look like:</span></span>


[!code-aspx[Main](using-templatefields-in-the-gridview-control-cs/samples/sample1.aspx)]

<span data-ttu-id="fd154-149">請花一點時間瀏覽器中檢視進度。</span><span class="sxs-lookup"><span data-stu-id="fd154-149">Take a moment to view our progress in a browser.</span></span> <span data-ttu-id="fd154-150">此時應該會看到與記錄資料表每位員工和四個資料行： 一個用於員工的姓氏第一個名稱、 其標題，其中一個，一個其雇用日期。</span><span class="sxs-lookup"><span data-stu-id="fd154-150">At this point you should see a table with a record for each employee and four columns: one for the employee's last name, one for their first name, one for their title, and one for their hire date.</span></span>


<span data-ttu-id="fd154-151">[![顯示每個員工的姓氏、 名字、 標題和 HireDate 欄位](using-templatefields-in-the-gridview-control-cs/_static/image8.png)](using-templatefields-in-the-gridview-control-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="fd154-151">[![The LastName, FirstName, Title, and HireDate Fields are Displayed for Each Employee](using-templatefields-in-the-gridview-control-cs/_static/image8.png)](using-templatefields-in-the-gridview-control-cs/_static/image7.png)</span></span>

<span data-ttu-id="fd154-152">**圖 3**: `LastName`， `FirstName`， `Title`，和`HireDate`欄位會顯示每個員工 ([按一下以檢視完整大小的影像](using-templatefields-in-the-gridview-control-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="fd154-152">**Figure 3**: The `LastName`, `FirstName`, `Title`, and `HireDate` Fields are Displayed for Each Employee ([Click to view full-size image](using-templatefields-in-the-gridview-control-cs/_static/image9.png))</span></span>


## <a name="step-2-displaying-the-first-and-last-names-in-a-single-column"></a><span data-ttu-id="fd154-153">步驟 2： 顯示單一資料行中的第一個和最後一個名稱</span><span class="sxs-lookup"><span data-stu-id="fd154-153">Step 2: Displaying the First and Last Names in a Single Column</span></span>

<span data-ttu-id="fd154-154">目前，每位員工的名字和姓氏會顯示在個別的資料行。</span><span class="sxs-lookup"><span data-stu-id="fd154-154">Currently, each employee's first and last names are displayed in a separate column.</span></span> <span data-ttu-id="fd154-155">可能是很好，改為將它們結合成單一資料行。</span><span class="sxs-lookup"><span data-stu-id="fd154-155">It might be nice to combine them into a single column instead.</span></span> <span data-ttu-id="fd154-156">若要完成這項作業，我們需要使用 TemplateField。</span><span class="sxs-lookup"><span data-stu-id="fd154-156">To accomplish this we need to use a TemplateField.</span></span> <span data-ttu-id="fd154-157">我們可以是加入新 TemplateField、 加入所需的標記和資料繫結的語法，然後再刪除`FirstName`和`LastName`BoundFields，或我們可以將轉換`FirstName`BoundField 到 TemplateField，編輯要包含 TemplateField`LastName`值，然後再移除`LastName`BoundField。</span><span class="sxs-lookup"><span data-stu-id="fd154-157">We can either add a new TemplateField, add to it the needed markup and databinding syntax, and then delete the `FirstName` and `LastName` BoundFields, or we can convert the `FirstName` BoundField into a TemplateField, edit the TemplateField to include the `LastName` value, and then remove the `LastName` BoundField.</span></span>

<span data-ttu-id="fd154-158">這兩種方法 net 相同的結果，但我喜歡 BoundFields 轉為 TemplateFields 可能的話，因為轉換會自動新增的個人`ItemTemplate`和`EditItemTemplate`Web 控制項與資料繫結語法來模仿外觀和 BoundField 的功能。</span><span class="sxs-lookup"><span data-stu-id="fd154-158">Both approaches net the same result, but personally I like converting BoundFields to TemplateFields when possible because the conversion automatically adds an `ItemTemplate` and `EditItemTemplate` with Web controls and databinding syntax to mimic the appearance and functionality of the BoundField.</span></span> <span data-ttu-id="fd154-159">好處是，我們需要進行較少工作與 TemplateField 轉換執行此程序將會有幫助我們。</span><span class="sxs-lookup"><span data-stu-id="fd154-159">The benefit is that we'll need to do less work with the TemplateField as the conversion process will have performed some of the work for us.</span></span>

<span data-ttu-id="fd154-160">若要轉換為 TemplateField 現有 BoundField，請按一下編輯資料行中的連結 GridView 的智慧標籤，顯示欄位 對話方塊。</span><span class="sxs-lookup"><span data-stu-id="fd154-160">To convert an existing BoundField into a TemplateField, click on the Edit Columns link from the GridView's smart tag, bringing up the Fields dialog box.</span></span> <span data-ttu-id="fd154-161">選取要轉換從左下角中的清單，然後按一下右下角的"轉換為 TemplateField 到這個欄位 」 連結 BoundField。</span><span class="sxs-lookup"><span data-stu-id="fd154-161">Select the BoundField to convert from the list in the lower left corner and then click the "Convert this field into a TemplateField" link in the bottom right corner.</span></span>


<span data-ttu-id="fd154-162">[![BoundField 轉換為 TemplateField 從 [欄位] 對話方塊](using-templatefields-in-the-gridview-control-cs/_static/image11.png)](using-templatefields-in-the-gridview-control-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="fd154-162">[![Convert a BoundField Into a TemplateField from the Fields Dialog Box](using-templatefields-in-the-gridview-control-cs/_static/image11.png)](using-templatefields-in-the-gridview-control-cs/_static/image10.png)</span></span>

<span data-ttu-id="fd154-163">**圖 4**： 從 [欄位] 對話方塊轉換 BoundField 到 TemplateField ([按一下以檢視完整大小的影像](using-templatefields-in-the-gridview-control-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="fd154-163">**Figure 4**: Convert a BoundField Into a TemplateField from the Fields Dialog Box ([Click to view full-size image](using-templatefields-in-the-gridview-control-cs/_static/image12.png))</span></span>


<span data-ttu-id="fd154-164">請繼續進行，並將轉換`FirstName`BoundField TemplateField 到。</span><span class="sxs-lookup"><span data-stu-id="fd154-164">Go ahead and convert the `FirstName` BoundField into a TemplateField.</span></span> <span data-ttu-id="fd154-165">這項變更後沒有任何 perceptive 的差異，在設計工具中。</span><span class="sxs-lookup"><span data-stu-id="fd154-165">After this change there's no perceptive difference in the Designer.</span></span> <span data-ttu-id="fd154-166">這是因為 BoundField 轉換為 TemplateField 建立為 TemplateField 維護 BoundField 外觀與風格。</span><span class="sxs-lookup"><span data-stu-id="fd154-166">This is because converting the BoundField into a TemplateField creates a TemplateField that maintains the look and feel of the BoundField.</span></span> <span data-ttu-id="fd154-167">儘管那里在任何 visual 差異在此時設計工具中的，此轉換程序已取代宣告式語法 BoundField- `<asp:BoundField DataField="FirstName" HeaderText="FirstName" SortExpression="FirstName" />` -含有下列 TemplateField 語法：</span><span class="sxs-lookup"><span data-stu-id="fd154-167">Despite there being no visual difference at this point in the Designer, this conversion process has replaced the BoundField's declarative syntax - `<asp:BoundField DataField="FirstName" HeaderText="FirstName" SortExpression="FirstName" />` - with the following TemplateField syntax:</span></span>


[!code-aspx[Main](using-templatefields-in-the-gridview-control-cs/samples/sample2.aspx)]

<span data-ttu-id="fd154-168">如您所見，TemplateField 所組成的兩個範本`ItemTemplate`具有標籤其`Text`屬性設定的值為`FirstName`資料欄位和`EditItemTemplate`與文字方塊控制項`Text`屬性也設定若要`FirstName`資料欄位。</span><span class="sxs-lookup"><span data-stu-id="fd154-168">As you can see, the TemplateField consists of two templates an `ItemTemplate` that has a Label whose `Text` property is set to the value of the `FirstName` data field, and an `EditItemTemplate` with a TextBox control whose `Text` property is also set to the `FirstName` data field.</span></span> <span data-ttu-id="fd154-169">資料繫結語法- `<%# Bind("fieldName") %>` -指出資料欄位 *`fieldName`* 繫結至指定的 Web 控制項屬性。</span><span class="sxs-lookup"><span data-stu-id="fd154-169">The databinding syntax - `<%# Bind("fieldName") %>` - indicates that the data field *`fieldName`* is bound to the specified Web control property.</span></span>

<span data-ttu-id="fd154-170">若要加入`LastName`資料欄位值，我們需要加入另一個標籤 Web 控制項，在此 TemplateField`ItemTemplate`並繫結其`Text`屬性`LastName`。</span><span class="sxs-lookup"><span data-stu-id="fd154-170">To add the `LastName` data field value to this TemplateField we need to add another Label Web control in the `ItemTemplate` and bind its `Text` property to `LastName`.</span></span> <span data-ttu-id="fd154-171">這可以手動或透過設計工具完成。</span><span class="sxs-lookup"><span data-stu-id="fd154-171">This can be accomplished either by hand or through the Designer.</span></span> <span data-ttu-id="fd154-172">若要以手動方式執行，只要加入至適當的宣告式語法`ItemTemplate`:</span><span class="sxs-lookup"><span data-stu-id="fd154-172">To do it by hand, simply add the appropriate declarative syntax to the `ItemTemplate`:</span></span>


[!code-aspx[Main](using-templatefields-in-the-gridview-control-cs/samples/sample3.aspx)]

<span data-ttu-id="fd154-173">若要將它加入透過設計工具中，按一下從 GridView 的智慧標籤的 [編輯樣板] 連結。</span><span class="sxs-lookup"><span data-stu-id="fd154-173">To add it through the Designer, click on the Edit Templates link from the GridView's smart tag.</span></span> <span data-ttu-id="fd154-174">這會顯示在 GridView 的範本編輯介面。</span><span class="sxs-lookup"><span data-stu-id="fd154-174">This will display the GridView's template editing interface.</span></span> <span data-ttu-id="fd154-175">在此介面的智慧標籤是一份 GridView 中的範本。</span><span class="sxs-lookup"><span data-stu-id="fd154-175">In this interface's smart tag is a list of the templates in the GridView.</span></span> <span data-ttu-id="fd154-176">因為只有一個 TemplateField 此時，只有列在下拉式清單中的範本有這些範本`FirstName`連同 TemplateField`EmptyDataTemplate`和`PagerTemplate`。</span><span class="sxs-lookup"><span data-stu-id="fd154-176">Since we only have one TemplateField at this point, the only templates listed in the drop-down list are those templates for the `FirstName` TemplateField along with the `EmptyDataTemplate` and `PagerTemplate`.</span></span> <span data-ttu-id="fd154-177">`EmptyDataTemplate`範本時，如果指定，用來呈現 GridView 輸出是否有任何結果中的資料繫結至 GridView; `PagerTemplate`，如果指定，用來呈現分頁介面的支援分頁的 GridView。</span><span class="sxs-lookup"><span data-stu-id="fd154-177">The `EmptyDataTemplate` template, if specified, is used to render the GridView's output if there are no results in the data bound to the GridView; the `PagerTemplate`, if specified, is used to render the paging interface for a GridView that supports paging.</span></span>


<span data-ttu-id="fd154-178">[![可以透過設計工具編輯 GridView 的範本](using-templatefields-in-the-gridview-control-cs/_static/image14.png)](using-templatefields-in-the-gridview-control-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="fd154-178">[![The GridView's Templates Can Be Edited Through the Designer](using-templatefields-in-the-gridview-control-cs/_static/image14.png)](using-templatefields-in-the-gridview-control-cs/_static/image13.png)</span></span>

<span data-ttu-id="fd154-179">**圖 5**: GridView 範本可以會編輯透過設計工具 ([按一下以檢視完整大小的影像](using-templatefields-in-the-gridview-control-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="fd154-179">**Figure 5**: The GridView's Templates Can Be Edited Through the Designer ([Click to view full-size image](using-templatefields-in-the-gridview-control-cs/_static/image15.png))</span></span>


<span data-ttu-id="fd154-180">若也要顯示`LastName`中`FirstName`TemplateField 拖曳 Label 控制項從工具箱拖曳到`FirstName`TemplateField 的`ItemTemplate`在 GridView 的樣板編輯介面。</span><span class="sxs-lookup"><span data-stu-id="fd154-180">To also display the `LastName` in the `FirstName` TemplateField drag the Label control from the Toolbox into the `FirstName` TemplateField's `ItemTemplate` in the GridView's template editing interface.</span></span>


<span data-ttu-id="fd154-181">[![FirstName TemplateField 的 ItemTemplate 中新增標籤 Web 控制項](using-templatefields-in-the-gridview-control-cs/_static/image17.png)](using-templatefields-in-the-gridview-control-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="fd154-181">[![Add a Label Web Control to the FirstName TemplateField's ItemTemplate](using-templatefields-in-the-gridview-control-cs/_static/image17.png)](using-templatefields-in-the-gridview-control-cs/_static/image16.png)</span></span>

<span data-ttu-id="fd154-182">**圖 6**： 將標籤 Web 控制項加入`FirstName`TemplateField 的 ItemTemplate ([按一下以檢視完整大小的影像](using-templatefields-in-the-gridview-control-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="fd154-182">**Figure 6**: Add a Label Web Control to the `FirstName` TemplateField's ItemTemplate ([Click to view full-size image](using-templatefields-in-the-gridview-control-cs/_static/image18.png))</span></span>


<span data-ttu-id="fd154-183">此時加入 TemplateField 標籤 Web 控制項有其`Text`屬性設定為 「 標籤 」。</span><span class="sxs-lookup"><span data-stu-id="fd154-183">At this point the Label Web control added to the TemplateField has its `Text` property set to "Label".</span></span> <span data-ttu-id="fd154-184">我們需要變更這讓此屬性的值繫結`LastName`資料改為欄位。</span><span class="sxs-lookup"><span data-stu-id="fd154-184">We need to change this so that this property is bound to the value of the `LastName` data field instead.</span></span> <span data-ttu-id="fd154-185">若要完成此標籤控制項的智慧標籤上按一下，然後選擇 [編輯資料繫結] 選項。</span><span class="sxs-lookup"><span data-stu-id="fd154-185">To accomplish this click on the Label control's smart tag and choose the Edit DataBindings option.</span></span>


<span data-ttu-id="fd154-186">[![選擇 編輯資料繫結從標籤的智慧標籤](using-templatefields-in-the-gridview-control-cs/_static/image20.png)](using-templatefields-in-the-gridview-control-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="fd154-186">[![Choose the Edit DataBindings Option from the Label's Smart Tag](using-templatefields-in-the-gridview-control-cs/_static/image20.png)](using-templatefields-in-the-gridview-control-cs/_static/image19.png)</span></span>

<span data-ttu-id="fd154-187">**圖 7**： 選擇 編輯資料繫結選項，從標籤的智慧標籤 ([按一下以檢視完整大小的影像](using-templatefields-in-the-gridview-control-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="fd154-187">**Figure 7**: Choose the Edit DataBindings Option from the Label's Smart Tag ([Click to view full-size image](using-templatefields-in-the-gridview-control-cs/_static/image21.png))</span></span>


<span data-ttu-id="fd154-188">這會顯示資料繫結 對話方塊。</span><span class="sxs-lookup"><span data-stu-id="fd154-188">This will bring up the DataBindings dialog box.</span></span> <span data-ttu-id="fd154-189">從這裡您可以選取要參與資料繫結，從左側清單，並選擇資料繫結至從下拉式清單右側欄位的屬性。</span><span class="sxs-lookup"><span data-stu-id="fd154-189">From here you can select the property to participate in databinding from the list on the left and choose the field to bind the data to from the drop-down list on the right.</span></span> <span data-ttu-id="fd154-190">選擇`Text`從左邊的屬性和`LastName`從右側欄位，然後按一下 [確定]。</span><span class="sxs-lookup"><span data-stu-id="fd154-190">Choose the `Text` property from the left and the `LastName` field from the right and click OK.</span></span>


<span data-ttu-id="fd154-191">[![文字屬性繫結到 LastName 資料欄位](using-templatefields-in-the-gridview-control-cs/_static/image23.png)](using-templatefields-in-the-gridview-control-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="fd154-191">[![Bind the Text Property to the LastName Data Field](using-templatefields-in-the-gridview-control-cs/_static/image23.png)](using-templatefields-in-the-gridview-control-cs/_static/image22.png)</span></span>

<span data-ttu-id="fd154-192">**圖 8**： 繫結`Text`屬性`LastName`資料欄位 ([按一下以檢視完整大小的影像](using-templatefields-in-the-gridview-control-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="fd154-192">**Figure 8**: Bind the `Text` Property to the `LastName` Data Field ([Click to view full-size image](using-templatefields-in-the-gridview-control-cs/_static/image24.png))</span></span>


> [!NOTE]
> <span data-ttu-id="fd154-193">資料繫結 對話方塊可讓您指出是否要執行雙向資料繫結。</span><span class="sxs-lookup"><span data-stu-id="fd154-193">The DataBindings dialog box allows you to indicate whether to perform two-way databinding.</span></span> <span data-ttu-id="fd154-194">如果將此選項保留未選取，資料繫結語法`<%# Eval("LastName")%>`將而不是使用`<%# Bind("LastName")%>`。</span><span class="sxs-lookup"><span data-stu-id="fd154-194">If you leave this unchecked, the databinding syntax `<%# Eval("LastName")%>` will be used instead of `<%# Bind("LastName")%>`.</span></span> <span data-ttu-id="fd154-195">此教學課程中，兩種方法是正常的。</span><span class="sxs-lookup"><span data-stu-id="fd154-195">Either approach is fine for this tutorial.</span></span> <span data-ttu-id="fd154-196">雙向資料繫結變得插入和編輯資料時很重要的。</span><span class="sxs-lookup"><span data-stu-id="fd154-196">Two-way databinding becomes important when inserting and editing data.</span></span> <span data-ttu-id="fd154-197">只顯示資料，不過，兩種方法將同樣適用。</span><span class="sxs-lookup"><span data-stu-id="fd154-197">For simply displaying data, however, either approach will work equally well.</span></span> <span data-ttu-id="fd154-198">在未來教學課程中，我們將討論雙向資料繫結，在詳細資料。</span><span class="sxs-lookup"><span data-stu-id="fd154-198">We'll discuss two-way databinding in detail in future tutorials.</span></span>


<span data-ttu-id="fd154-199">請花一點時間來檢視此頁面，透過瀏覽器。</span><span class="sxs-lookup"><span data-stu-id="fd154-199">Take a moment to view this page through a browser.</span></span> <span data-ttu-id="fd154-200">如您所見，GridView 仍然會包含四個資料行。不過，`FirstName`資料行現在會列出*兩者*`FirstName`和`LastName`資料欄位值。</span><span class="sxs-lookup"><span data-stu-id="fd154-200">As you can see, the GridView still includes four columns; however, the `FirstName` column now lists *both* the `FirstName` and `LastName` data field values.</span></span>


<span data-ttu-id="fd154-201">[![FirstName 和 LastName 值顯示單一資料行](using-templatefields-in-the-gridview-control-cs/_static/image26.png)](using-templatefields-in-the-gridview-control-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="fd154-201">[![Both the FirstName and LastName Values are Shown in a Single Column](using-templatefields-in-the-gridview-control-cs/_static/image26.png)](using-templatefields-in-the-gridview-control-cs/_static/image25.png)</span></span>

<span data-ttu-id="fd154-202">**圖 9**： 同時`FirstName`和`LastName`值會顯示單一資料行中 ([按一下以檢視完整大小的影像](using-templatefields-in-the-gridview-control-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="fd154-202">**Figure 9**: Both the `FirstName` and `LastName` Values are Shown in a Single Column ([Click to view full-size image](using-templatefields-in-the-gridview-control-cs/_static/image27.png))</span></span>


<span data-ttu-id="fd154-203">若要完成此第一個步驟，移除`LastName`BoundField 並重新命名`FirstName`TemplateField 的`HeaderText`「 名稱 」 的屬性。</span><span class="sxs-lookup"><span data-stu-id="fd154-203">To complete this first step, remove the `LastName` BoundField and rename the `FirstName` TemplateField's `HeaderText` property to "Name".</span></span> <span data-ttu-id="fd154-204">在這些變更之後 GridView 的宣告式標記看起來應該如下所示：</span><span class="sxs-lookup"><span data-stu-id="fd154-204">After these changes the GridView's declarative markup should look like the following:</span></span>


[!code-aspx[Main](using-templatefields-in-the-gridview-control-cs/samples/sample4.aspx)]


<span data-ttu-id="fd154-205">[![每位員工的第一個和最後一個名稱會顯示在一個資料行](using-templatefields-in-the-gridview-control-cs/_static/image29.png)](using-templatefields-in-the-gridview-control-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="fd154-205">[![Each Employee's First and Last Names are Displayed in One Colum](using-templatefields-in-the-gridview-control-cs/_static/image29.png)](using-templatefields-in-the-gridview-control-cs/_static/image28.png)</span></span>

<span data-ttu-id="fd154-206">**圖 10**： 每個員工的第一個和最後一個名稱會顯示在一個資料行 ([按一下以檢視完整大小的影像](using-templatefields-in-the-gridview-control-cs/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="fd154-206">**Figure 10**: Each Employee's First and Last Names are Displayed in One Colum ([Click to view full-size image](using-templatefields-in-the-gridview-control-cs/_static/image30.png))</span></span>


## <a name="step-3-using-the-calendar-control-to-display-thehireddatefield"></a><span data-ttu-id="fd154-207">步驟 3： 使用行事曆控制項來顯示`HiredDate`欄位</span><span class="sxs-lookup"><span data-stu-id="fd154-207">Step 3: Using the Calendar Control to Display the`HiredDate`Field</span></span>

<span data-ttu-id="fd154-208">在 GridView 中以文字顯示資料欄位值是使用 BoundField 一樣簡單。</span><span class="sxs-lookup"><span data-stu-id="fd154-208">Displaying a data field value as text in a GridView is as simple as using a BoundField.</span></span> <span data-ttu-id="fd154-209">某些情況下，不過，資料是最適合表示使用特定的 Web 控制項，而非只是文字。</span><span class="sxs-lookup"><span data-stu-id="fd154-209">For certain scenarios, however, the data is best expressed using a particular Web control instead of just text.</span></span> <span data-ttu-id="fd154-210">這類自訂資料是顯示的 TemplateFields 可行的。</span><span class="sxs-lookup"><span data-stu-id="fd154-210">Such customization of the display of data is possible with TemplateFields.</span></span> <span data-ttu-id="fd154-211">例如，而不是比： 員工的雇用日期顯示為文字，我們無法顯示行事曆 (使用[月曆控制項](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.calendar(VS.80).aspx)) 具有其雇用日期反白顯示。</span><span class="sxs-lookup"><span data-stu-id="fd154-211">For example, rather than display the employee's hire date as text, we could show a calendar (using [the Calendar control](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.calendar(VS.80).aspx)) with their hire date highlighted.</span></span>

<span data-ttu-id="fd154-212">若要完成這項作業，一開始轉換`HiredDate`BoundField TemplateField 到。</span><span class="sxs-lookup"><span data-stu-id="fd154-212">To accomplish this, start by converting the `HiredDate` BoundField into a TemplateField.</span></span> <span data-ttu-id="fd154-213">只需前往 GridView 的智慧標籤，然後按一下 編輯資料行連結，顯示欄位 對話方塊。</span><span class="sxs-lookup"><span data-stu-id="fd154-213">Simply go to the GridView's smart tag and click the Edit Columns link, bringing up the Fields dialog box.</span></span> <span data-ttu-id="fd154-214">選取`HiredDate`BoundField 並按一下 」 這個欄位轉換為 TemplateField。 」</span><span class="sxs-lookup"><span data-stu-id="fd154-214">Select the `HiredDate` BoundField and click "Convert this field into a TemplateField."</span></span>


<span data-ttu-id="fd154-215">[![HiredDate BoundField 轉換為 TemplateField](using-templatefields-in-the-gridview-control-cs/_static/image32.png)](using-templatefields-in-the-gridview-control-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="fd154-215">[![Convert the HiredDate BoundField Into a TemplateField](using-templatefields-in-the-gridview-control-cs/_static/image32.png)](using-templatefields-in-the-gridview-control-cs/_static/image31.png)</span></span>

<span data-ttu-id="fd154-216">**圖 11**： 轉換`HiredDate`TemplateField 到 BoundField ([按一下以檢視完整大小的影像](using-templatefields-in-the-gridview-control-cs/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="fd154-216">**Figure 11**: Convert the `HiredDate` BoundField Into a TemplateField ([Click to view full-size image](using-templatefields-in-the-gridview-control-cs/_static/image33.png))</span></span>


<span data-ttu-id="fd154-217">如我們所見在步驟 2 中，這將會取代 BoundField 具有為 TemplateField 包含`ItemTemplate`和`EditItemTemplate`文字方塊中的標籤與其`Text`屬性繫結至`HiredDate`值使用的資料繫結語法`<%# Bind("HiredDate")%>`.</span><span class="sxs-lookup"><span data-stu-id="fd154-217">As we saw in Step 2, this will replace the BoundField with a TemplateField that contains an `ItemTemplate` and `EditItemTemplate` with a Label and TextBox whose `Text` properties are bound to the `HiredDate` value using the databinding syntax `<%# Bind("HiredDate")%>`.</span></span>

<span data-ttu-id="fd154-218">若要取代月曆控制項中的文字，請移除標籤，並新增日曆控制項編輯該範本。</span><span class="sxs-lookup"><span data-stu-id="fd154-218">To replace the text with a Calendar control, edit the template by removing the Label and adding a Calendar control.</span></span> <span data-ttu-id="fd154-219">從設計工具中，從 GridView 的智慧標籤選取 編輯範本，然後選擇  `HireDate` TemplateField 的`ItemTemplate`從下拉式清單。</span><span class="sxs-lookup"><span data-stu-id="fd154-219">From the Designer, select Edit Templates from the GridView's smart tag and choose the `HireDate` TemplateField's `ItemTemplate` from the drop-down list.</span></span> <span data-ttu-id="fd154-220">接著，刪除 Label 控制項，並將月曆控制項從 [工具箱] 拖曳到 [編輯範本] 介面。</span><span class="sxs-lookup"><span data-stu-id="fd154-220">Next, delete the Label control and drag a Calendar control from the Toolbox into the template editing interface.</span></span>


<span data-ttu-id="fd154-221">[![將月曆控制項加入 HireDate TemplateField 的 ItemTemplate](using-templatefields-in-the-gridview-control-cs/_static/image35.png)](using-templatefields-in-the-gridview-control-cs/_static/image34.png)</span><span class="sxs-lookup"><span data-stu-id="fd154-221">[![Add a Calendar Control to the HireDate TemplateField's ItemTemplate](using-templatefields-in-the-gridview-control-cs/_static/image35.png)](using-templatefields-in-the-gridview-control-cs/_static/image34.png)</span></span>

<span data-ttu-id="fd154-222">**圖 12**： 將行事曆控制項加入`HireDate`TemplateField 的`ItemTemplate`([按一下以檢視完整大小的影像](using-templatefields-in-the-gridview-control-cs/_static/image36.png))</span><span class="sxs-lookup"><span data-stu-id="fd154-222">**Figure 12**: Add a Calendar Control to the `HireDate` TemplateField's `ItemTemplate` ([Click to view full-size image](using-templatefields-in-the-gridview-control-cs/_static/image36.png))</span></span>


<span data-ttu-id="fd154-223">此時在 GridView 中的每個資料列會包含日曆控制項中的其`HiredDate`TemplateField。</span><span class="sxs-lookup"><span data-stu-id="fd154-223">At this point each row in the GridView will contain a Calendar control in its `HiredDate` TemplateField.</span></span> <span data-ttu-id="fd154-224">不過，員工的實際`HiredDate`值不設定中的任何行事曆控制，造成每個行事曆控制項，顯示目前的月份和日期的預設值。</span><span class="sxs-lookup"><span data-stu-id="fd154-224">However, the employee's actual `HiredDate` value is not set anywhere in the Calendar control, causing each Calendar control to default to showing the current month and date.</span></span> <span data-ttu-id="fd154-225">若要補救這種情況，我們必須指派每位員工的`HiredDate`月曆控制項[SelectedDate](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.calendar.selecteddate(VS.80).aspx)和[VisibleDate](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.calendar.visibledate(VS.80).aspx)屬性。</span><span class="sxs-lookup"><span data-stu-id="fd154-225">To remedy this, we need to assign each employee's `HiredDate` to the Calendar control's [SelectedDate](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.calendar.selecteddate(VS.80).aspx) and [VisibleDate](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.calendar.visibledate(VS.80).aspx) properties.</span></span>

<span data-ttu-id="fd154-226">從日曆控制項的智慧標籤上，選擇 編輯資料繫結。</span><span class="sxs-lookup"><span data-stu-id="fd154-226">From the Calendar control's smart tag, choose Edit DataBindings.</span></span> <span data-ttu-id="fd154-227">接下來，繫結兩者`SelectedDate`和`VisibleDate`屬性`HiredDate`資料欄位。</span><span class="sxs-lookup"><span data-stu-id="fd154-227">Next, bind both `SelectedDate` and `VisibleDate` properties to the `HiredDate` data field.</span></span>


<span data-ttu-id="fd154-228">[![SelectedDate 和 VisibleDate 屬性繫結至 HiredDate 資料欄位](using-templatefields-in-the-gridview-control-cs/_static/image38.png)](using-templatefields-in-the-gridview-control-cs/_static/image37.png)</span><span class="sxs-lookup"><span data-stu-id="fd154-228">[![Bind the SelectedDate and VisibleDate Properties to the HiredDate Data Field](using-templatefields-in-the-gridview-control-cs/_static/image38.png)](using-templatefields-in-the-gridview-control-cs/_static/image37.png)</span></span>

<span data-ttu-id="fd154-229">**圖 13**： 繫結`SelectedDate`和`VisibleDate`屬性`HiredDate`資料欄位 ([按一下以檢視完整大小的影像](using-templatefields-in-the-gridview-control-cs/_static/image39.png))</span><span class="sxs-lookup"><span data-stu-id="fd154-229">**Figure 13**: Bind the `SelectedDate` and `VisibleDate` Properties to the `HiredDate` Data Field ([Click to view full-size image](using-templatefields-in-the-gridview-control-cs/_static/image39.png))</span></span>


> [!NOTE]
> <span data-ttu-id="fd154-230">月曆控制項選取的日期不一定需要可見。</span><span class="sxs-lookup"><span data-stu-id="fd154-230">The Calendar control's selected date need not necessarily be visible.</span></span> <span data-ttu-id="fd154-231">例如，行事曆可能年 8 月 1<sup>st</sup>，1999 設為選取的日期，但會顯示在目前的月份和年份。</span><span class="sxs-lookup"><span data-stu-id="fd154-231">For example, a Calendar may have August 1<sup>st</sup>, 1999 as the selected date, but be showing the current month and year.</span></span> <span data-ttu-id="fd154-232">行事曆控制項指定選取的日期和可見日期`SelectedDate`和`VisibleDate`屬性。</span><span class="sxs-lookup"><span data-stu-id="fd154-232">The selected date and visible date are specified by the Calendar control's `SelectedDate` and `VisibleDate` properties.</span></span> <span data-ttu-id="fd154-233">因為我們想要這兩個選取的員工`HiredDate`，並確定它會顯示我們需要繫結這兩個屬性到`HireDate`資料欄位。</span><span class="sxs-lookup"><span data-stu-id="fd154-233">Since we want to both select the employee's `HiredDate` and make sure that it's shown we need to bind both of these properties to the `HireDate` data field.</span></span>


<span data-ttu-id="fd154-234">當瀏覽器中檢視網頁、 行事曆現在顯示員工的進日期的月份，並選取該特定的日期。</span><span class="sxs-lookup"><span data-stu-id="fd154-234">When viewing the page in a browser, the calendar now shows the month of the employee's hired date and selects that particular date.</span></span>


<span data-ttu-id="fd154-235">[![月曆控制項中顯示員工的 HiredDate](using-templatefields-in-the-gridview-control-cs/_static/image41.png)](using-templatefields-in-the-gridview-control-cs/_static/image40.png)</span><span class="sxs-lookup"><span data-stu-id="fd154-235">[![The Employee's HiredDate is Shown in the Calendar Control](using-templatefields-in-the-gridview-control-cs/_static/image41.png)](using-templatefields-in-the-gridview-control-cs/_static/image40.png)</span></span>

<span data-ttu-id="fd154-236">**圖 14**: 員工`HiredDate`日曆控制項中顯示 ([按一下以檢視完整大小的影像](using-templatefields-in-the-gridview-control-cs/_static/image42.png))</span><span class="sxs-lookup"><span data-stu-id="fd154-236">**Figure 14**: The Employee's `HiredDate` is Shown in the Calendar Control ([Click to view full-size image](using-templatefields-in-the-gridview-control-cs/_static/image42.png))</span></span>


> [!NOTE]
> <span data-ttu-id="fd154-237">Fci 的所有範例為止，我們已看到，本教學課程中我們*不*設定`EnableViewState`屬性`false`此 gridview。</span><span class="sxs-lookup"><span data-stu-id="fd154-237">Contrary to all the examples we've seen thus far, for this tutorial we did *not* set `EnableViewState` property to `false` for this GridView.</span></span> <span data-ttu-id="fd154-238">這項決策的原因是因為按一下日期的行事曆控制，導致回傳，行事曆選取的日期設定為直接按一下日期。</span><span class="sxs-lookup"><span data-stu-id="fd154-238">The reason for this decision is because clicking the dates of the Calendar control causes a postback, setting the Calendar's selected date to the date just clicked.</span></span> <span data-ttu-id="fd154-239">在 GridView 的檢視狀態已停用，不過，在每次回傳 GridView 的資料重新繫結至其基礎資料來源，這會導致的行事曆選取的日期設定*回*位員工的`HireDate`、 覆寫使用者選擇日期。</span><span class="sxs-lookup"><span data-stu-id="fd154-239">If the GridView's view state is disabled, however, on each postback the GridView's data is rebound to its underlying data source, which causes the Calendar's selected date to be set *back* to the employee's `HireDate`, overwriting the date chosen by the user.</span></span>


<span data-ttu-id="fd154-240">此教學課程中這是無意義的討論因為使用者不是能夠更新員工的`HireDate`。</span><span class="sxs-lookup"><span data-stu-id="fd154-240">For this tutorial this is a moot discussion since the user is not able to update the employee's `HireDate`.</span></span> <span data-ttu-id="fd154-241">它可能會設定月曆控制項，讓其日期不能選取最佳。</span><span class="sxs-lookup"><span data-stu-id="fd154-241">It would probably be best to configure the Calendar control so that its dates are not selectable.</span></span> <span data-ttu-id="fd154-242">不論如何，此教學課程會示範在某些情況下檢視狀態必須啟用才能提供特定功能。</span><span class="sxs-lookup"><span data-stu-id="fd154-242">Regardless, this tutorial shows that in some circumstances view state must be enabled in order to provide certain functionality.</span></span>

## <a name="step-4-showing-the-number-of-days-the-employee-has-worked-for-the-company"></a><span data-ttu-id="fd154-243">步驟 4： 顯示員工的天數，曾公司</span><span class="sxs-lookup"><span data-stu-id="fd154-243">Step 4: Showing the Number of Days the Employee Has Worked for the Company</span></span>

<span data-ttu-id="fd154-244">到目前為止，我們已經看到 TemplateFields 的兩個應用程式：</span><span class="sxs-lookup"><span data-stu-id="fd154-244">So far we have seen two applications of TemplateFields:</span></span>

- <span data-ttu-id="fd154-245">將兩個或多個資料欄位值結合成一個資料行，以及</span><span class="sxs-lookup"><span data-stu-id="fd154-245">Combining two or more data field values into one column, and</span></span>
- <span data-ttu-id="fd154-246">表示資料欄位值，而非文字使用 Web 控制項</span><span class="sxs-lookup"><span data-stu-id="fd154-246">Expressing a data field value using a Web control instead of text</span></span>

<span data-ttu-id="fd154-247">TemplateFields 第三個使用中顯示有關 GridView 的中繼資料為基礎的資料。</span><span class="sxs-lookup"><span data-stu-id="fd154-247">A third use of TemplateFields is in displaying metadata about the GridView's underlying data.</span></span> <span data-ttu-id="fd154-248">除了顯示員工的雇用日期，比方說，我們可能也要有顯示多少就已經在工作的總天數的資料行。</span><span class="sxs-lookup"><span data-stu-id="fd154-248">In addition to showing the employees' hire dates, for example, we might also want to have a column that displays how many total days they've been on the job.</span></span>

<span data-ttu-id="fd154-249">尚未 TemplateFields 另一個用途，就會發生案例中需要有不同報表中顯示網頁比格式儲存在資料庫中基礎資料時。</span><span class="sxs-lookup"><span data-stu-id="fd154-249">Yet another use of TemplateFields arises in scenarios when the underlying data needs to be displayed differently in the web page report than in the format it's stored in the database.</span></span> <span data-ttu-id="fd154-250">想像`Employees`資料表具有`Gender`儲存字元的欄位`M`或`F`指出員工的性別。</span><span class="sxs-lookup"><span data-stu-id="fd154-250">Imagine that the `Employees` table had a `Gender` field that stored the character `M` or `F` to indicate the sex of the employee.</span></span> <span data-ttu-id="fd154-251">當我們可能會想要為"Male"或"Female"，而非只"M"或"F"顯示性別的網頁中顯示這項資訊。</span><span class="sxs-lookup"><span data-stu-id="fd154-251">When displaying this information in a web page we might want to show the gender as either "Male" or "Female", as opposed to just "M" or "F".</span></span>

<span data-ttu-id="fd154-252">藉由建立可處理這兩種案例*格式方法*ASP.NET 網頁的程式碼後置類別中 (或在個別的類別庫中，實作為`static`方法)，會叫用的範本。</span><span class="sxs-lookup"><span data-stu-id="fd154-252">Both of these scenarios can be handled by creating a *formatting method* in the ASP.NET page's code-behind class (or in a separate class library, implemented as a `static` method) that is invoked from the template.</span></span> <span data-ttu-id="fd154-253">這種格式化方法會叫用從範本使用先前看過的資料繫結語法相同。</span><span class="sxs-lookup"><span data-stu-id="fd154-253">Such a formatting method is invoked from the template using the same databinding syntax seen earlier.</span></span> <span data-ttu-id="fd154-254">格式化的方法可以接受任意數目的參數，但必須傳回的字串。</span><span class="sxs-lookup"><span data-stu-id="fd154-254">The formatting method can take in any number of parameters, but must return a string.</span></span> <span data-ttu-id="fd154-255">這個傳回的字串會插入至範本的 HTML。</span><span class="sxs-lookup"><span data-stu-id="fd154-255">This returned string is the HTML that is injected into the template.</span></span>

<span data-ttu-id="fd154-256">為了說明這個概念，讓我們來加強我們的教學課程顯示列出員工已在工作總天數的資料行。</span><span class="sxs-lookup"><span data-stu-id="fd154-256">To illustrate this concept, let's augment our tutorial to show a column that lists the total number of days an employee has been on the job.</span></span> <span data-ttu-id="fd154-257">此格式的方法會將`Northwind.EmployeesRow`物件，並傳回的員工具有已採用字串形式的天數。</span><span class="sxs-lookup"><span data-stu-id="fd154-257">This formatting method will take in a `Northwind.EmployeesRow` object and return the number of days the employee has been employed as a string.</span></span> <span data-ttu-id="fd154-258">這個方法可以加入至 ASP.NET 網頁的程式碼後置類別，但*必須*標示為`protected`或`public`才能存取的範本。</span><span class="sxs-lookup"><span data-stu-id="fd154-258">This method can be added to the ASP.NET page's code-behind class, but *must* be marked as `protected` or `public` in order to be accessible from the template.</span></span>


[!code-csharp[Main](using-templatefields-in-the-gridview-control-cs/samples/sample5.cs)]

<span data-ttu-id="fd154-259">因為`HiredDate`欄位只能包含`NULL`資料庫我們必須先確定值不是的值`NULL`再繼續計算。</span><span class="sxs-lookup"><span data-stu-id="fd154-259">Since the `HiredDate` field can contain `NULL` database values we must first ensure that the value is not `NULL` before proceeding with the calculation.</span></span> <span data-ttu-id="fd154-260">如果`HiredDate`值是`NULL`，我們就只會傳回字串"Unknown"; 如果不是`NULL`，我們會計算目前時間之間的差異和`HiredDate`值，並傳回的天數。</span><span class="sxs-lookup"><span data-stu-id="fd154-260">If the `HiredDate` value is `NULL`, we simply return the string "Unknown"; if it is not `NULL`, we compute the difference between the current time and the `HiredDate` value and return the number of days.</span></span>

<span data-ttu-id="fd154-261">若要利用我們要叫用它在使用資料繫結語法 GridView TemplateField 從這個方法。</span><span class="sxs-lookup"><span data-stu-id="fd154-261">To utilize this method we need to invoke it from a TemplateField in the GridView using the databinding syntax.</span></span> <span data-ttu-id="fd154-262">啟動新 TemplateField 加入編輯資料行中的連結 GridView 的智慧標籤上按一下，然後加入新 TemplateField GridView。</span><span class="sxs-lookup"><span data-stu-id="fd154-262">Start by adding a new TemplateField to the GridView by clicking on the Edit Columns link in the GridView's smart tag and adding a new TemplateField.</span></span>


<span data-ttu-id="fd154-263">[![在 GridView 中加入新 TemplateField](using-templatefields-in-the-gridview-control-cs/_static/image44.png)](using-templatefields-in-the-gridview-control-cs/_static/image43.png)</span><span class="sxs-lookup"><span data-stu-id="fd154-263">[![Add a New TemplateField to the GridView](using-templatefields-in-the-gridview-control-cs/_static/image44.png)](using-templatefields-in-the-gridview-control-cs/_static/image43.png)</span></span>

<span data-ttu-id="fd154-264">**圖 15**: GridView 中加入新 TemplateField ([按一下以檢視完整大小的影像](using-templatefields-in-the-gridview-control-cs/_static/image45.png))</span><span class="sxs-lookup"><span data-stu-id="fd154-264">**Figure 15**: Add a New TemplateField to the GridView ([Click to view full-size image](using-templatefields-in-the-gridview-control-cs/_static/image45.png))</span></span>


<span data-ttu-id="fd154-265">設定此新 TemplateField `HeaderText` 「 天的工作 」 的屬性和其`ItemStyle`的`HorizontalAlign`屬性`Center`。</span><span class="sxs-lookup"><span data-stu-id="fd154-265">Set this new TemplateField's `HeaderText` property to "Days on the Job" and its `ItemStyle`'s `HorizontalAlign` property to `Center`.</span></span> <span data-ttu-id="fd154-266">若要呼叫`DisplayDaysOnJob`方法在範本中，加入`ItemTemplate`，並使用下列資料繫結語法：</span><span class="sxs-lookup"><span data-stu-id="fd154-266">To call the `DisplayDaysOnJob` method from the template, add an `ItemTemplate` and use the following databinding syntax:</span></span>


[!code-aspx[Main](using-templatefields-in-the-gridview-control-cs/samples/sample6.aspx)]

<span data-ttu-id="fd154-267">`Container.DataItem`傳回`DataRowView`物件對應至`DataSource`記錄繫結至`GridViewRow`。</span><span class="sxs-lookup"><span data-stu-id="fd154-267">`Container.DataItem` returns a `DataRowView` object corresponding to the `DataSource` record bound to the `GridViewRow`.</span></span> <span data-ttu-id="fd154-268">其`Row`屬性會傳回強型別`Northwind.EmployeesRow`，傳遞給`DisplayDaysOnJob`方法。</span><span class="sxs-lookup"><span data-stu-id="fd154-268">Its `Row` property returns the strongly-typed `Northwind.EmployeesRow`, which is passed to the `DisplayDaysOnJob` method.</span></span> <span data-ttu-id="fd154-269">此資料繫結語法會直接在`ItemTemplate`（如下列宣告式語法中所示） 或可指派給`Text`標籤 Web 控制項的屬性。</span><span class="sxs-lookup"><span data-stu-id="fd154-269">This databinding syntax can appear directly in the `ItemTemplate` (as shown in the declarative syntax below) or can be assigned to the `Text` property of a Label Web control.</span></span>

> [!NOTE]
> <span data-ttu-id="fd154-270">或者，而不是傳入`EmployeesRow`執行個體，我們可以只傳入`HireDate`值使用`<%# DisplayDaysOnJob(Eval("HireDate")) %>`。</span><span class="sxs-lookup"><span data-stu-id="fd154-270">Alternatively, instead of passing in an `EmployeesRow` instance, we could just pass in the `HireDate` value using `<%# DisplayDaysOnJob(Eval("HireDate")) %>`.</span></span> <span data-ttu-id="fd154-271">不過，`Eval`方法會傳回`object`，因此我們必須變更我們`DisplayDaysOnJob`接受類型的輸入的參數的方法簽章`object`請改用。</span><span class="sxs-lookup"><span data-stu-id="fd154-271">However, the `Eval` method returns an `object`, so we'd have to change our `DisplayDaysOnJob` method signature to accept an input parameter of type `object`, instead.</span></span> <span data-ttu-id="fd154-272">我們無法盲目轉換`Eval("HireDate")`呼叫`DateTime`因為`HireDate`中的資料行`Employees`資料表可以包含`NULL`值。</span><span class="sxs-lookup"><span data-stu-id="fd154-272">We can't blindly cast the `Eval("HireDate")` call to a `DateTime` because the `HireDate` column in the `Employees` table can contain `NULL` values.</span></span> <span data-ttu-id="fd154-273">因此，我們需要接受`object`做為輸入參數的`DisplayDaysOnJob`方法，檢查是否有資料庫`NULL`值 (這可以透過`Convert.IsDBNull(objectToCheck)`)，然後據以繼續。</span><span class="sxs-lookup"><span data-stu-id="fd154-273">Therefore, we'd need to accept an `object` as the input parameter for the `DisplayDaysOnJob` method, check to see if it had a database `NULL` value (which can be accomplished using `Convert.IsDBNull(objectToCheck)`), and then proceed accordingly.</span></span>


<span data-ttu-id="fd154-274">由於這些微妙，我選擇要傳入整個`EmployeesRow`執行個體。</span><span class="sxs-lookup"><span data-stu-id="fd154-274">Due to these subtleties, I've opted to pass in the entire `EmployeesRow` instance.</span></span> <span data-ttu-id="fd154-275">在下一個教學課程中，我們會看到更多的調整範例使用`Eval("columnName")`傳遞至格式化方法的輸入的參數的語法。</span><span class="sxs-lookup"><span data-stu-id="fd154-275">In the next tutorial we'll see a more fitting example for using the `Eval("columnName")` syntax for passing an input parameter into a formatting method.</span></span>

<span data-ttu-id="fd154-276">下列範例示範宣告式語法的我們 GridView 加入 TemplateField 後和`DisplayDaysOnJob`方法呼叫從`ItemTemplate`:</span><span class="sxs-lookup"><span data-stu-id="fd154-276">The following shows the declarative syntax for our GridView after the TemplateField has been added and the `DisplayDaysOnJob` method called from the `ItemTemplate`:</span></span>


[!code-aspx[Main](using-templatefields-in-the-gridview-control-cs/samples/sample7.aspx)]

<span data-ttu-id="fd154-277">圖 16 顯示已完成教學課程中，透過瀏覽器檢視時。</span><span class="sxs-lookup"><span data-stu-id="fd154-277">Figure 16 shows the completed tutorial, when viewed through a browser.</span></span>


<span data-ttu-id="fd154-278">[![顯示員工已於作業的天數數目](using-templatefields-in-the-gridview-control-cs/_static/image47.png)](using-templatefields-in-the-gridview-control-cs/_static/image46.png)</span><span class="sxs-lookup"><span data-stu-id="fd154-278">[![The Number of Days the Employee Has Been on the Job is Displayed](using-templatefields-in-the-gridview-control-cs/_static/image47.png)](using-templatefields-in-the-gridview-control-cs/_static/image46.png)</span></span>

<span data-ttu-id="fd154-279">**圖 16**: 數字的天員工已在工作上會顯示 ([按一下以檢視完整大小的影像](using-templatefields-in-the-gridview-control-cs/_static/image48.png))</span><span class="sxs-lookup"><span data-stu-id="fd154-279">**Figure 16**: The Number of Days the Employee Has Been on the Job is Displayed ([Click to view full-size image](using-templatefields-in-the-gridview-control-cs/_static/image48.png))</span></span>


## <a name="summary"></a><span data-ttu-id="fd154-280">總結</span><span class="sxs-lookup"><span data-stu-id="fd154-280">Summary</span></span>

<span data-ttu-id="fd154-281">在 GridView 控制項 TemplateField 允許較高的彈性，可與其他欄位控制項顯示資料。</span><span class="sxs-lookup"><span data-stu-id="fd154-281">The TemplateField in the GridView control allows for a higher degree of flexibility in displaying data than is available with the other field controls.</span></span> <span data-ttu-id="fd154-282">TemplateFields 很理想的情況下其中：</span><span class="sxs-lookup"><span data-stu-id="fd154-282">TemplateFields are ideal for situations where:</span></span>

- <span data-ttu-id="fd154-283">需要一個 GridView 的資料行中顯示多個資料欄位</span><span class="sxs-lookup"><span data-stu-id="fd154-283">Multiple data fields need to be displayed in one GridView column</span></span>
- <span data-ttu-id="fd154-284">資料是最適合使用表示 Web 控制項，而不是純文字</span><span class="sxs-lookup"><span data-stu-id="fd154-284">The data is best expressed using a Web control rather than plain text</span></span>
- <span data-ttu-id="fd154-285">輸出取決於基礎資料，例如顯示中繼資料，或在重新格式化資料</span><span class="sxs-lookup"><span data-stu-id="fd154-285">The output depends on the underlying data, such as displaying metadata or in reformatting the data</span></span>

<span data-ttu-id="fd154-286">自訂資料的顯示，除了 TemplateFields 也會用於自訂我們未來將會看到教學課程，用於編輯和插入資料的使用者介面。</span><span class="sxs-lookup"><span data-stu-id="fd154-286">In addition to customizing the display of data, TemplateFields are also used for customizing the user interfaces used for editing and inserting data, as we'll see in future tutorials.</span></span>

<span data-ttu-id="fd154-287">下面兩個教學課程將繼續探索開頭看使用 TemplateFields DetailsView 中的範本。</span><span class="sxs-lookup"><span data-stu-id="fd154-287">The next two tutorials continue exploring templates, starting with a look at using TemplateFields in a DetailsView.</span></span> <span data-ttu-id="fd154-288">接下來，我們將會開啟 FormView 中，這個欄位會使用範本，以提供更大彈性的配置和資料結構。</span><span class="sxs-lookup"><span data-stu-id="fd154-288">Following that, we'll turn to the FormView, which uses templates in lieu of fields to provide greater flexibility in the layout and structure of the data.</span></span>

<span data-ttu-id="fd154-289">祝您程式設計 ！</span><span class="sxs-lookup"><span data-stu-id="fd154-289">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="fd154-290">關於作者</span><span class="sxs-lookup"><span data-stu-id="fd154-290">About the Author</span></span>

<span data-ttu-id="fd154-291">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml)，作者的七個 ASP/ASP.NET 書籍和的創辦[4GuysFromRolla.com](http://www.4guysfromrolla.com)，已從 1998 年使用 Microsoft Web 技術。</span><span class="sxs-lookup"><span data-stu-id="fd154-291">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="fd154-292">Scott 可做為獨立顧問、 訓練和寫入器。</span><span class="sxs-lookup"><span data-stu-id="fd154-292">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="fd154-293">他最新的活頁簿[ *Sam 教導您自己 ASP.NET 2.0 24 小時內*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)。</span><span class="sxs-lookup"><span data-stu-id="fd154-293">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="fd154-294">他可以在達到[ mitchell@4GuysFromRolla.com。](mailto:mitchell@4GuysFromRolla.com)或透過他的部落格，這可以在找到[http://ScottOnWriting.NET](http://ScottOnWriting.NET)。</span><span class="sxs-lookup"><span data-stu-id="fd154-294">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="fd154-295">特別感謝</span><span class="sxs-lookup"><span data-stu-id="fd154-295">Special Thanks To</span></span>

<span data-ttu-id="fd154-296">許多有用的檢閱者已檢閱本教學課程系列。</span><span class="sxs-lookup"><span data-stu-id="fd154-296">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="fd154-297">在此教學課程的前導檢閱者已 Dan Jagers。</span><span class="sxs-lookup"><span data-stu-id="fd154-297">Lead reviewer for this tutorial was Dan Jagers.</span></span> <span data-ttu-id="fd154-298">檢閱我即將推出的 MSDN 文件有興趣嗎？</span><span class="sxs-lookup"><span data-stu-id="fd154-298">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="fd154-299">如果是這樣，卸除我一行[ mitchell@4GuysFromRolla.com。](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="fd154-299">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="fd154-300">[上一頁](custom-formatting-based-upon-data-cs.md)
[下一頁](using-templatefields-in-the-detailsview-control-cs.md)</span><span class="sxs-lookup"><span data-stu-id="fd154-300">[Previous](custom-formatting-based-upon-data-cs.md)
[Next](using-templatefields-in-the-detailsview-control-cs.md)</span></span>
