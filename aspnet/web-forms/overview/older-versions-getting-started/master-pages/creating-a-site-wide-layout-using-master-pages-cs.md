---
uid: web-forms/overview/older-versions-getting-started/master-pages/creating-a-site-wide-layout-using-master-pages-cs
title: 建立全網站的版面配置使用主版頁面 (C#) |Microsoft Docs
author: rick-anderson
description: 本教學課程中會顯示主版頁面的基本概念。 也就是為何主版頁面是怎麼一建立主版頁面、 什麼是內容的預留位置，是怎麼一 cr...
ms.author: riande
ms.date: 05/21/2008
ms.assetid: 78f8d194-03b9-44a5-8255-90e7cd1c2ee1
msc.legacyurl: /web-forms/overview/older-versions-getting-started/master-pages/creating-a-site-wide-layout-using-master-pages-cs
msc.type: authoredcontent
ms.openlocfilehash: 3bdb533c1cb724d57152e676a75af8067a6828d8
ms.sourcegitcommit: 45ac74e400f9f2b7dbded66297730f6f14a4eb25
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/16/2018
ms.locfileid: "41826202"
---
<a name="creating-a-site-wide-layout-using-master-pages-c"></a><span data-ttu-id="ba4e1-104">建立全網站的版面配置使用主版頁面 (C#)</span><span class="sxs-lookup"><span data-stu-id="ba4e1-104">Creating a Site-Wide Layout Using Master Pages (C#)</span></span>
====================
<span data-ttu-id="ba4e1-105">藉由[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="ba4e1-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="ba4e1-106">[下載程式碼](http://download.microsoft.com/download/e/e/f/eef369f5-743a-4a52-908f-b6532c4ce0a4/ASPNET_MasterPages_Tutorial_01_CS.zip)或[下載 PDF](http://download.microsoft.com/download/8/f/6/8f6349e4-6554-405a-bcd7-9b094ba5089a/ASPNET_MasterPages_Tutorial_01_CS.pdf)</span><span class="sxs-lookup"><span data-stu-id="ba4e1-106">[Download Code](http://download.microsoft.com/download/e/e/f/eef369f5-743a-4a52-908f-b6532c4ce0a4/ASPNET_MasterPages_Tutorial_01_CS.zip) or [Download PDF](http://download.microsoft.com/download/8/f/6/8f6349e4-6554-405a-bcd7-9b094ba5089a/ASPNET_MasterPages_Tutorial_01_CS.pdf)</span></span>

> <span data-ttu-id="ba4e1-107">本教學課程中會顯示主版頁面的基本概念。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-107">This tutorial will show master page basics.</span></span> <span data-ttu-id="ba4e1-108">也就是為何主版頁面，其中一個要如何建立主版頁面，什麼是內容的預留位置，要如何一個建立的 ASP.NET 網頁，會使用主版頁面，如何修改主版頁面會自動反映在其相關聯的內容頁面，依此類推。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-108">Namely, what are master pages, how does one create a master page, what are content place holders, how does one create an ASP.NET page that uses a master page, how modifying the master page is automatically reflected in its associated content pages, and so on.</span></span>


## <a name="introduction"></a><span data-ttu-id="ba4e1-109">簡介</span><span class="sxs-lookup"><span data-stu-id="ba4e1-109">Introduction</span></span>

<span data-ttu-id="ba4e1-110">設計良好的一個屬性是網站的一致的整個網站的頁面配置。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-110">One attribute of a well-designed website is a consistent site-wide page layout.</span></span> <span data-ttu-id="ba4e1-111">[www.asp.net](www.asp.net) 網站後，為例。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-111">Take the www.asp.net website, for example.</span></span> <span data-ttu-id="ba4e1-112">在撰寫本文時，每一頁會有相同的內容，在頂端和底部的頁面。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-112">At the time of this writing, every page has the same content at the top and bottom of the page.</span></span> <span data-ttu-id="ba4e1-113">如 [圖 1] 所示，每個頁面最上方會顯示一份 Microsoft 社群的灰色列。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-113">As Figure 1 shows, the very top of each page displays a gray bar with a list of Microsoft Communities.</span></span> <span data-ttu-id="ba4e1-114">下方也就是為網站標誌、 所在的站台已轉譯，語言和核心區段的清單： 首頁、 開始、 深入了解、 下載及其他等等。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-114">Beneath that is the site logo, the list of languages into which the site has been translated, and the core sections: Home, Get Started, Learn, Downloads, and so forth.</span></span> <span data-ttu-id="ba4e1-115">同樣地，頁面底部包含 www.asp.net 、 的著作權陳述式，以及隱私權聲明連結廣告的相關資訊。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-115">Likewise, the bottom of the page includes information about advertising on www.asp.net, a copyright statement, and a link to the privacy statement.</span></span>


<span data-ttu-id="ba4e1-116">[![Www.asp.net 網站所有頁面採用一致的外觀與風格](creating-a-site-wide-layout-using-master-pages-cs/_static/image2.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="ba4e1-116">[![The www.asp.net Website Employs a Consistent Look and Feel Across All Pages](creating-a-site-wide-layout-using-master-pages-cs/_static/image2.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image1.png)</span></span>

<span data-ttu-id="ba4e1-117"><strong>圖 01</strong>: www.asp.net 網站採用一致的查詢和覺得跨所有的網頁 ([按一下以檢視完整大小的影像](creating-a-site-wide-layout-using-master-pages-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="ba4e1-117"><strong>Figure 01</strong>: The www.asp.net Website Employs a Consistent Look and Feel Across All Pages ([Click to view full-size image](creating-a-site-wide-layout-using-master-pages-cs/_static/image3.png))</span></span>


<span data-ttu-id="ba4e1-118">設計良好的站台的另一個屬性就是可以變更站台的外觀的容易。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-118">Another attribute of a well-designed site is the ease with which the site's appearance can be changed.</span></span> <span data-ttu-id="ba4e1-119">[圖 1] 顯示 www.asp.net 首頁，自 2008 年 3 月起，但現在開始到本教學課程中的發行集，可能執行的動作會變更外觀與風格。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-119">Figure 1 shows the www.asp.net homepage as of March 2008, but between now and this tutorial's publication, the look and feel may have changed.</span></span> <span data-ttu-id="ba4e1-120">可能是沿著頂端的功能表項目會展開包括 MVC 架構的新區段。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-120">Perhaps the menu items along the top will expand to include a new section for the MVC framework.</span></span> <span data-ttu-id="ba4e1-121">或者，也許是嶄新的設計，含有不同的色彩、 字型和配置即將揭開。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-121">Or maybe a radically new design with different colors, fonts, and layout will be unveiled.</span></span> <span data-ttu-id="ba4e1-122">將這類變更套用至整個網站應該快速及簡單的程序不需要修改的數千個組成該網站的網頁。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-122">Applying such changes to the entire site should be a fast and simple process that does not require modifying the thousands of web pages that make up the site.</span></span>

<span data-ttu-id="ba4e1-123">在 ASP.NET 中建立全網站的頁面範本可使用*主版頁面*。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-123">Creating a site-wide page template in ASP.NET is possible through the use of *master pages*.</span></span> <span data-ttu-id="ba4e1-124">簡單的說，主版頁面是一種特殊類型的定義中所有常見的標記的 ASP.NET 網頁*內容頁*以及自訂內容 頁面的內容頁面為基礎的區域。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-124">In a nutshell, a master page is a special type of ASP.NET page that defines the markup that is common among all *content pages* as well as regions that are customizable on a content page-by-content page basis.</span></span> <span data-ttu-id="ba4e1-125">（內容頁面是 ASP.NET 網頁繫結至主版頁面）。每當變更主版頁面的版面配置或格式化時，所有其內容頁的輸出會同樣地立即更新，這可讓您套用整個網站的外觀會變更，只要更新和部署單一檔案 （也就是，主版頁面）。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-125">(A content page is an ASP.NET page that is bound to the master page.) Whenever a master page's layout or formatting is changed, all of its content pages' output is likewise immediately updated, which makes applying site-wide appearance changes as easy as updating and deploying a single file (namely, the master page).</span></span>

<span data-ttu-id="ba4e1-126">這是一系列的教學課程會探索使用主版頁面的第一個教學課程。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-126">This is the first tutorial in a series of tutorials that explore using master pages.</span></span> <span data-ttu-id="ba4e1-127">本教學課程系列的課程我們：</span><span class="sxs-lookup"><span data-stu-id="ba4e1-127">Over the course of this tutorial series we:</span></span>

- <span data-ttu-id="ba4e1-128">檢查建立主版頁面和其相關聯的內容頁面</span><span class="sxs-lookup"><span data-stu-id="ba4e1-128">Examine creating master pages and their associated content pages,</span></span>
- <span data-ttu-id="ba4e1-129">討論各種不同的秘訣、 技巧和陷阱，</span><span class="sxs-lookup"><span data-stu-id="ba4e1-129">Discuss a variety of tips, tricks, and traps,</span></span>
- <span data-ttu-id="ba4e1-130">找出常見的主版頁面錯誤，並瀏覽因應措施，</span><span class="sxs-lookup"><span data-stu-id="ba4e1-130">Identify common master page pitfalls and explore workarounds,</span></span>
- <span data-ttu-id="ba4e1-131">了解如何從內容頁面和一個-反之亦然，存取主版頁面</span><span class="sxs-lookup"><span data-stu-id="ba4e1-131">See how to access the master page from a content page and vice-a-versa,</span></span>
- <span data-ttu-id="ba4e1-132">了解如何指定在執行階段的內容頁面的主版頁面和</span><span class="sxs-lookup"><span data-stu-id="ba4e1-132">Learn how to specify a content page's master page at runtime, and</span></span>
- <span data-ttu-id="ba4e1-133">其他進階的主版頁面主題。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-133">Other advanced master page topics.</span></span>

<span data-ttu-id="ba4e1-134">這些教學課程都被為了很簡潔，並提供足夠的螢幕擷取畫面的逐步指示，可逐步引導您完成此程序以視覺化方式而定。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-134">These tutorials are geared to be concise and provide step-by-step instructions with plenty of screen shots to walk you through the process visually.</span></span> <span data-ttu-id="ba4e1-135">每個教學課程適用於 C# 和 Visual Basic 版本，而且包含的下載時，使用完整的程式碼。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-135">Each tutorial is available in C# and Visual Basic versions and includes a download of the complete code used.</span></span>

<span data-ttu-id="ba4e1-136">本教學課程中首開始了解主版頁面的基本概念。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-136">This inaugural tutorial starts with a look at master page basics.</span></span> <span data-ttu-id="ba4e1-137">我們會討論主版頁面的運作方式，看看建立主版頁面與相關聯的內容頁面，使用 Visual Web Developer 中，並請參閱如何主版頁面的變更會立即反映在其內容的頁面。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-137">We discuss how master pages work, look at creating a master page and associated content pages using Visual Web Developer, and see how changes to a master page are immediately reflected in its content pages.</span></span> <span data-ttu-id="ba4e1-138">讓我們開始吧 ！</span><span class="sxs-lookup"><span data-stu-id="ba4e1-138">Let's get started!</span></span>

## <a name="understanding-how-master-pages-work"></a><span data-ttu-id="ba4e1-139">了解主版頁面的運作方式</span><span class="sxs-lookup"><span data-stu-id="ba4e1-139">Understanding How Master Pages Work</span></span>

<span data-ttu-id="ba4e1-140">建置具有一致的全站台的頁面配置的網站需要每個網頁上發出通用格式的標記，除了其自訂的內容。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-140">Building a website with a consistent site-wide page layout requires that each web page emit common formatting markup in addition to its custom content.</span></span> <span data-ttu-id="ba4e1-141">例如，雖然在 www.asp.net 上的每個教學課程或論壇貼文都有自己唯一的內容，這些頁面每一也會呈現一系列的常見`<div>`顯示最上層區段連結的項目： 首頁、 開始、 學習、 等等。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-141">For example, while each tutorial or forum post on www.asp.net have their own unique content, each of these pages also render a series of common `<div>` elements that display the top-level section links: Home, Get Started, Learn, and so on.</span></span>

<span data-ttu-id="ba4e1-142">有各種技術，用於建立具有一致的外觀及操作的 web 網頁。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-142">There are a variety of techniques for creating web pages with a consistent look and feel.</span></span> <span data-ttu-id="ba4e1-143">貝氏方法，就是只要複製，並將常見的版面配置標記貼到 所有網頁，但這種方法有一些缺點。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-143">A naive approach is to simply copy and paste the common layout markup into all web pages, but this approach has a number of downsides.</span></span> <span data-ttu-id="ba4e1-144">簡單來說，每次建立新的頁面時，您必須記得複製並貼到頁面的 共用的內容。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-144">For starters, every time a new page is created, you must remember to copy and paste the shared content into the page.</span></span> <span data-ttu-id="ba4e1-145">這類複製並貼上作業會敞開錯誤，因為您可能不小心將只是共用標記的子集複製到新頁面。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-145">Such copying and pasting operations are ripe for error as you may accidentally copy only a subset of the shared markup into a new page.</span></span> <span data-ttu-id="ba4e1-146">並不夠好，這種方法可以取代現有的全站台的外觀新即時痛，因為必須編輯每個站台中的單一頁面，才能使用新的外觀與風格。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-146">And to top it off, this approach makes replacing the existing site-wide appearance with a new one a real pain because every single page in the site must be edited in order to use the new look and feel.</span></span>

<span data-ttu-id="ba4e1-147">在 ASP.NET 2.0 版、 之前頁面開發人員通常會放在常見的標記[使用者控制項](https://msdn.microsoft.com/library/y6wb1a0e.aspx)然後新增至每個頁面的 這些使用者控制項。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-147">Prior to ASP.NET version 2.0, page developers often placed common markup in [User Controls](https://msdn.microsoft.com/library/y6wb1a0e.aspx) and then added these User Controls to each and every page.</span></span> <span data-ttu-id="ba4e1-148">這種方法需要頁面開發人員手動將使用者控制項新增至每個新的頁面，請記住，但允許進行更輕鬆的全站台修改，因為使用者控制項更新常見的標記時才能進行修改。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-148">This approach required that the page developer remember to manually add the User Controls to every new page, but allowed for easier site-wide modifications because when updating the common markup only the User Controls needed to be modified.</span></span> <span data-ttu-id="ba4e1-149">不幸的是，Visual Studio.NET 2002年和 2003-版本的 Visual Studio 用來建立 ASP.NET 1.x 應用程式-在 [設計] 檢視中呈現使用者控制項，會以灰色方塊。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-149">Unfortunately, Visual Studio .NET 2002 and 2003 - the versions of Visual Studio used to create ASP.NET 1.x applications - rendered User Controls in the Design view as gray boxes.</span></span> <span data-ttu-id="ba4e1-150">因此，使用這種方法的網頁開發人員不喜歡的 WYSIWYG 設計階段環境。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-150">Consequently, page developers using this approach did not enjoy a WYSIWYG design-time environment.</span></span>

<span data-ttu-id="ba4e1-151">使用使用者控制項的缺點已解決在 ASP.NET 2.0 版和 Visual Studio 2005 中引進*主版頁面*。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-151">The shortcomings of using User Controls were addressed in ASP.NET version 2.0 and Visual Studio 2005 with the introduction of *master pages*.</span></span> <span data-ttu-id="ba4e1-152">主版頁面是一種特殊類型的 ASP.NET 頁面，定義全站台的標記和*地區*位置相關聯*內容頁*定義其自訂的標記。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-152">A master page is a special type of ASP.NET page that defines both the site-wide markup and the *regions* where associated *content pages* define their custom markup.</span></span> <span data-ttu-id="ba4e1-153">如同我們在步驟 1 所見，這些區域 ContentPlaceHolder 控制項所定義。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-153">As we will see in Step 1, these regions are defined by ContentPlaceHolder controls.</span></span> <span data-ttu-id="ba4e1-154">ContentPlaceHolder 控制項只是表示主版頁面的控制階層架構中，插入自訂內容，由內容頁面的位置。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-154">The ContentPlaceHolder control simply denotes a position in the master page's control hierarchy where custom content can be injected by a content page.</span></span>

> [!NOTE]
> <span data-ttu-id="ba4e1-155">ASP.NET 2.0 版之後並未變更的核心概念和主版頁面的功能。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-155">The core concepts and functionality of master pages has not changed since ASP.NET version 2.0.</span></span> <span data-ttu-id="ba4e1-156">不過，Visual Studio 2008 提供設計階段支援巢狀主版頁面，在 Visual Studio 2005 中缺乏的功能。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-156">However, Visual Studio 2008 offers design-time support for nested master pages, a feature that was lacking in Visual Studio 2005.</span></span> <span data-ttu-id="ba4e1-157">我們將探討在未來的教學課程中使用巢狀主版頁面。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-157">We will look at using nested master pages in a future tutorial.</span></span>


<span data-ttu-id="ba4e1-158">[圖 2] 顯示 www.asp.net 主版頁面的外觀。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-158">Figure 2 shows what the master page for www.asp.net might look like.</span></span> <span data-ttu-id="ba4e1-159">請注意，主版頁面定義常用的全網站的版面配置-頂端、 底端，和每個頁面的右邊標記-以及 ContentPlaceHolder 左方，每個個別的網頁的唯一內容所在的位置中。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-159">Note that the master page defines the common site-wide layout - the markup at the top, bottom, and right of every page - as well as a ContentPlaceHolder in the middle-left, where the unique content for each individual web page is located.</span></span>


![主版頁面定義的全站台的配置，以及可編輯區域內容的頁面依內容頁面為基礎](creating-a-site-wide-layout-using-master-pages-cs/_static/image4.png)

<span data-ttu-id="ba4e1-161">**圖 02**： 主版頁面定義的全站台的配置，以及可編輯區域內容的頁面依內容頁面為基礎</span><span class="sxs-lookup"><span data-stu-id="ba4e1-161">**Figure 02**: A Master Page Defines the Site-Wide Layout and the Regions Editable on a Content Page-by-Content Page Basis</span></span>


<span data-ttu-id="ba4e1-162">一旦已經定義了主版頁面可以繫結至新的 ASP.NET 頁面，透過核取方塊的刻度。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-162">Once a master page has been defined it can be bound to new ASP.NET pages through the tick of a checkbox.</span></span> <span data-ttu-id="ba4e1-163">-呼叫內容頁面-這些 ASP.NET 頁面包含每個主版頁面的 ContentPlaceHolder 控制項內容的控制項。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-163">These ASP.NET pages - called content pages - include a Content control for each of the master page's ContentPlaceHolder controls.</span></span> <span data-ttu-id="ba4e1-164">當透過瀏覽器瀏覽 [內容] 頁面時 ASP.NET 引擎會建立主版頁面的控制項階層架構，並將 [內容] 頁面的控制階層架構插入到適當的位置。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-164">When the content page is visited through a browser the ASP.NET engine creates the master page's control hierarchy and injects the content page's control hierarchy into the appropriate places.</span></span> <span data-ttu-id="ba4e1-165">轉譯此結合的控制階層架構，產生的 HTML 會傳回給使用者的瀏覽器。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-165">This combined control hierarchy is rendered and the resulting HTML is returned to the end user's browser.</span></span> <span data-ttu-id="ba4e1-166">因此，[內容] 頁面就會發出其 ContentPlaceHolder 控制項之外的主版頁面中定義的常見標記和其本身的內容控制項內定義的頁面特定標記。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-166">Consequently, the content page emits both the common markup defined in its master page outside of the ContentPlaceHolder controls and the page-specific markup defined within its own Content controls.</span></span> <span data-ttu-id="ba4e1-167">圖 3 闡明此概念。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-167">Figure 3 illustrates this concept.</span></span>


<span data-ttu-id="ba4e1-168">[![要求之網頁的標記被融合到主版頁面](creating-a-site-wide-layout-using-master-pages-cs/_static/image6.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="ba4e1-168">[![The Requested Page's Markup is Fused into the Master Page](creating-a-site-wide-layout-using-master-pages-cs/_static/image6.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image5.png)</span></span>

<span data-ttu-id="ba4e1-169">**圖 03**: 要求網頁的標記融合到主版頁面 ([按一下以檢視完整大小的影像](creating-a-site-wide-layout-using-master-pages-cs/_static/image7.png))</span><span class="sxs-lookup"><span data-stu-id="ba4e1-169">**Figure 03**: The Requested Page's Markup is Fused into the Master Page ([Click to view full-size image](creating-a-site-wide-layout-using-master-pages-cs/_static/image7.png))</span></span>


<span data-ttu-id="ba4e1-170">既然我們已經討論過主版頁面的運作方式，讓我們看看建立主版頁面與相關聯的內容頁面，使用 Visual Web Developer。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-170">Now that we have discussed how master pages work, let's take a look at creating a master page and associated content pages using Visual Web Developer.</span></span>

> [!NOTE]
> <span data-ttu-id="ba4e1-171">以達到最多可能觀眾，我們在此教學課程系列建置 ASP.NET 網站會建立與 Microsoft 的免費版本的 Visual Studio 2008 中，使用 ASP.NET 3.5 [Visual Web Developer 2008](https://www.microsoft.com/express/vwd/)。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-171">In order to reach the widest possible audience, the ASP.NET website we build throughout this tutorial series will be created using ASP.NET 3.5 with Microsoft's free version of Visual Studio 2008, [Visual Web Developer 2008](https://www.microsoft.com/express/vwd/).</span></span> <span data-ttu-id="ba4e1-172">如果您還沒有升級至 ASP.NET 3.5 中，別擔心-在這些教學課程工作中所討論的概念也能用於 ASP.NET 2.0 和 Visual Studio 2005。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-172">If you have not yet upgraded to ASP.NET 3.5, don't worry - the concepts discussed in these tutorials work equally well with ASP.NET 2.0 and Visual Studio 2005.</span></span> <span data-ttu-id="ba4e1-173">不過，有些示範應用程式可以使用新增至.NET Framework 3.5; 版的功能當使用 3.5 特有的功能時，包含附註，討論如何在 2.0 版中實作類似的功能。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-173">However, some demo applications may use features new to the .NET Framework version 3.5; when 3.5-specific features are used, I include a note that discusses how to implement similar functionality in version 2.0.</span></span> <span data-ttu-id="ba4e1-174">不要記住，可用的示範應用程式從每個教學課程的目標.NET Framework 3.5 版，會導致下載`Web.config`包括 3.5 專屬的組態項目和 3.5 特定命名空間中的參考的檔案`using` ASP.NET 頁面的程式碼後置類別中的陳述式。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-174">Do keep in mind that the demo applications available for download from each tutorial target the .NET Framework version 3.5, which results in a `Web.config` file that includes 3.5-specific configuration elements and references to 3.5-specific namespaces in the `using` statements in ASP.NET pages' code-behind classes.</span></span> <span data-ttu-id="ba4e1-175">未先移除 3.5 特定標記的來源，將無法運作長話短說，如果您有尚未則可下載的 web 應用程式的電腦上安裝.NET 3.5 `Web.config`。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-175">Long story short, if you have yet to install .NET 3.5 on your computer then the downloadable web application will not work without first removing the 3.5-specific markup from `Web.config`.</span></span> <span data-ttu-id="ba4e1-176">請參閱[剖析 ASP.NET 3.5 版的`Web.config`檔案](http://www.4guysfromrolla.com/articles/121207-1.aspx)如需本主題的詳細資訊。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-176">See [Dissecting ASP.NET Version 3.5's `Web.config` File](http://www.4guysfromrolla.com/articles/121207-1.aspx) for more information on this topic.</span></span> <span data-ttu-id="ba4e1-177">您也必須在移除`using`參考 3.5 特定命名空間的陳述式。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-177">You will also need to remove the `using` statements that reference 3.5-specific namespaces.</span></span>


## <a name="step-1-creating-a-master-page"></a><span data-ttu-id="ba4e1-178">步驟 1： 建立主版頁面</span><span class="sxs-lookup"><span data-stu-id="ba4e1-178">Step 1: Creating a Master Page</span></span>

<span data-ttu-id="ba4e1-179">我們可以建立和使用主要和內容頁面瀏覽之前，我們首先需要 ASP.NET 網站。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-179">Before we can explore creating and using master and content pages, we first need an ASP.NET website.</span></span> <span data-ttu-id="ba4e1-180">開始建立新檔案系統架構 ASP.NET 網站。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-180">Start by creating a new file system-based ASP.NET website.</span></span> <span data-ttu-id="ba4e1-181">若要達成此目的，啟動 Visual Web Developer 然後移至 [檔案] 功能表並選擇新的網站上，顯示新的網站] 對話方塊 （請參閱 [圖 4）。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-181">To accomplish this, launch Visual Web Developer and then go to the File menu and choose New Web Site, displaying the New Web Site dialog box (see Figure 4).</span></span> <span data-ttu-id="ba4e1-182">選擇 ASP.NET 網站範本、 到檔案系統設定 位置 下拉式清單、 選擇要放置 web 站台的資料夾和設定的語言為 C#。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-182">Choose the ASP.NET Web Site template, set the Location drop-down list to File System, choose a folder to place the web site, and set the language to C#.</span></span> <span data-ttu-id="ba4e1-183">這會建立新的網站與`Default.aspx`ASP.NET 網頁`App_Data`資料夾，和`Web.config`檔案。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-183">This will create a new web site with a `Default.aspx` ASP.NET page, an `App_Data` folder, and a `Web.config` file.</span></span>

> [!NOTE]
> <span data-ttu-id="ba4e1-184">Visual Studio 支援兩種專案管理模式： 網站專案和 Web 應用程式專案。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-184">Visual Studio supports two modes of project management: Web Site Projects and Web Application Projects.</span></span> <span data-ttu-id="ba4e1-185">網站專案沒有專案檔，而 Web 應用程式專案模擬專案架構在 Visual Studio.NET 2002年/2003年-它們包含在專案檔和專案的原始程式碼編譯成單一組件，位於`/bin`資料夾。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-185">Web Site Projects lack a project file, whereas Web Application Projects mimic the project architecture in Visual Studio .NET 2002/2003 - they include a project file and compile the project's source code into a single assembly, which is placed in the `/bin` folder.</span></span> <span data-ttu-id="ba4e1-186">Visual Studio 2005 一開始只支援的網站專案，雖然[Web 應用程式專案模型](https://msdn.microsoft.com/library/aa730880(vs.80).aspx)含 Service Pack 1; 已重新引入Visual Studio 2008 提供了這兩個專案模型。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-186">Visual Studio 2005 initially only supported Web Site Projects, although the [Web Application Project model](https://msdn.microsoft.com/library/aa730880(vs.80).aspx) was reintroduced with Service Pack 1; Visual Studio 2008 offers both project models.</span></span> <span data-ttu-id="ba4e1-187">Visual Web Developer 2005 和 2008年版本，不過，僅支援網站專案。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-187">The Visual Web Developer 2005 and 2008 editions, however, only support Web Site Projects.</span></span> <span data-ttu-id="ba4e1-188">我在本教學課程系列中，我示範使用網站專案模型。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-188">I use the Web Site Project model for my demos in this tutorial series.</span></span> <span data-ttu-id="ba4e1-189">如果您正在使用非 Express edition，而且想要改為使用 Web 應用程式專案模型，可以自由執行這項操作，但您看到您的畫面和與 instructio 與螢幕擷取畫面所示，您必須採取的步驟之間可能會有些不一致這些教學課程中所提供的 ns。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-189">If you are using a non-Express edition and want to use the Web Application Project model instead, feel free to do so but be aware that there may be some discrepancies between what you see on your screen and the steps you must take versus the screen shots shown and instructions provided in these tutorials.</span></span>


<span data-ttu-id="ba4e1-190">[![建立新檔案系統為基礎的網站](creating-a-site-wide-layout-using-master-pages-cs/_static/image9.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image8.png)</span><span class="sxs-lookup"><span data-stu-id="ba4e1-190">[![Create a New File System-Based Web Site](creating-a-site-wide-layout-using-master-pages-cs/_static/image9.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image8.png)</span></span>

<span data-ttu-id="ba4e1-191">**圖 04**： 建立 New File System-Based 網站 ([按一下以檢視完整大小的影像](creating-a-site-wide-layout-using-master-pages-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="ba4e1-191">**Figure 04**: Create a New File System-Based Web Site  ([Click to view full-size image](creating-a-site-wide-layout-using-master-pages-cs/_static/image10.png))</span></span>


<span data-ttu-id="ba4e1-192">接下來，加入主版頁面的根目錄中的站台的專案名稱上按一下滑鼠右鍵，選擇 加入新項目並選取主版頁面範本。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-192">Next, add a master page to the site in the root directory by right-clicking on the Project name, choosing Add New Item, and selecting the Master Page template.</span></span> <span data-ttu-id="ba4e1-193">請注意，主版頁面最後副檔名`.master`。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-193">Note that master pages end with the extension `.master`.</span></span> <span data-ttu-id="ba4e1-194">這個新的主版頁面命名為`Site.master`並按一下 [新增]。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-194">Name this new master page `Site.master` and click Add.</span></span>


<span data-ttu-id="ba4e1-195">[![加入主版頁面名稱為 Site.master 網站](creating-a-site-wide-layout-using-master-pages-cs/_static/image12.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="ba4e1-195">[![Add a Master Page Named Site.master to the Website](creating-a-site-wide-layout-using-master-pages-cs/_static/image12.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image11.png)</span></span>

<span data-ttu-id="ba4e1-196">**圖 05**： 加入主版頁面具名`Site.master`網站 ([按一下以檢視完整大小的影像](creating-a-site-wide-layout-using-master-pages-cs/_static/image13.png))</span><span class="sxs-lookup"><span data-stu-id="ba4e1-196">**Figure 05**: Add a Master Page Named `Site.master` to the Website ([Click to view full-size image](creating-a-site-wide-layout-using-master-pages-cs/_static/image13.png))</span></span>


<span data-ttu-id="ba4e1-197">加入新的主版頁面檔案透過 Visual Web Developer，則會使用下列的宣告式標記建立主版頁面：</span><span class="sxs-lookup"><span data-stu-id="ba4e1-197">Adding a new master page file through Visual Web Developer creates a master page with the following declarative markup:</span></span>

[!code-aspx[Main](creating-a-site-wide-layout-using-master-pages-cs/samples/sample1.aspx)]

<span data-ttu-id="ba4e1-198">宣告式標記中的第一行會[`@Master`指示詞](https://msdn.microsoft.com/library/ms228176.aspx)。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-198">The first line in the declarative markup is the [`@Master` directive](https://msdn.microsoft.com/library/ms228176.aspx).</span></span> <span data-ttu-id="ba4e1-199">`@Master`指示詞大致[`@Page`指示詞](https://msdn.microsoft.com/library/ydy4x04a.aspx)ASP.NET 網頁中顯示。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-199">The `@Master` directive is similar to the [`@Page` directive](https://msdn.microsoft.com/library/ydy4x04a.aspx) that appears in ASP.NET pages.</span></span> <span data-ttu-id="ba4e1-200">它會定義的伺服器端的語言 (C#) 和資訊的位置和主版頁面的程式碼後置類別的繼承。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-200">It defines the server-side language (C#) and information about the location and inheritance of the master page's code-behind class.</span></span>

<span data-ttu-id="ba4e1-201">`DOCTYPE`和頁面的宣告式標記下方`@Master`指示詞。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-201">The `DOCTYPE` and the page's declarative markup appears beneath the `@Master` directive.</span></span> <span data-ttu-id="ba4e1-202">此頁面包含四個伺服器端控制項以及靜態 HTML:</span><span class="sxs-lookup"><span data-stu-id="ba4e1-202">The page includes static HTML along with four server-side controls:</span></span>

- <span data-ttu-id="ba4e1-203">**Web Form ( `<form runat="server">`)** -因為所有的 ASP.NET 網頁通常有一個 Web 表單-，因為主版頁面可能包含的 Web 控制項，必須出現在 Web Form-務必要將 Web Form 加入至您的主版頁面 （而非 Web Form 加入電子除此之外，每個內容頁面）。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-203">**A Web Form (the `<form runat="server">`)** - because all ASP.NET pages typically have a Web Form - and because the master page may include Web controls that must appear within a Web Form - be sure to add the Web Form to your master page (rather than adding a Web Form to each content page).</span></span>
- <span data-ttu-id="ba4e1-204">**ContentPlaceHolder 控制項，名為`ContentPlaceHolder1`**  -這個 ContentPlaceHolder 控制項中的 Web 表單隨即出現，並做為 [內容] 頁面的使用者介面的區域。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-204">**A ContentPlaceHolder control named `ContentPlaceHolder1`** - this ContentPlaceHolder control appears within the Web Form and serves as the region for the content page's user interface.</span></span>
- <span data-ttu-id="ba4e1-205">**伺服器端`<head>`項目**-`<head>`項目具有`runat="server"`屬性，所以可透過伺服器端程式碼存取。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-205">**A server-side `<head>` element** - the `<head>` element has the `runat="server"` attribute, making it accessible through server-side code.</span></span> <span data-ttu-id="ba4e1-206">`<head>`項目實作這種方式，讓頁面的標題和其他`<head>`-相關的標記可能會新增，或以程式設計方式調整。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-206">The `<head>` element is implemented this way so that the page's title and other `<head>`-related markup may be added or adjusted programmatically.</span></span> <span data-ttu-id="ba4e1-207">例如，設定 ASP.NET 網頁`Title`屬性變更`<title>`所呈現的項目`<head>`伺服器控制項。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-207">For example, setting an ASP.NET page's `Title` property changes the `<title>` element rendered by the `<head>` server control.</span></span>
- <span data-ttu-id="ba4e1-208">**ContentPlaceHolder 控制項，名為`head`**  -ContentPlaceHolder 會出現這個控制項內`<head>`伺服器控制項，並可用來以宣告方式將內容加入至`<head>`項目。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-208">**A ContentPlaceHolder control named `head`** - this ContentPlaceHolder control appears within the `<head>` server control and can be used to declaratively add content to the `<head>` element.</span></span>

<span data-ttu-id="ba4e1-209">此預設主版頁面的宣告式標記做為起點來設計您自己的主版頁面。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-209">This default master page declarative markup serves as a starting point for designing your own master pages.</span></span> <span data-ttu-id="ba4e1-210">請隨意編輯 HTML 還是要新增額外的 Web 控制項或 ContentPlaceHolders 主版頁面。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-210">Feel free to edit the HTML or to add additional Web controls or ContentPlaceHolders to the master page.</span></span>

> [!NOTE]
> <span data-ttu-id="ba4e1-211">當設計主版頁面，確定主版頁面包含 Web 表單，並至少一個 ContentPlaceHolder 控制出現在此 Web Form 內。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-211">When designing a master page make sure that the master page contains a Web Form and that at least one ContentPlaceHolder control appears within this Web Form.</span></span>


### <a name="creating-a-simple-site-layout"></a><span data-ttu-id="ba4e1-212">建立簡單的站台版面配置</span><span class="sxs-lookup"><span data-stu-id="ba4e1-212">Creating a Simple Site Layout</span></span>

<span data-ttu-id="ba4e1-213">讓我們進一步探討`Site.master`的預設宣告式標記，以建立共用的所有頁面的其中一種網站配置： 常見的標頭; 左側的資料行，以瀏覽、 新聞與其他的全站台內容; 會顯示 「 提供的 Microsoft ASP.NET 」 圖示的頁尾。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-213">Let's expand `Site.master`'s default declarative markup to create a site layout where all pages share: a common header; a left column with navigation, news and other site-wide content; and a footer that displays the "Powered by Microsoft ASP.NET" icon.</span></span> <span data-ttu-id="ba4e1-214">圖 6 顯示主版頁面的最終結果，其內容頁面的其中一個透過瀏覽器檢視時。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-214">Figure 6 shows the end result of the master page when one of its content pages is viewed through a browser.</span></span> <span data-ttu-id="ba4e1-215">圖 6 中的紅色圈選的區域是所造訪的頁面所特有 (`Default.aspx`); 其他內容是所有的內容頁面的主版頁面中已定義且因此一致。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-215">The red circled region in Figure 6 is specific to the page being visited (`Default.aspx`); the other content is defined in the master page and therefore consistent across all content pages.</span></span>


<span data-ttu-id="ba4e1-216">[![主版頁面的上方、 左側和底部部分定義標記](creating-a-site-wide-layout-using-master-pages-cs/_static/image15.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image14.png)</span><span class="sxs-lookup"><span data-stu-id="ba4e1-216">[![The Master Page Defines the Markup for the Top, Left, and Bottom Portions](creating-a-site-wide-layout-using-master-pages-cs/_static/image15.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image14.png)</span></span>

<span data-ttu-id="ba4e1-217">**圖 06**： 主版頁面的上方、 左側和底部部分定義的標記 ([按一下以檢視完整大小的影像](creating-a-site-wide-layout-using-master-pages-cs/_static/image16.png))</span><span class="sxs-lookup"><span data-stu-id="ba4e1-217">**Figure 06**: The Master Page Defines the Markup for the Top, Left, and Bottom Portions ([Click to view full-size image](creating-a-site-wide-layout-using-master-pages-cs/_static/image16.png))</span></span>


<span data-ttu-id="ba4e1-218">若要達到的網站配置 [圖 6] 所示，先更新`Site.master`主版頁面，使其包含下列宣告式標記：</span><span class="sxs-lookup"><span data-stu-id="ba4e1-218">To achieve the site layout shown in Figure 6, start by updating the `Site.master` master page so that it contains the following declarative markup:</span></span>

[!code-aspx[Main](creating-a-site-wide-layout-using-master-pages-cs/samples/sample2.aspx)]

<span data-ttu-id="ba4e1-219">主版頁面的版面配置定義使用一系列的`<div>`HTML 項目。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-219">The master page's layout is defined using a series of `<div>` HTML elements.</span></span> <span data-ttu-id="ba4e1-220">`topContent` `<div>`包含出現在每個頁面頂端的標記時`mainContent`， `leftContent`，並`footerContent` `<div>` s 用來顯示頁面的內容、 左欄中和 「 電源已由 MicrosoftASP.NET"圖示，分別。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-220">The `topContent` `<div>` contains the markup that appears at the top of each page, while the `mainContent`, `leftContent`, and `footerContent` `<div>` s are used to display the page's content, the left column, and the "Powered by Microsoft ASP.NET" icon, respectively.</span></span> <span data-ttu-id="ba4e1-221">除了新增這些`<div>`項目，我也重新命名`ID`屬性中，將主要 ContentPlaceHolder 控制項`ContentPlaceHolder1`至`MainContent`。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-221">In addition to adding these `<div>` elements, I also renamed the `ID` property of the primary ContentPlaceHolder control from `ContentPlaceHolder1` to `MainContent`.</span></span>

<span data-ttu-id="ba4e1-222">格式與版面配置的規則，這些各種`<div>`中的項目拼寫[階層式樣式表 (CSS)](http://en.wikipedia.org/wiki/Cascading_Style_Sheets)檔案`Styles.css`，指定透過&lt;連結&gt;中的項目主版頁面&lt;head&gt;項目。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-222">The formatting and layout rules for these assorted `<div>` elements is spelled out in the [Cascading Stylesheet (CSS)](http://en.wikipedia.org/wiki/Cascading_Style_Sheets) file `Styles.css`, which is specified via a &lt;link&gt; element in the master page's &lt;head&gt; element.</span></span> <span data-ttu-id="ba4e1-223">這些各種規則會定義每個外觀`<div>`先前所述的項目。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-223">These various rules define the look and feel of each `<div>` element noted above.</span></span> <span data-ttu-id="ba4e1-224">例如， `topContent` `<div>`項目，顯示 「 主版頁面教學課程 」 的文字和連結，其具有格式規則中指定`Styles.css`，如下所示：</span><span class="sxs-lookup"><span data-stu-id="ba4e1-224">For example, the `topContent` `<div>` element, which displays the "Master Pages Tutorials" text and link, has its formatting rules specified in `Styles.css` as follows:</span></span>

[!code-css[Main](creating-a-site-wide-layout-using-master-pages-cs/samples/sample3.css)]

<span data-ttu-id="ba4e1-225">如果您要遵照，在您的電腦，您必須下載本教學課程隨附的程式碼並加入`Styles.css`檔案加入專案。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-225">If you are following along at your computer, you will need to download this tutorial's accompanying code and add the `Styles.css` file to your project.</span></span> <span data-ttu-id="ba4e1-226">同樣地，您也必須建立名為映像的資料夾，並將已下載的示範網站 」 提供技術的 Microsoft ASP.NET 」 圖示複製到您的專案。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-226">Similarly, you will also need to create a folder named Images and copy the "Powered by Microsoft ASP.NET" icon from the downloaded demo website to your project.</span></span>

> [!NOTE]
> <span data-ttu-id="ba4e1-227">CSS 和網頁格式的討論已超出本文的範圍。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-227">A discussion of CSS and web page formatting is beyond the scope of this article.</span></span> <span data-ttu-id="ba4e1-228">如需 CSS 的詳細資訊，請參閱[CSS 教學課程](http://www.w3schools.com/css/default.asp)在[W3Schools.com](http://www.w3schools.com/)。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-228">For more on CSS, check out the [CSS Tutorials](http://www.w3schools.com/css/default.asp) at [W3Schools.com](http://www.w3schools.com/).</span></span> <span data-ttu-id="ba4e1-229">我也建議您下載本教學課程隨附的程式碼、 使用中的 CSS 設定`Styles.css`以查看不同的格式化規則的影響。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-229">I also encourage you to download this tutorial's accompanying code and play with the CSS settings in `Styles.css` to see the effects of different formatting rules.</span></span>


### <a name="creating-a-master-page-using-an-existing-design-template"></a><span data-ttu-id="ba4e1-230">建立主版頁面使用現有的設計範本</span><span class="sxs-lookup"><span data-stu-id="ba4e1-230">Creating a Master Page Using an Existing Design Template</span></span>

<span data-ttu-id="ba4e1-231">多年來，我已建置小型-以中小型企業適用的 ASP.NET web 應用程式的數目。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-231">Over the years I've built a number of ASP.NET web applications for small- to medium-sized companies.</span></span> <span data-ttu-id="ba4e1-232">我的用戶端的一些有他們想要使用現有的站台版面配置其他人雇用裁判的圖形設計工具。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-232">Some of my clients had an existing site layout they wanted to use; others hired a competent graphics designer.</span></span> <span data-ttu-id="ba4e1-233">少數信賴我設計網站配置。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-233">A few entrusted me to design the website layout.</span></span> <span data-ttu-id="ba4e1-234">如您所見 圖 6 所，工作的程式設計師來設計網站的版面配置是通常為具有執行 open-heart surgery 而醫生 daně 您會計為智。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-234">As you can tell by Figure 6, tasking a programmer to design a website's layout is usually as wise as having your accountant perform open-heart surgery while your doctor does your taxes.</span></span>

<span data-ttu-id="ba4e1-235">幸運的是，有提供免費的 HTML 設計範本的 innumerous 網站-Google 傳回超過 6 百萬個結果的搜尋字詞 「 免費網站範本 」。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-235">Fortunately, there are innumerous websites that offer free HTML design templates - Google returned more than six million results for the search term "free website templates."</span></span> <span data-ttu-id="ba4e1-236">其中一個我最愛的項目是[OpenDesigns.org](http://opendesigns.org/)。一旦您找到您要的網站範本，將 CSS 檔案和映像新增至您的網站專案，並整合您的主版頁面範本的 HTML。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-236">One of my favorite ones is [OpenDesigns.org](http://opendesigns.org/). Once you find a website template you like, add the CSS files and images to your website project and integrate the template's HTML into your master page.</span></span>

> [!NOTE]
> <span data-ttu-id="ba4e1-237">Microsoft 還另外提供一些[免費 ASP.NET 設計入門套件範本](https://msdn.microsoft.com/asp.net/aa336613.aspx)，整合到 Visual Studio 中的 [新的網站] 對話方塊。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-237">Microsoft also offers a number of [free ASP.NET Design Start Kit Templates](https://msdn.microsoft.com/asp.net/aa336613.aspx) that integrate into the New Web Site dialog box in Visual Studio.</span></span>


## <a name="step-2-creating-associated-content-pages"></a><span data-ttu-id="ba4e1-238">步驟 2： 建立相關聯的內容頁面</span><span class="sxs-lookup"><span data-stu-id="ba4e1-238">Step 2: Creating Associated Content Pages</span></span>

<span data-ttu-id="ba4e1-239">建立主版頁面時，我們已準備好開始建立繫結至主版頁面的 ASP.NET 網頁項目。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-239">With the master page created, we are ready to start creating ASP.NET pages that are bound to the master page.</span></span> <span data-ttu-id="ba4e1-240">這類頁面指*內容頁*。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-240">Such pages are referred to as *content pages*.</span></span>

<span data-ttu-id="ba4e1-241">讓我們將新的 ASP.NET 網頁新增至專案，並將它繫結`Site.master`主版頁面。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-241">Let's add a new ASP.NET page to the project and bind it to the `Site.master` master page.</span></span> <span data-ttu-id="ba4e1-242">在 [方案總管] 中的專案名稱上按一下滑鼠右鍵，然後選擇 [加入新項目] 選項。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-242">Right-click on the project name in Solution Explorer and choose the Add New Item option.</span></span> <span data-ttu-id="ba4e1-243">選取的 Web 表單範本中，輸入名稱`About.aspx`，然後核取 選取主版頁面 核取方塊，如 圖 7 所示。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-243">Select the Web Form template, enter the name `About.aspx`, and then check the "Select master page" checkbox as shown in Figure 7.</span></span> <span data-ttu-id="ba4e1-244">這樣會顯示 選取主版頁面對話方塊方塊中您可以在此選擇要使用的主版頁面的 （請參閱 圖 8）。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-244">Doing so will display the Select a Master Page dialog box (see Figure 8) from where you can choose the master page to use.</span></span>

> [!NOTE]
> <span data-ttu-id="ba4e1-245">如果您使用 Web 應用程式專案模型，而不網站專案模型的 ASP.NET 網站建立您不會看到 [圖 7] 所示的 [加入新項目] 對話方塊中的 [選取主版頁面] 核取方塊。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-245">If you created your ASP.NET website using the Web Application Project model instead of the Web Site Project model you will not see the "Select master page" checkbox in the Add New Item dialog box shown in Figure 7.</span></span> <span data-ttu-id="ba4e1-246">若要建立為內容頁面，使用 Web 應用程式專案模型時必須選擇 Web 內容表單範本，而不是 Web 表單範本。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-246">To create a content page when using the Web Application Project model you must choose the Web Content Form template instead of the Web Form template.</span></span> <span data-ttu-id="ba4e1-247">選取 Web 內容表單範本，然後按一下 [新增] 之後, 相同選取主版頁面 [圖 8] 所示的對話方塊隨即出現。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-247">After selecting the Web Content Form template and clicking Add, the same Select a Master Page dialog box shown in Figure 8 will appear.</span></span>


<span data-ttu-id="ba4e1-248">[![加入新的內容頁面](creating-a-site-wide-layout-using-master-pages-cs/_static/image18.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="ba4e1-248">[![Add a New Content Page](creating-a-site-wide-layout-using-master-pages-cs/_static/image18.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image17.png)</span></span>

<span data-ttu-id="ba4e1-249">**圖 07**： 加入新的內容頁面 ([按一下以檢視完整大小的影像](creating-a-site-wide-layout-using-master-pages-cs/_static/image19.png))</span><span class="sxs-lookup"><span data-stu-id="ba4e1-249">**Figure 07**: Add a New Content Page ([Click to view full-size image](creating-a-site-wide-layout-using-master-pages-cs/_static/image19.png))</span></span>


<span data-ttu-id="ba4e1-250">[![選取 Site.master 主版頁面](creating-a-site-wide-layout-using-master-pages-cs/_static/image21.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image20.png)</span><span class="sxs-lookup"><span data-stu-id="ba4e1-250">[![Select the Site.master Master Page](creating-a-site-wide-layout-using-master-pages-cs/_static/image21.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image20.png)</span></span>

<span data-ttu-id="ba4e1-251">**圖 08**： 選取 `Site.master`主版頁面 ([按一下以檢視完整大小的影像](creating-a-site-wide-layout-using-master-pages-cs/_static/image22.png))</span><span class="sxs-lookup"><span data-stu-id="ba4e1-251">**Figure 08**: Select the `Site.master` Master Page ([Click to view full-size image](creating-a-site-wide-layout-using-master-pages-cs/_static/image22.png))</span></span>


<span data-ttu-id="ba4e1-252">如下列宣告式標記所示，新增的 [內容] 頁面包含`@Page`，會指回其主版頁面和內容的控制項的主版頁面 ContentPlaceHolder 控制項的每個指示詞。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-252">As the following declarative markup shows, a new content page contains a `@Page` directive that points back to its master page and a Content control for each of the master page's ContentPlaceHolder controls.</span></span>

[!code-aspx[Main](creating-a-site-wide-layout-using-master-pages-cs/samples/sample4.aspx)]

> [!NOTE]
> <span data-ttu-id="ba4e1-253">在步驟 1 的 「 建立簡單的網站配置 」 一節我重新命名`ContentPlaceHolder1`至`MainContent`。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-253">In the "Creating a Simple Site Layout" section in Step 1 I renamed `ContentPlaceHolder1` to `MainContent`.</span></span> <span data-ttu-id="ba4e1-254">如果您未重新命名此 ContentPlaceHolder 控制項的`ID`同樣地，在內容頁面的宣告式標記會稍有不同的標記，如上所示。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-254">If you did not rename this ContentPlaceHolder control's `ID` in the same way, your content page's declarative markup will differ slightly from the markup shown above.</span></span> <span data-ttu-id="ba4e1-255">也就是第二個內容控制項之`ContentPlaceHolderID`會反映`ID`的相對應的 ContentPlaceHolder 控制您的主版頁面中。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-255">Namely, the second Content control's `ContentPlaceHolderID` will reflect the `ID` of the corresponding ContentPlaceHolder control in your master page.</span></span>


<span data-ttu-id="ba4e1-256">當轉譯內容頁面、 ASP.NET 引擎必須 fuse 網頁的內容具有其主版頁面 ContentPlaceHolder 控制項的控制項。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-256">When rendering a content page, the ASP.NET engine must fuse the page's Content controls with its master page's ContentPlaceHolder controls.</span></span> <span data-ttu-id="ba4e1-257">ASP.NET 引擎會決定從的 [內容] 頁面的主版頁面`@Page`指示詞的`MasterPageFile`屬性。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-257">The ASP.NET engine determines the content page's master page from the `@Page` directive's `MasterPageFile` attribute.</span></span> <span data-ttu-id="ba4e1-258">如上述的標記所示，此內容的頁面繫結至`~/Site.master`。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-258">As the above markup shows, this content page is bound to `~/Site.master`.</span></span>

<span data-ttu-id="ba4e1-259">因為主版頁面有兩個 ContentPlaceHolder 控制項-`head`和`MainContent`-Visual Web Developer 會產生兩個內容控制項。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-259">Because the master page has two ContentPlaceHolder controls - `head` and `MainContent` - Visual Web Developer generated two Content controls.</span></span> <span data-ttu-id="ba4e1-260">每個內容控制項參考特定的 ContentPlaceHolder 透過其`ContentPlaceHolderID`屬性。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-260">Each Content control references a particular ContentPlaceHolder via its `ContentPlaceHolderID` property.</span></span>

<span data-ttu-id="ba4e1-261">透過先前的全網站範本技術佔有主版頁面的位置是設計階段支援。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-261">Where master pages shine over previous site-wide template techniques is with their design-time support.</span></span> <span data-ttu-id="ba4e1-262">圖 9 顯示`About.aspx`檢視透過 Visual Web Developer 的 設計 檢視時的內容頁面。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-262">Figure 9 shows the `About.aspx` content page when viewed through Visual Web Developer's Design view.</span></span> <span data-ttu-id="ba4e1-263">請注意，雖然主版頁面內容會顯示，它會呈現灰色且無法修改。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-263">Note that while the master page content is visible, it is grayed out and cannot be modified.</span></span> <span data-ttu-id="ba4e1-264">內容控制項對應至主版頁面的 ContentPlaceHolders 是，不過，可以讓您編輯。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-264">The Content controls corresponding to the master page's ContentPlaceHolders are, however, editable.</span></span> <span data-ttu-id="ba4e1-265">就像使用其他任何 ASP.NET 頁面上，您可以建立內容頁面的介面新增到 [來源] 或 [設計] 檢視的 Web 控制項。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-265">And just like with any other ASP.NET page, you can create the content page's interface by adding Web controls through the Source or Design views.</span></span>


<span data-ttu-id="ba4e1-266">[![[內容] 頁面的 [設計] 檢視會顯示這兩個指定頁面和主版頁面內容](creating-a-site-wide-layout-using-master-pages-cs/_static/image24.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="ba4e1-266">[![The Content Page's Design View Displays Both the Page-Specific and Master Page Contents](creating-a-site-wide-layout-using-master-pages-cs/_static/image24.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image23.png)</span></span>

<span data-ttu-id="ba4e1-267">**圖 09**: 內容頁面的設計檢視會顯示兩個頁面特定和主版頁面內容 ([按一下以檢視完整大小的影像](creating-a-site-wide-layout-using-master-pages-cs/_static/image25.png))</span><span class="sxs-lookup"><span data-stu-id="ba4e1-267">**Figure 09**: The Content Page's Design View Displays Both the Page-Specific and Master Page Contents ([Click to view full-size image](creating-a-site-wide-layout-using-master-pages-cs/_static/image25.png))</span></span>


### <a name="adding-markup-and-web-controls-to-the-content-page"></a><span data-ttu-id="ba4e1-268">[內容] 頁面中加入標記和 Web 控制項</span><span class="sxs-lookup"><span data-stu-id="ba4e1-268">Adding Markup and Web Controls to the Content Page</span></span>

<span data-ttu-id="ba4e1-269">請花一點時間建立的某些內容`About.aspx`頁面。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-269">Take a moment to create some content for the `About.aspx` page.</span></span> <span data-ttu-id="ba4e1-270">如您所見 圖 10 中，我可以輸入"有關 Author"標題和幾個段落的文字，但也新增 Web 控制項的組合。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-270">As you can see in Figure 10, I entered an "About the Author" heading and a couple of paragraphs of text, but feel free to add Web controls, too.</span></span> <span data-ttu-id="ba4e1-271">建立此介面之後, 請瀏覽`About.aspx`透過瀏覽器的頁面。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-271">After creating this interface, visit the `About.aspx` page through a browser.</span></span>


<span data-ttu-id="ba4e1-272">[![請瀏覽透過瀏覽器的 [about.aspx 的網頁] 頁面](creating-a-site-wide-layout-using-master-pages-cs/_static/image27.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image26.png)</span><span class="sxs-lookup"><span data-stu-id="ba4e1-272">[![Visit the About.aspx Page Through a Browser](creating-a-site-wide-layout-using-master-pages-cs/_static/image27.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image26.png)</span></span>

<span data-ttu-id="ba4e1-273">**圖 10**： 瀏覽`About.aspx`頁面上透過瀏覽器 ([按一下以檢視完整大小的影像](creating-a-site-wide-layout-using-master-pages-cs/_static/image28.png))</span><span class="sxs-lookup"><span data-stu-id="ba4e1-273">**Figure 10**: Visit the `About.aspx` Page Through a Browser ([Click to view full-size image](creating-a-site-wide-layout-using-master-pages-cs/_static/image28.png))</span></span>


<span data-ttu-id="ba4e1-274">請務必了解要求的內容頁面和其相關聯的主版頁面是融合完全在 web 伺服器上的整體轉譯。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-274">It is important to understand that the requested content page and its associated master page are fused and rendered as a whole entirely on the web server.</span></span> <span data-ttu-id="ba4e1-275">使用者的瀏覽器便會產生、 積 HTML。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-275">The end user's browser is then sent the resulting, fused HTML.</span></span> <span data-ttu-id="ba4e1-276">若要確認這點，檢視瀏覽器移至 [檢視] 功能表並選擇來源收到的 HTML。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-276">To verify this, view the HTML received by the browser by going to the View menu and choosing Source.</span></span> <span data-ttu-id="ba4e1-277">請注意，有沒有框架或其他任何特製化的技術，用於在單一視窗中顯示兩個不同的網頁。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-277">Note that there are no frames or any other specialized techniques for displaying two different web pages in a single window.</span></span>

### <a name="binding-a-master-page-to-an-existing-aspnet-page"></a><span data-ttu-id="ba4e1-278">繫結至現有的 ASP.NET 網頁的主版頁面</span><span class="sxs-lookup"><span data-stu-id="ba4e1-278">Binding a Master Page to an Existing ASP.NET Page</span></span>

<span data-ttu-id="ba4e1-279">如我們在此步驟中所見的將新的內容頁面加入至 ASP.NET web 應用程式是簡單，只要選取 [選取主版頁面] 核取方塊，然後挑選主版頁面。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-279">As we saw in this step, adding a new content page to an ASP.NET web application is as easy as checking the "Select master page" checkbox and picking the master page.</span></span> <span data-ttu-id="ba4e1-280">不幸的是，將現有的 ASP.NET 頁面轉換至主版頁面也不簡單。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-280">Unfortunately, converting an existing ASP.NET page to a master page is not as easy.</span></span>

<span data-ttu-id="ba4e1-281">若要繫結至現有的 ASP.NET 網頁的主版頁面中，您需要執行下列步驟：</span><span class="sxs-lookup"><span data-stu-id="ba4e1-281">To bind a master page to an existing ASP.NET page you need to perform the following steps:</span></span>

1. <span data-ttu-id="ba4e1-282">新增`MasterPageFile`屬性設定為 ASP.NET 網頁的`@Page`指示詞，它指向適當的主版頁面。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-282">Add the `MasterPageFile` attribute to the ASP.NET page's `@Page` directive, pointing it to the appropriate master page.</span></span>
2. <span data-ttu-id="ba4e1-283">針對每個 ContentPlaceHolders 主版頁面中，將內容控制項。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-283">Add Content controls for each of the ContentPlaceHolders in the master page.</span></span>
3. <span data-ttu-id="ba4e1-284">選擇性地剪下並將現有的 ASP.NET 網頁的內容貼到適當的內容控制項。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-284">Selectively cut and paste the ASP.NET page's existing content into the appropriate Content controls.</span></span> <span data-ttu-id="ba4e1-285">我說 「 選擇性 」 這裡因為 ASP.NET 頁面可能包含已由主版頁面中，例如表示標記`DOCTYPE`，則`<html>`項目，並在 Web Form。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-285">I say "selectively" here because the ASP.NET page likely contains markup that's already expressed by the master page, such as the `DOCTYPE`, the `<html>` element, and the Web Form.</span></span>

<span data-ttu-id="ba4e1-286">如需此程序，以及螢幕擷取畫面的逐步指示，請參閱[Scott Guthrie](https://weblogs.asp.net/scottgu/)的[使用主版頁面與網站導覽](http://webproject.scottgu.com/CSharp/MasterPages/MasterPages.aspx)教學課程。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-286">For step-by-step instructions on this process along with screen shots, check out [Scott Guthrie](https://weblogs.asp.net/scottgu/)'s [Using Master Pages and Site Navigation](http://webproject.scottgu.com/CSharp/MasterPages/MasterPages.aspx) tutorial.</span></span> <span data-ttu-id="ba4e1-287">「 更新`Default.aspx`和`DataSample.aspx`使用主版頁面 」 一節詳細說明這些步驟。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-287">The "Update `Default.aspx` and `DataSample.aspx` to use the Master Page" section details these steps.</span></span>

<span data-ttu-id="ba4e1-288">因為它是建立新的內容頁面，將現有的 ASP.NET 頁面轉換成內容的頁面比更為容易，我建議當您建立新的 ASP.NET 網站會將主版頁面新增至站台。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-288">Because it is much easier to create new content pages than it is to convert existing ASP.NET pages into content pages, I recommend that whenever you create a new ASP.NET website add a master page to the site.</span></span> <span data-ttu-id="ba4e1-289">將所有新的 ASP.NET 網頁的繫結至這個主版頁面。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-289">Bind all new ASP.NET pages to this master page.</span></span> <span data-ttu-id="ba4e1-290">別擔心，如果初始的主版頁面很簡單或純文字;您可以稍後再更新主版頁面。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-290">Don't worry if the initial master page is very simple or plain; you can update the master page later.</span></span>

> [!NOTE]
> <span data-ttu-id="ba4e1-291">在建立新的 ASP.NET 應用程式時，Visual Web Developer 將`Default.aspx`沒有繫結至主版頁面的頁面。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-291">When creating a new ASP.NET application, Visual Web Developer adds a `Default.aspx` page that isn't bound to a master page.</span></span> <span data-ttu-id="ba4e1-292">如果您想要轉換現有的 ASP.NET 頁面變成內容頁面的作法，就這樣做與`Default.aspx`。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-292">If you want to practice converting an existing ASP.NET page into a content page, go ahead and do so with `Default.aspx`.</span></span> <span data-ttu-id="ba4e1-293">或者，您可以刪除`Default.aspx`並重新加入它，但是這次的 [選取主版頁面] 核取方塊。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-293">Alternatively, you can delete `Default.aspx` and then re-add it, but this time checking the "Select master page" checkbox.</span></span>


## <a name="step-3-updating-the-master-pages-markup"></a><span data-ttu-id="ba4e1-294">步驟 3： 更新主版頁面的標記</span><span class="sxs-lookup"><span data-stu-id="ba4e1-294">Step 3: Updating the Master Page's Markup</span></span>

<span data-ttu-id="ba4e1-295">主版頁面的主要好處之一是單一的主版頁面，可用來在網站上定義多個頁面的整體配置。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-295">One of the primary benefits of master pages is that a single master page may be used to define the overall layout for numerous pages on the site.</span></span> <span data-ttu-id="ba4e1-296">因此，更新站台的外觀及操作，需要更新單一檔案-主版頁面。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-296">Therefore, updating the site's look and feel requires updating a single file - the master page.</span></span>

<span data-ttu-id="ba4e1-297">為了說明這種行為，讓我們更新我們的主版頁面包含目前的日期左邊的資料行的頂端。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-297">To illustrate this behavior, let's update our master page to include the current date in at the top of the left column.</span></span> <span data-ttu-id="ba4e1-298">新增名為標籤`DateDisplay`要`leftContent` `<div>`。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-298">Add a Label named `DateDisplay` to the `leftContent` `<div>`.</span></span>

[!code-aspx[Main](creating-a-site-wide-layout-using-master-pages-cs/samples/sample5.aspx)]

<span data-ttu-id="ba4e1-299">接下來，建立`Page_Load`事件處理常式的主要頁面，然後新增下列程式碼：</span><span class="sxs-lookup"><span data-stu-id="ba4e1-299">Next, create a `Page_Load` event handler for the master page and add the following code:</span></span>

[!code-csharp[Main](creating-a-site-wide-layout-using-master-pages-cs/samples/sample6.cs)]

<span data-ttu-id="ba4e1-300">上述程式碼中設定的標籤`Text`屬性目前的日期和時間格式化為一週的星期幾、 月和兩位數天數的名稱 （請參閱 圖 11）。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-300">The above code sets the Label's `Text` property to the current date and time formatted as the day of the week, the name of the month, and the two-digit day (see Figure 11).</span></span> <span data-ttu-id="ba4e1-301">透過這項變更，重新審視您的內容頁面。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-301">With this change, revisit one of your content pages.</span></span> <span data-ttu-id="ba4e1-302">如 [圖 11] 所示，產生的標記會立即更新以包含主版頁面的變更。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-302">As Figure 11 shows, the resulting markup is immediately updated to include the change to the master page.</span></span>


<span data-ttu-id="ba4e1-303">[![主版頁面中所做的變更會反映當檢視內容頁面](creating-a-site-wide-layout-using-master-pages-cs/_static/image30.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="ba4e1-303">[![The Changes to the Master Page are Reflected When Viewing the a Content Page](creating-a-site-wide-layout-using-master-pages-cs/_static/image30.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image29.png)</span></span>

<span data-ttu-id="ba4e1-304">**圖 11**： 主版頁面的變更會反映當檢視內容頁面 ([按一下以檢視完整大小的影像](creating-a-site-wide-layout-using-master-pages-cs/_static/image31.png))</span><span class="sxs-lookup"><span data-stu-id="ba4e1-304">**Figure 11**: The Changes to the Master Page are Reflected When Viewing the a Content Page ([Click to view full-size image](creating-a-site-wide-layout-using-master-pages-cs/_static/image31.png))</span></span>


> [!NOTE]
> <span data-ttu-id="ba4e1-305">此範例所示，伺服器端 Web 控制項、 程式碼，以及事件處理常式，就可能會包含主版頁面。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-305">As this example illustrates, master pages may contain server-side Web controls, code, and event handlers.</span></span>


## <a name="summary"></a><span data-ttu-id="ba4e1-306">總結</span><span class="sxs-lookup"><span data-stu-id="ba4e1-306">Summary</span></span>

<span data-ttu-id="ba4e1-307">主版頁面讓 ASP.NET 開發人員設計一致的全網站的版面配置，可輕鬆地更新。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-307">Master pages enable ASP.NET developers to design a consistent site-wide layout that is easily updateable.</span></span> <span data-ttu-id="ba4e1-308">Visual Web Developer 提供豐富的設計階段支援，則建立主版頁面和其相關聯的內容頁面很簡單，與建立標準的 ASP.NET 頁面。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-308">Creating master pages and their associated content pages is as simple as creating standard ASP.NET pages, as Visual Web Developer offers rich design-time support.</span></span>

<span data-ttu-id="ba4e1-309">我們在本教學課程中建立主版頁面範例有兩個 ContentPlaceHolder 控制項`head`和`MainContent`。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-309">The master page example we created in this tutorial had two ContentPlaceHolder controls, `head` and `MainContent`.</span></span> <span data-ttu-id="ba4e1-310">僅指定標記`MainContent`ContentPlaceHolder 控制在我們的內容頁面中，不過。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-310">We only specified markup for the `MainContent` ContentPlaceHolder control in our content page, however.</span></span> <span data-ttu-id="ba4e1-311">在下一個教學課程中我們探討使用多個內容控制項，在 [內容] 頁面中的。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-311">In the next tutorial we look at using multiple Content controls in the content page.</span></span> <span data-ttu-id="ba4e1-312">我們也會看到如何定義預設內容的標記控制內的主版頁面，以及如何切換使用預設標記中定義主要頁面，並提供自訂的標記，從 [內容] 頁面。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-312">We also see how to define default markup for Content controls within the master page, as well as how to toggle between using the default markup defined in the master page and providing custom markup from the content page.</span></span>

<span data-ttu-id="ba4e1-313">快樂地寫程式 ！</span><span class="sxs-lookup"><span data-stu-id="ba4e1-313">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="ba4e1-314">進一步閱讀</span><span class="sxs-lookup"><span data-stu-id="ba4e1-314">Further Reading</span></span>

<span data-ttu-id="ba4e1-315">如需有關在本教學課程所討論的主題的詳細資訊，請參閱下列資源：</span><span class="sxs-lookup"><span data-stu-id="ba4e1-315">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="ba4e1-316">ASP.NET 設計工具： 免費建置 ASP.NET 網站使用 Web 標準的設計範本和指引</span><span class="sxs-lookup"><span data-stu-id="ba4e1-316">ASP.NET for Designers: Free Design Templates and Guidance on Building ASP.NET Websites Using Web Standards</span></span>](https://msdn.microsoft.com/asp.net/aa336602.aspx)
- [<span data-ttu-id="ba4e1-317">ASP.NET 主版頁面概觀</span><span class="sxs-lookup"><span data-stu-id="ba4e1-317">ASP.NET Master Pages Overview</span></span>](https://msdn.microsoft.com/library/wtxbf3hh.aspx)
- [<span data-ttu-id="ba4e1-318">階層式樣式表 (CSS) 教學課程</span><span class="sxs-lookup"><span data-stu-id="ba4e1-318">Cascading Stylesheets (CSS) Tutorials</span></span>](http://www.w3schools.com/css/default.asp)
- [<span data-ttu-id="ba4e1-319">動態設定頁面的標題</span><span class="sxs-lookup"><span data-stu-id="ba4e1-319">Dynamically Setting the Page's Title</span></span>](http://aspnet.4guysfromrolla.com/articles/051006-1.aspx)
- [<span data-ttu-id="ba4e1-320">在 ASP.NET 中的主版頁面</span><span class="sxs-lookup"><span data-stu-id="ba4e1-320">Master Pages in ASP.NET</span></span>](http://www.odetocode.com/articles/419.aspx)
- [<span data-ttu-id="ba4e1-321">主版頁面的快速入門教學課程</span><span class="sxs-lookup"><span data-stu-id="ba4e1-321">Master Pages QuickStart Tutorials</span></span>](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/masterpages/default.aspx)

### <a name="about-the-author"></a><span data-ttu-id="ba4e1-322">關於作者</span><span class="sxs-lookup"><span data-stu-id="ba4e1-322">About the Author</span></span>

<span data-ttu-id="ba4e1-323">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml)，作者的多個 ASP 本書籍，他是 4GuysFromRolla.com 的創辦人，一直從事 Microsoft Web 技術自 1998 年。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-323">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of multiple ASP/ASP.NET books and founder of 4GuysFromRolla.com, has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="ba4e1-324">Scott 會擔任獨立的顧問、 培訓講師和作家。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-324">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="ba4e1-325">他最新的著作是[ *Sams 教導您自己 ASP.NET 3.5 24 小時內*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-325">His latest book is [*Sams Teach Yourself ASP.NET 3.5 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="ba4e1-326">Scott 要聯絡[ mitchell@4GuysFromRolla.com ](mailto:mitchell@4GuysFromRolla.com)或透過他的部落格[ http://ScottOnWriting.NET ](http://scottonwriting.net/)。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-326">Scott can be reached at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com) or via his blog at [http://ScottOnWriting.NET](http://scottonwriting.net/).</span></span>

### <a name="special-thanks-to"></a><span data-ttu-id="ba4e1-327">特別感謝</span><span class="sxs-lookup"><span data-stu-id="ba4e1-327">Special Thanks To</span></span>

<span data-ttu-id="ba4e1-328">有興趣檢閱我即將推出的 MSDN 文章嗎？</span><span class="sxs-lookup"><span data-stu-id="ba4e1-328">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="ba4e1-329">如果是這樣，psychic 在[ mitchell@4GuysFromRolla.com ](mailto:mitchell@4GuysFromRolla.com)。</span><span class="sxs-lookup"><span data-stu-id="ba4e1-329">If so, drop me a line at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com).</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="ba4e1-330">下一步</span><span class="sxs-lookup"><span data-stu-id="ba4e1-330">Next</span></span>](multiple-contentplaceholders-and-default-content-cs.md)
