---
uid: web-forms/overview/data-access/filtering-scenarios-with-the-datalist-and-repeater/master-detail-filtering-acess-two-pages-datalist-cs
title: "篩選跨兩個頁面 (C#) 的主要/詳細資料 |Microsoft 文件"
author: rick-anderson
description: "在本教學課程，我們看看如何跨兩個的頁面分隔主要/詳細資料報表。 在 'master' 的頁面中，我們會使用中繼器控制項來呈現一份 categ..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 10/30/2010
ms.topic: article
ms.assetid: 68b8c023-92fa-4df6-9563-1764e16e4b04
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/data-access/filtering-scenarios-with-the-datalist-and-repeater/master-detail-filtering-acess-two-pages-datalist-cs
msc.type: authoredcontent
ms.openlocfilehash: bb86db509ca26dde0c24341dee402e7af4355507
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 11/10/2017
---
<a name="masterdetail-filtering-across-two-pages-c"></a><span data-ttu-id="a05d9-104">主從式篩選跨兩個頁面 (C#)</span><span class="sxs-lookup"><span data-stu-id="a05d9-104">Master/Detail Filtering Across Two Pages (C#)</span></span>
====================
<span data-ttu-id="a05d9-105">由[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="a05d9-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="a05d9-106">[下載範例應用程式](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_34_CS.exe)或[下載 PDF](master-detail-filtering-acess-two-pages-datalist-cs/_static/datatutorial34cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="a05d9-106">[Download Sample App](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_34_CS.exe) or [Download PDF](master-detail-filtering-acess-two-pages-datalist-cs/_static/datatutorial34cs1.pdf)</span></span>

> <span data-ttu-id="a05d9-107">在本教學課程，我們看看如何跨兩個的頁面分隔主要/詳細資料報表。</span><span class="sxs-lookup"><span data-stu-id="a05d9-107">In this tutorial we look at how to separate a master/detail report across two pages.</span></span> <span data-ttu-id="a05d9-108">在 「 主要 」 頁面中，我們會使用中繼器控制項呈現類別目錄的清單，按下時，會將使用者導向至 [詳細資料] 頁面其中兩欄資料清單會顯示屬於所選類別目錄的產品。</span><span class="sxs-lookup"><span data-stu-id="a05d9-108">In the "master" page we use a Repeater control to render a list of categories that, when clicked, will take the user to the "details" page where a two-column DataList shows those products belonging to the selected category.</span></span>


## <a name="introduction"></a><span data-ttu-id="a05d9-109">簡介</span><span class="sxs-lookup"><span data-stu-id="a05d9-109">Introduction</span></span>

<span data-ttu-id="a05d9-110">在[前述教學課程](master-detail-filtering-with-a-dropdownlist-datalist-cs.md)我們可了解如何在使用 DropDownLists 顯示 「 主要 」 記錄，並且以顯示 [詳細資料]。 系統的單一 web 網頁中顯示主要/詳細資料報表</span><span class="sxs-lookup"><span data-stu-id="a05d9-110">In the [preceding tutorial](master-detail-filtering-with-a-dropdownlist-datalist-cs.md) we saw how to display master/detail reports in a single web page using DropDownLists to display the "master" records and a DataList to display the "details."</span></span> <span data-ttu-id="a05d9-111">另一個常見的模式，用於主要/詳細資料報表是具有一個 web 網頁上的主要記錄和在另一台詳細資料。</span><span class="sxs-lookup"><span data-stu-id="a05d9-111">Another common pattern used for master/detail reports is to have the master records on one web page and the details on another.</span></span> <span data-ttu-id="a05d9-112">在先前[主要/詳細資料篩選跨兩個頁面](../masterdetail/master-detail-filtering-across-two-pages-cs.md)教學課程中，我們會檢查此系統中顯示所有供應商使用的 GridView 的模式。</span><span class="sxs-lookup"><span data-stu-id="a05d9-112">In the earlier [Master/Detail Filtering Across Two Pages](../masterdetail/master-detail-filtering-across-two-pages-cs.md) tutorial, we examined this pattern using a GridView to display all of the suppliers in the system.</span></span> <span data-ttu-id="a05d9-113">此 GridView 包含 HyperLinkField，呈現為第二個頁面上，傳遞至連結`SupplierID`於 querystring 中。</span><span class="sxs-lookup"><span data-stu-id="a05d9-113">This GridView included a HyperLinkField, which rendered as a link to a second page, passing along the `SupplierID` in the querystring.</span></span> <span data-ttu-id="a05d9-114">第二頁會用來列出所選取的供應商提供的產品 GridView。</span><span class="sxs-lookup"><span data-stu-id="a05d9-114">The second page used a GridView to list those products provided by the selected supplier.</span></span>

<span data-ttu-id="a05d9-115">這類兩頁主要/詳細資料報表，可以使用一併 DataList 和中繼器控制項來完成。</span><span class="sxs-lookup"><span data-stu-id="a05d9-115">Such two-page master/detail reports can be accomplished using DataList and Repeater controls as well.</span></span> <span data-ttu-id="a05d9-116">唯一的差別，是在 DataList 和中繼器都不提供支援 HyperLinkField 控制項。</span><span class="sxs-lookup"><span data-stu-id="a05d9-116">The only difference is that neither the DataList nor the Repeater provides support for the HyperLinkField control.</span></span> <span data-ttu-id="a05d9-117">相反地，我們必須加入超連結 Web 控制項或 HTML 錨定項目 (`<a>`) 內控制項的`ItemTemplate`。</span><span class="sxs-lookup"><span data-stu-id="a05d9-117">Instead, we must add a HyperLink Web control or an anchor HTML element (`<a>`) within the control's `ItemTemplate`.</span></span> <span data-ttu-id="a05d9-118">超連結的`NavigateUrl`屬性或錨點的`href`屬性然後可以開始自訂使用宣告式或程式設計方法。</span><span class="sxs-lookup"><span data-stu-id="a05d9-118">The HyperLink's `NavigateUrl` property or the anchor's `href` attribute can then be customized using declarative or programmatic approaches.</span></span>

<span data-ttu-id="a05d9-119">在本教學課程中，我們將探討的範例會列出在使用中繼器控制項的單一頁面上的項目符號清單中的類別。</span><span class="sxs-lookup"><span data-stu-id="a05d9-119">In this tutorial we'll explore an example that lists the categories in a bulleted list on one page using a Repeater control.</span></span> <span data-ttu-id="a05d9-120">每個清單項目會包含類別目錄的名稱和描述，做為第二個頁面的連結會顯示類別目錄名稱。</span><span class="sxs-lookup"><span data-stu-id="a05d9-120">Each list item will include the category's name and description, with the category name displayed as a link to a second page.</span></span> <span data-ttu-id="a05d9-121">按一下此連結將 whisk 到第二個頁面上，使用者 DataList 其中會顯示屬於所選類別目錄的產品。</span><span class="sxs-lookup"><span data-stu-id="a05d9-121">Clicking on this link will whisk the user to the second page, where a DataList will show those products that belong to the selected category.</span></span>

## <a name="step-1-displaying-the-categories-in-a-bulleted-list"></a><span data-ttu-id="a05d9-122">步驟 1： 在項目符號清單中顯示類別目錄</span><span class="sxs-lookup"><span data-stu-id="a05d9-122">Step 1: Displaying the Categories in a Bulleted List</span></span>

<span data-ttu-id="a05d9-123">建立任何主要/詳細資料報表的第一個步驟是開始所顯示的 「 主要 」 的記錄。</span><span class="sxs-lookup"><span data-stu-id="a05d9-123">The first step in creating any master/detail report is to start by displaying the "master" records.</span></span> <span data-ttu-id="a05d9-124">因此，我們第一項工作是在 「 主要 」 的頁面中顯示的類別。</span><span class="sxs-lookup"><span data-stu-id="a05d9-124">Therefore, our first task is to display the categories in the "master" page.</span></span> <span data-ttu-id="a05d9-125">開啟`CategoryListMaster.aspx`頁面`DataListRepeaterFiltering`資料夾，會將中繼器控制項中，加入，然後從智慧標籤中，選擇 加入新 ObjectDataSource。</span><span class="sxs-lookup"><span data-stu-id="a05d9-125">Open the `CategoryListMaster.aspx` page in the `DataListRepeaterFiltering` folder, add a Repeater control, and, from the smart tag, opt to add a new ObjectDataSource.</span></span> <span data-ttu-id="a05d9-126">設定新 ObjectDataSource，讓它存取其資料從`CategoriesBLL`類別的`GetCategories`方法 （請參閱圖 1）。</span><span class="sxs-lookup"><span data-stu-id="a05d9-126">Configure the new ObjectDataSource so that it accesses its data from the `CategoriesBLL` class's `GetCategories` method (see Figure 1).</span></span>


<span data-ttu-id="a05d9-127">[![設定為使用 CategoriesBLL 類別 GetCategories 方法 ObjectDataSource](master-detail-filtering-acess-two-pages-datalist-cs/_static/image2.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="a05d9-127">[![Configure the ObjectDataSource to Use the CategoriesBLL Class's GetCategories Method](master-detail-filtering-acess-two-pages-datalist-cs/_static/image2.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image1.png)</span></span>

<span data-ttu-id="a05d9-128">**圖 1**： 設定要使用 ObjectDataSource`CategoriesBLL`類別的`GetCategories`方法 ([按一下以檢視完整大小的影像](master-detail-filtering-acess-two-pages-datalist-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="a05d9-128">**Figure 1**: Configure the ObjectDataSource to Use the `CategoriesBLL` Class's `GetCategories` Method ([Click to view full-size image](master-detail-filtering-acess-two-pages-datalist-cs/_static/image3.png))</span></span>


<span data-ttu-id="a05d9-129">接下來，定義中繼器範本，使它做為項目符號清單中的項目會顯示每個分類名稱和描述。</span><span class="sxs-lookup"><span data-stu-id="a05d9-129">Next, define the Repeater's templates such that it displays each category name and description as an item in a bulleted list.</span></span> <span data-ttu-id="a05d9-130">讓我們尚未擔心是否有每個類別目錄的詳細資料頁面的連結。</span><span class="sxs-lookup"><span data-stu-id="a05d9-130">Let's not yet worry about having each category link to the details page.</span></span> <span data-ttu-id="a05d9-131">下圖顯示中繼器和 ObjectDataSource 宣告式標記：</span><span class="sxs-lookup"><span data-stu-id="a05d9-131">The following shows the declarative markup for the Repeater and ObjectDataSource:</span></span>

[!code-aspx[Main](master-detail-filtering-acess-two-pages-datalist-cs/samples/sample1.aspx)]

<span data-ttu-id="a05d9-132">使用這個完整的標記，請花一點時間檢視進度透過瀏覽器。</span><span class="sxs-lookup"><span data-stu-id="a05d9-132">With this markup complete, take a moment to view our progress through a browser.</span></span> <span data-ttu-id="a05d9-133">如圖 2 所示，中繼器轉譯成活頁的項目符號清單會顯示每個類別目錄名稱和描述。</span><span class="sxs-lookup"><span data-stu-id="a05d9-133">As Figure 2 shows, the Repeater renders as a bulleted list showing each category's name and description.</span></span>


<span data-ttu-id="a05d9-134">[![每個類別目錄會顯示為清單項目符號](master-detail-filtering-acess-two-pages-datalist-cs/_static/image5.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="a05d9-134">[![Each Category is Displayed as a Bulleted List Item](master-detail-filtering-acess-two-pages-datalist-cs/_static/image5.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image4.png)</span></span>

<span data-ttu-id="a05d9-135">**圖 2**： 每個類別會顯示為項目符號清單項目 ([按一下以檢視完整大小的影像](master-detail-filtering-acess-two-pages-datalist-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="a05d9-135">**Figure 2**: Each Category is Displayed as a Bulleted List Item ([Click to view full-size image](master-detail-filtering-acess-two-pages-datalist-cs/_static/image6.png))</span></span>


## <a name="step-2-turning-the-category-name-into-a-link-to-the-details-page"></a><span data-ttu-id="a05d9-136">步驟 2： 將類別名稱轉換成詳細資料頁面的連結</span><span class="sxs-lookup"><span data-stu-id="a05d9-136">Step 2: Turning the Category Name into a Link to the Details Page</span></span>

<span data-ttu-id="a05d9-137">若要讓使用者以顯示與指定的類別目錄的 [詳細資料] 資訊，我們需要加入至每個項目符號清單項目，按下時，會將使用者導向至第二個頁面的連結 (`ProductsForCategoryDetails.aspx`)。</span><span class="sxs-lookup"><span data-stu-id="a05d9-137">To allow a user to display the "details" information for a given category, we need to add a link to each bulleted list item that, when clicked, will take the user to the second page (`ProductsForCategoryDetails.aspx`).</span></span> <span data-ttu-id="a05d9-138">此第二個頁面就會顯示所選取的類別目錄使用 DataList 產品。</span><span class="sxs-lookup"><span data-stu-id="a05d9-138">This second page will then display the products for the selected category using a DataList.</span></span> <span data-ttu-id="a05d9-139">若要判斷已按下其連結的類別目錄，我們要通過按過的類別目錄`CategoryID`透過一些機制的第二頁。</span><span class="sxs-lookup"><span data-stu-id="a05d9-139">In order to determine the category whose link was clicked, we need to pass the clicked category's `CategoryID` to the second page through some mechanism.</span></span> <span data-ttu-id="a05d9-140">從一頁的純量資料傳送至另一個簡單且最直接的方式是透過查詢字串中，我們將在本教學課程中使用此選項。</span><span class="sxs-lookup"><span data-stu-id="a05d9-140">The simplest, most straightforward way to transfer scalar data from one page to another is through the querystring, which is the option we'll use in this tutorial.</span></span> <span data-ttu-id="a05d9-141">特別是，`ProductsForCategoryDetails.aspx`頁面就會預期收到所選 *`categoryID`* 傳遞透過名為的 querystring 欄位值`CategoryID`。</span><span class="sxs-lookup"><span data-stu-id="a05d9-141">In particular, the `ProductsForCategoryDetails.aspx` page will expect the selected *`categoryID`* value to be passed through a querystring field named `CategoryID`.</span></span> <span data-ttu-id="a05d9-142">例如，若要檢視 「 飲料 」 分類的產品具有`CategoryID`使用者會是 1，請瀏覽`ProductsForCategoryDetails.aspx?CategoryID=1`。</span><span class="sxs-lookup"><span data-stu-id="a05d9-142">For example, to view the products for the Beverages category, which has a `CategoryID` of 1, a user would visit `ProductsForCategoryDetails.aspx?CategoryID=1`.</span></span>

<span data-ttu-id="a05d9-143">我們需要將超連結 Web 控制項或 HTML 錨定項目加入的中繼器中建立每個項目符號清單項目的超連結 (`<a>`) 至`ItemTemplate`。</span><span class="sxs-lookup"><span data-stu-id="a05d9-143">To create a hyperlink for each bulleted list item in the Repeater we need to either add a HyperLink Web control or an HTML anchor element (`<a>`) to the `ItemTemplate`.</span></span> <span data-ttu-id="a05d9-144">中的情況下超連結可顯示每個資料列相同、 兩種方法就夠了。</span><span class="sxs-lookup"><span data-stu-id="a05d9-144">In scenarios where the hyperlink is displayed the same for each row, either approach will suffice.</span></span> <span data-ttu-id="a05d9-145">中繼器，我願意使用錨定項目。</span><span class="sxs-lookup"><span data-stu-id="a05d9-145">For Repeaters, I prefer using the anchor element.</span></span> <span data-ttu-id="a05d9-146">若要使用錨定項目，更新至中繼器 ItemTemplate:</span><span class="sxs-lookup"><span data-stu-id="a05d9-146">To use the anchor element, update the Repeater's ItemTemplate to:</span></span>

[!code-aspx[Main](master-detail-filtering-acess-two-pages-datalist-cs/samples/sample2.aspx)]

<span data-ttu-id="a05d9-147">請注意，`CategoryID`可直接在錨定項目插入`href`屬性; 不過，若要執行因此一定要分隔`href`屬性的值與所有格符號 （附註引號） 後`Eval`方法內`href`屬性分隔的字串 (`"CategoryID"`) 加上引號。</span><span class="sxs-lookup"><span data-stu-id="a05d9-147">Note that the `CategoryID` can be injected directly within the anchor element's `href` attribute; however, to do so be certain to delimit the `href` attribute's value with apostrophes (and note quotation marks) since the `Eval` method within the `href` attribute delimits its string (`"CategoryID"`) with quotation marks.</span></span> <span data-ttu-id="a05d9-148">或者，可以改為使用超連結 Web 控制項：</span><span class="sxs-lookup"><span data-stu-id="a05d9-148">Alternatively, a HyperLink Web control can be used instead:</span></span>

[!code-aspx[Main](master-detail-filtering-acess-two-pages-datalist-cs/samples/sample3.aspx)]

<span data-ttu-id="a05d9-149">請注意如何 URL 的靜態部分 — `ProductsForCategoryDetails.aspx?CategoryID` — 的結果會附加`Eval("CategoryID")`直接在資料繫結語法使用字串串連。</span><span class="sxs-lookup"><span data-stu-id="a05d9-149">Note how the static portion of the URL — `ProductsForCategoryDetails.aspx?CategoryID` — is appended to the result of `Eval("CategoryID")` directly within the databinding syntax using string concatenation.</span></span>

<span data-ttu-id="a05d9-150">使用超連結控制項的其中一個優點是，可以在從中繼器以程式設計方式存取`ItemDataBound`事件處理常式，如有需要。</span><span class="sxs-lookup"><span data-stu-id="a05d9-150">One benefit of using the HyperLink control is that it can be programmatically accessed from the Repeater's `ItemDataBound` event handler, if needed.</span></span> <span data-ttu-id="a05d9-151">例如，您可以為文字而非與沒有相關聯的產品類別目錄的連結，顯示類別目錄名稱。</span><span class="sxs-lookup"><span data-stu-id="a05d9-151">For example, you might want to display the category name as text rather than as a link for categories with no associated products.</span></span> <span data-ttu-id="a05d9-152">在無法以程式設計方式執行這類檢查`ItemDataBound`事件處理常式; 類別沒有相關聯的產品，超連結的`NavigateUrl`屬性無法設為空白字串，進而產生該特定類別名稱轉譯為純文字 （而非連結）。</span><span class="sxs-lookup"><span data-stu-id="a05d9-152">Such a check could be programmatically performed in the `ItemDataBound` event handler; for categories with no associated products, the HyperLink's `NavigateUrl` property could be set to a blank string, thereby resulting in that particular category name rendering as plain text (rather than as a link).</span></span> <span data-ttu-id="a05d9-153">回頭參考[格式化 DataList 和中繼器時資料](../displaying-data-with-the-datalist-and-repeater/formatting-the-datalist-and-repeater-based-upon-data-cs.md)教學課程，如需有關格式設定 DataList 和中繼器的內容會根據透過程式設計邏輯`ItemDataBound`事件處理常式。</span><span class="sxs-lookup"><span data-stu-id="a05d9-153">Refer back to the [Formatting the DataList and Repeater Based Upon Data](../displaying-data-with-the-datalist-and-repeater/formatting-the-datalist-and-repeater-based-upon-data-cs.md) tutorial for more information on formatting the DataList and Repeater's contents based on programmatic logic through the `ItemDataBound` event handler.</span></span>

<span data-ttu-id="a05d9-154">如果您要遵照，歡迎頁面中使用錨定項目或超連結控制項的方法。</span><span class="sxs-lookup"><span data-stu-id="a05d9-154">If you are following along, feel free to use either the anchor element or HyperLink control approach in your page.</span></span> <span data-ttu-id="a05d9-155">不論方法，當檢視透過每個類別目錄名稱應該轉譯為連結的瀏覽器頁面`ProductsForCategoryDetails.aspx`，並傳入之適用`CategoryID`值 （請參閱圖 3）。</span><span class="sxs-lookup"><span data-stu-id="a05d9-155">Regardless of the approach, when viewing the page through a browser each category name should be rendered as a link to `ProductsForCategoryDetails.aspx`, passing in the applicable `CategoryID` value (see Figure 3).</span></span>


<span data-ttu-id="a05d9-156">[![類別目錄名稱現在連結到 ProductsForCategoryDetails.aspx](master-detail-filtering-acess-two-pages-datalist-cs/_static/image8.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="a05d9-156">[![The Category Names Now Link to ProductsForCategoryDetails.aspx](master-detail-filtering-acess-two-pages-datalist-cs/_static/image8.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image7.png)</span></span>

<span data-ttu-id="a05d9-157">**圖 3**: 類別目錄名稱現在連結到`ProductsForCategoryDetails.aspx`([按一下以檢視完整大小的影像](master-detail-filtering-acess-two-pages-datalist-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="a05d9-157">**Figure 3**: The Category Names Now Link to `ProductsForCategoryDetails.aspx` ([Click to view full-size image](master-detail-filtering-acess-two-pages-datalist-cs/_static/image9.png))</span></span>


## <a name="step-3-listing-the-products-that-belong-to-the-selected-category"></a><span data-ttu-id="a05d9-158">步驟 3： 列出屬於所選類別目錄的產品</span><span class="sxs-lookup"><span data-stu-id="a05d9-158">Step 3: Listing the Products that Belong to the Selected Category</span></span>

<span data-ttu-id="a05d9-159">與`CategoryListMaster.aspx`完成 頁面上，我們已經準備好開啟實作 詳細資料 頁面中，我們注意`ProductsForCategoryDetails.aspx`。</span><span class="sxs-lookup"><span data-stu-id="a05d9-159">With the `CategoryListMaster.aspx` page complete, we're ready to turn our attention to implementing the "details" page, `ProductsForCategoryDetails.aspx`.</span></span> <span data-ttu-id="a05d9-160">開啟此頁面，從 [工具箱] 拖曳至設計工具中，拖曳 DataList 和設定其`ID`屬性`ProductsInCategory`。</span><span class="sxs-lookup"><span data-stu-id="a05d9-160">Open this page, drag a DataList from the Toolbox onto the Designer, and set its `ID` property to `ProductsInCategory`.</span></span> <span data-ttu-id="a05d9-161">接下來，從 DataList 的智慧標籤選擇 [加入] 頁面上，其命名為新 ObjectDataSource `ProductsInCategoryDataSource`。</span><span class="sxs-lookup"><span data-stu-id="a05d9-161">Next, from the DataList's smart tag choose to add a new ObjectDataSource to the page, naming it `ProductsInCategoryDataSource`.</span></span> <span data-ttu-id="a05d9-162">設定它，它會呼叫`ProductsBLL`類別的`GetProductsByCategoryID(categoryID)`方法; 下拉式清單會列出為 （無） 插入、 更新和刪除索引標籤中的設定。</span><span class="sxs-lookup"><span data-stu-id="a05d9-162">Configure it such that it calls the `ProductsBLL` class's `GetProductsByCategoryID(categoryID)` method; set the drop-down lists in the INSERT, UPDATE, and DELETE tabs to (None).</span></span>


<span data-ttu-id="a05d9-163">[![設定為使用 ProductsBLL 類別 GetProductsByCategoryID(categoryID) 方法 ObjectDataSource](master-detail-filtering-acess-two-pages-datalist-cs/_static/image11.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="a05d9-163">[![Configure the ObjectDataSource to Use the ProductsBLL Class's GetProductsByCategoryID(categoryID) Method](master-detail-filtering-acess-two-pages-datalist-cs/_static/image11.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image10.png)</span></span>

<span data-ttu-id="a05d9-164">**圖 4**： 設定要使用 ObjectDataSource`ProductsBLL`類別的`GetProductsByCategoryID(categoryID)`方法 ([按一下以檢視完整大小的影像](master-detail-filtering-acess-two-pages-datalist-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="a05d9-164">**Figure 4**: Configure the ObjectDataSource to Use the `ProductsBLL` Class's `GetProductsByCategoryID(categoryID)` Method ([Click to view full-size image](master-detail-filtering-acess-two-pages-datalist-cs/_static/image12.png))</span></span>


<span data-ttu-id="a05d9-165">因為`GetProductsByCategoryID(categoryID)`方法會接受輸入的參數 (*`categoryID`*)，選擇資料來源精靈提供可讓我們有機會指定參數的來源。</span><span class="sxs-lookup"><span data-stu-id="a05d9-165">Since the `GetProductsByCategoryID(categoryID)` method accepts an input parameter (*`categoryID`*), the Choose Data Source wizard offers us an opportunity to specify the parameter's source.</span></span> <span data-ttu-id="a05d9-166">將參數來源設定為使用 QueryStringField QueryString `CategoryID`。</span><span class="sxs-lookup"><span data-stu-id="a05d9-166">Set the parameter source to QueryString using the QueryStringField `CategoryID`.</span></span>


<span data-ttu-id="a05d9-167">[![Querystring 欄位 CategoryID 做為參數的來源](master-detail-filtering-acess-two-pages-datalist-cs/_static/image14.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="a05d9-167">[![Use the Querystring Field CategoryID as the Parameter's Source](master-detail-filtering-acess-two-pages-datalist-cs/_static/image14.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image13.png)</span></span>

<span data-ttu-id="a05d9-168">**圖 5**： 使用查詢字串欄位`CategoryID`做為參數的來源 ([按一下以檢視完整大小的影像](master-detail-filtering-acess-two-pages-datalist-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="a05d9-168">**Figure 5**: Use the Querystring Field `CategoryID` as the Parameter's Source ([Click to view full-size image](master-detail-filtering-acess-two-pages-datalist-cs/_static/image15.png))</span></span>


<span data-ttu-id="a05d9-169">Visual Studio 如我們所見在上一個教學課程中，選擇資料來源精靈中，完成後會自動建立`ItemTemplate`的資料清單，列出每個資料欄位名稱和值。</span><span class="sxs-lookup"><span data-stu-id="a05d9-169">As we've seen in previous tutorials, after completing the Choose Data Source wizard, Visual Studio automatically creates an `ItemTemplate` for the DataList that lists each data field name and value.</span></span> <span data-ttu-id="a05d9-170">此範本取代另一個會列出只產品的名稱、 供應商和價格。</span><span class="sxs-lookup"><span data-stu-id="a05d9-170">Replace this template with one that lists only the product's name, supplier, and price.</span></span> <span data-ttu-id="a05d9-171">此外，設定 DataList `RepeatColumns` 2 的屬性。</span><span class="sxs-lookup"><span data-stu-id="a05d9-171">Also, set the DataList's `RepeatColumns` property to 2.</span></span> <span data-ttu-id="a05d9-172">這些變更之後，請您 DataList 和 ObjectDataSource 的宣告式標記看起來應該如下所示：</span><span class="sxs-lookup"><span data-stu-id="a05d9-172">After these changes, your DataList and ObjectDataSource's declarative markup should look similar to the following:</span></span>

[!code-aspx[Main](master-detail-filtering-acess-two-pages-datalist-cs/samples/sample4.aspx)]

<span data-ttu-id="a05d9-173">若要檢視這個頁面作用中，從啟動`CategoryListMaster.aspx`頁面上，接下來，請按一下 類別目錄項目符號清單中的連結。</span><span class="sxs-lookup"><span data-stu-id="a05d9-173">To view this page in action, start from the `CategoryListMaster.aspx` page; next, click on a link in the categories bulleted list.</span></span> <span data-ttu-id="a05d9-174">這樣會帶您前往`ProductsForCategoryDetails.aspx`，並傳遞沿著`CategoryID`透過查詢字串。</span><span class="sxs-lookup"><span data-stu-id="a05d9-174">Doing so will take you to `ProductsForCategoryDetails.aspx`, passing along the `CategoryID` through the querystring.</span></span> <span data-ttu-id="a05d9-175">`ProductsInCategoryDataSource`在 ObjectDataSource`ProductsForCategoryDetails.aspx`會取得指定的類別目錄僅擁有的產品，然後在 DataList，其會呈現這兩項產品每個資料列中顯示它們。</span><span class="sxs-lookup"><span data-stu-id="a05d9-175">The `ProductsInCategoryDataSource` ObjectDataSource in `ProductsForCategoryDetails.aspx` will then get just those products for the specified category and display them in the DataList, which renders two products per row.</span></span> <span data-ttu-id="a05d9-176">圖 6 顯示的螢幕擷取畫面`ProductsForCategoryDetails.aspx`檢視飲料時。</span><span class="sxs-lookup"><span data-stu-id="a05d9-176">Figure 6 shows a screenshot of `ProductsForCategoryDetails.aspx` when viewing the Beverages.</span></span>


<span data-ttu-id="a05d9-177">[![顯示的飲料，每個資料列的兩個](master-detail-filtering-acess-two-pages-datalist-cs/_static/image17.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="a05d9-177">[![The Beverages are Displayed, Two per Row](master-detail-filtering-acess-two-pages-datalist-cs/_static/image17.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image16.png)</span></span>

<span data-ttu-id="a05d9-178">**圖 6**： 顯示飲料，每個資料列的兩個 ([按一下以檢視完整大小的影像](master-detail-filtering-acess-two-pages-datalist-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="a05d9-178">**Figure 6**: The Beverages are Displayed, Two per Row ([Click to view full-size image](master-detail-filtering-acess-two-pages-datalist-cs/_static/image18.png))</span></span>


## <a name="step-4-displaying-category-information-on-productsforcategorydetailsaspx"></a><span data-ttu-id="a05d9-179">步驟 4： 上 ProductsForCategoryDetails.aspx 顯示類別目錄資訊</span><span class="sxs-lookup"><span data-stu-id="a05d9-179">Step 4: Displaying Category Information on ProductsForCategoryDetails.aspx</span></span>

<span data-ttu-id="a05d9-180">當使用者按一下中的類別上`CategoryListMaster.aspx`，它們會帶您到`ProductsForCategoryDetails.aspx`和顯示屬於所選類別目錄的產品。</span><span class="sxs-lookup"><span data-stu-id="a05d9-180">When a user clicks on a category in `CategoryListMaster.aspx`, they are taken to `ProductsForCategoryDetails.aspx` and shown the products that belong to the selected category.</span></span> <span data-ttu-id="a05d9-181">不過，在`ProductsForCategoryDetails.aspx`有沒有視覺提示，並選取哪個類別。</span><span class="sxs-lookup"><span data-stu-id="a05d9-181">However, in `ProductsForCategoryDetails.aspx` there are no visual cues as to what category was selected.</span></span> <span data-ttu-id="a05d9-182">使用者想要按一下飲料，但是不小心按下 「 調味品 」，便無法實現其錯誤一旦到達`ProductsForCategoryDetails.aspx`。</span><span class="sxs-lookup"><span data-stu-id="a05d9-182">A user that meant to click Beverages, but accidentally clicked Condiments, has no way of realizing their mistake once they reach `ProductsForCategoryDetails.aspx`.</span></span> <span data-ttu-id="a05d9-183">若要減輕此潛在的問題，我們可以顯示所選類別的相關資訊，其名稱和描述 — 頂端`ProductsForCategoryDetails.aspx`頁面。</span><span class="sxs-lookup"><span data-stu-id="a05d9-183">To alleviate this potential problem, we can display information about the selected category — its name and description — at the top of the `ProductsForCategoryDetails.aspx` page.</span></span>

<span data-ttu-id="a05d9-184">若要完成此動作，新增中繼器控制項上方 FormView `ProductsForCategoryDetails.aspx`。</span><span class="sxs-lookup"><span data-stu-id="a05d9-184">To accomplish this, add a FormView above the Repeater control in `ProductsForCategoryDetails.aspx`.</span></span> <span data-ttu-id="a05d9-185">接下來，加入新 ObjectDataSource 頁面從名為在 FormView 的智慧標籤`CategoryDataSource`並將它設定為使用`CategoriesBLL`類別的`GetCategoryByCategoryID(categoryID)`方法。</span><span class="sxs-lookup"><span data-stu-id="a05d9-185">Next, add a new ObjectDataSource to the page from the FormView's smart tag named `CategoryDataSource` and configure it to use the `CategoriesBLL` class's `GetCategoryByCategoryID(categoryID)` method.</span></span>


<span data-ttu-id="a05d9-186">[![透過 CategoriesBLL 類別 GetCategoryByCategoryID(categoryID) 方法的類別目錄的存取資訊](master-detail-filtering-acess-two-pages-datalist-cs/_static/image20.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="a05d9-186">[![Access Information about the Category through the CategoriesBLL Class's GetCategoryByCategoryID(categoryID) Method](master-detail-filtering-acess-two-pages-datalist-cs/_static/image20.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image19.png)</span></span>

<span data-ttu-id="a05d9-187">**圖 7**： 透過類別目錄的存取資訊`CategoriesBLL`類別的`GetCategoryByCategoryID(categoryID)`方法 ([按一下以檢視完整大小的影像](master-detail-filtering-acess-two-pages-datalist-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="a05d9-187">**Figure 7**: Access Information about the Category through the `CategoriesBLL` Class's `GetCategoryByCategoryID(categoryID)` Method ([Click to view full-size image](master-detail-filtering-acess-two-pages-datalist-cs/_static/image21.png))</span></span>


<span data-ttu-id="a05d9-188">如同`ProductsInCategoryDataSource`ObjectDataSource 加入在步驟 3 中`CategoryDataSource`的設定資料來源精靈會提示輸入我們的來源`GetCategoryByCategoryID(categoryID)`方法的輸入參數。</span><span class="sxs-lookup"><span data-stu-id="a05d9-188">As with the `ProductsInCategoryDataSource` ObjectDataSource added in Step 3, the `CategoryDataSource`'s Configure Data Source wizard prompts us for a source for the `GetCategoryByCategoryID(categoryID)` method's input parameter.</span></span> <span data-ttu-id="a05d9-189">使用相同的設定之前，查詢字串和 QueryStringField 值，以設定參數來源`CategoryID`（請參閱上一步圖 5）。</span><span class="sxs-lookup"><span data-stu-id="a05d9-189">Use the exact same settings as before, setting the parameter source to QueryString and the QueryStringField value to `CategoryID` (refer back to Figure 5).</span></span>

<span data-ttu-id="a05d9-190">完成精靈之後，Visual Studio 會自動建立`ItemTemplate`， `EditItemTemplate`，和`InsertItemTemplate`在 FormView 的。</span><span class="sxs-lookup"><span data-stu-id="a05d9-190">After completing the wizard, Visual Studio automatically creates an `ItemTemplate`, `EditItemTemplate`, and `InsertItemTemplate` for the FormView.</span></span> <span data-ttu-id="a05d9-191">因為我們提供唯讀介面，則可以自由移除`EditItemTemplate`和`InsertItemTemplate`。</span><span class="sxs-lookup"><span data-stu-id="a05d9-191">Since we're providing a read-only interface, feel free to remove the `EditItemTemplate` and `InsertItemTemplate`.</span></span> <span data-ttu-id="a05d9-192">此外，您可以任意去自訂在 FormView 的`ItemTemplate`。</span><span class="sxs-lookup"><span data-stu-id="a05d9-192">Also, feel free to customize the FormView's `ItemTemplate`.</span></span> <span data-ttu-id="a05d9-193">在移除多餘的範本，並自訂 ItemTemplate 之後, 您 FormView 和 ObjectDataSource 的宣告式標記看起來應該如下所示：</span><span class="sxs-lookup"><span data-stu-id="a05d9-193">After removing the superfluous templates and customizing the ItemTemplate, your FormView and ObjectDataSource's declarative markup should look similar to the following:</span></span>

[!code-aspx[Main](master-detail-filtering-acess-two-pages-datalist-cs/samples/sample5.aspx)]

<span data-ttu-id="a05d9-194">圖 8 顯示螢幕擷取畫面檢視此頁面，透過瀏覽器時。</span><span class="sxs-lookup"><span data-stu-id="a05d9-194">Figure 8 shows a screen shot when viewing this page through a browser.</span></span>

> [!NOTE]
> <span data-ttu-id="a05d9-195">在 FormView 中，除了我新增了 FormView 將使用者引導回用類別目錄的清單上方的超連結控制項 (`CategoryListMaster.aspx`)。</span><span class="sxs-lookup"><span data-stu-id="a05d9-195">In addition to the FormView, I've also added a HyperLink control above the FormView that will take the user back to the list of categories (`CategoryListMaster.aspx`).</span></span> <span data-ttu-id="a05d9-196">隨意放置此連結的其他位置，或完全省略它。</span><span class="sxs-lookup"><span data-stu-id="a05d9-196">Feel free to place this link elsewhere or to omit it altogether.</span></span>


<span data-ttu-id="a05d9-197">[![類別目錄資訊是現在顯示在頁面頂端](master-detail-filtering-acess-two-pages-datalist-cs/_static/image23.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="a05d9-197">[![Category Information is Now Displayed at the Top of the Page](master-detail-filtering-acess-two-pages-datalist-cs/_static/image23.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image22.png)</span></span>

<span data-ttu-id="a05d9-198">**圖 8**： 類別目錄資訊是現在顯示在頁面的頂端 ([按一下以檢視完整大小的影像](master-detail-filtering-acess-two-pages-datalist-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="a05d9-198">**Figure 8**: Category Information is Now Displayed at the Top of the Page ([Click to view full-size image](master-detail-filtering-acess-two-pages-datalist-cs/_static/image24.png))</span></span>


## <a name="step-5-displaying-a-message-if-no-products-belong-to-the-selected-category"></a><span data-ttu-id="a05d9-199">步驟 5： 顯示訊息，如果沒有產品屬於所選類別目錄</span><span class="sxs-lookup"><span data-stu-id="a05d9-199">Step 5: Displaying a Message if No Products Belong to the Selected Category</span></span>

<span data-ttu-id="a05d9-200">`CategoryListMaster.aspx`頁面在系統中，列出所有類別目錄，不論是否有任何相關聯的產品。</span><span class="sxs-lookup"><span data-stu-id="a05d9-200">The `CategoryListMaster.aspx` page lists all categories in the system, regardless of whether there are any associated products.</span></span> <span data-ttu-id="a05d9-201">如果使用者按一下與沒有相關聯的產品，在 DataList 類別`ProductsForCategoryDetails.aspx`不呈現，因為其資料來源沒有任何項目。</span><span class="sxs-lookup"><span data-stu-id="a05d9-201">If a user clicks on a category with no associated products, the DataList in `ProductsForCategoryDetails.aspx` will not be rendered, as its data source will not have any items.</span></span> <span data-ttu-id="a05d9-202">在 GridView 如同我們在過去的教學課程中，提供`EmptyDataText`可用來指定其資料來源中沒有的記錄時要顯示的文字訊息的屬性。</span><span class="sxs-lookup"><span data-stu-id="a05d9-202">As we've seen in past tutorials, the GridView provides an `EmptyDataText` property that can be used to specify a text message to display if there are no records in its data source.</span></span> <span data-ttu-id="a05d9-203">不幸的是，DataList 和中繼器都不會有這類屬性。</span><span class="sxs-lookup"><span data-stu-id="a05d9-203">Unfortunately, neither the DataList nor Repeater has such a property.</span></span>

<span data-ttu-id="a05d9-204">若要顯示訊息，通知使用者，確認選取的類別沒有相符的產品，我們需要加入標籤控制項至頁面`Text`屬性會被指定要顯示的沒有相符產品的訊息。</span><span class="sxs-lookup"><span data-stu-id="a05d9-204">In order to display a message informing the user that there are no matching products for the selected category, we need to add a Label control to the page whose `Text` property is assigned the message to display in the event that there are no matching products.</span></span> <span data-ttu-id="a05d9-205">然後，我們需要以程式設計方式設定其`Visible`屬性根據資料清單是否包含任何項目。</span><span class="sxs-lookup"><span data-stu-id="a05d9-205">We then need to programmatically set its `Visible` property based on whether or not the DataList contains any items.</span></span>

<span data-ttu-id="a05d9-206">若要完成此動作，啟動加在 DataList 下方的標籤。</span><span class="sxs-lookup"><span data-stu-id="a05d9-206">To accomplish this, start by adding a Label beneath the DataList.</span></span> <span data-ttu-id="a05d9-207">設定其`ID`屬性`NoProductsMessage`及其`Text`"There are 任何產品選取的類別目錄..."的屬性</span><span class="sxs-lookup"><span data-stu-id="a05d9-207">Set its `ID` property to `NoProductsMessage` and its `Text` property to "There are no products for the selected category…"</span></span> <span data-ttu-id="a05d9-208">接下來，我們必須以程式設計方式設定這個標籤`Visible`屬性會根據是否任何資料已繫結至`ProductsInCategory`DataList。</span><span class="sxs-lookup"><span data-stu-id="a05d9-208">Next, we need to programmatically set this Label's `Visible` property based on whether or not any data was bound to the `ProductsInCategory` DataList.</span></span> <span data-ttu-id="a05d9-209">已繫結至資料清單的資料之後，必須進行這項指派。</span><span class="sxs-lookup"><span data-stu-id="a05d9-209">This assignment must be made after the data has been bound to the DataList.</span></span> <span data-ttu-id="a05d9-210">GridView、 DetailsView，以及在 FormView 中，我們無法建立控制項的事件處理常式`DataBound`資料繫結完成之後引發的事件。</span><span class="sxs-lookup"><span data-stu-id="a05d9-210">For the GridView, DetailsView, and FormView, we could create an event handler for the control's `DataBound` event, which fires after databinding has completed.</span></span> <span data-ttu-id="a05d9-211">不過，在 DataList 都中繼器有`DataBound`可用的事件。</span><span class="sxs-lookup"><span data-stu-id="a05d9-211">However, neither the DataList nor the Repeater has a `DataBound` event available.</span></span>

<span data-ttu-id="a05d9-212">針對此範例中，我們可以指派的標籤`Visible`屬性`Page_Load`事件處理常式，因為資料會被指派給頁面之前 DataList`Load`事件。</span><span class="sxs-lookup"><span data-stu-id="a05d9-212">For this particular example we can assign the Label's `Visible` property in the `Page_Load` event handler, since the data will have been assigned to the DataList prior to the page's `Load` event.</span></span> <span data-ttu-id="a05d9-213">不過，這種方法不會執行在一般情況下，因為從 ObjectDataSource 資料可能會繫結至資料清單網頁的生命週期的更新版本中。</span><span class="sxs-lookup"><span data-stu-id="a05d9-213">However, this approach would not work in the general case, as the data from the ObjectDataSource might be bound to the DataList later in the page's lifecycle.</span></span> <span data-ttu-id="a05d9-214">比方說，如果所顯示的資料根據另一個控制項中的值，例如顯示的主要/詳細資料報表是使用 DropDownList 以保存 「 主要 」 的記錄時，資料可能不重新繫結至資料的 Web 控制項，直到`PreRender`暫置中網頁的生命週期。</span><span class="sxs-lookup"><span data-stu-id="a05d9-214">For example, if the displayed data is based upon the value in another control, such as it is when displaying a master/detail report using a DropDownList to hold the "master" records, the data may not rebound to the data Web control until the `PreRender` stage in the page's life cycle.</span></span>

<span data-ttu-id="a05d9-215">這適用於所有情況下的其中一種解決方案是將指派`Visible`屬性`False`在 DataList `ItemDataBound` (或`ItemCreated`) 事件處理常式繫結的項目類型時`Item`或`AlternatingItem`。</span><span class="sxs-lookup"><span data-stu-id="a05d9-215">One solution which will work for all cases is to assign the `Visible` property to `False` in the DataList's `ItemDataBound` (or `ItemCreated`) event handler when binding an item type of `Item` or `AlternatingItem`.</span></span> <span data-ttu-id="a05d9-216">在這類情況下我們知道有至少一個資料資料來源中的項目，因此可以隱藏`NoProductsMessage`標籤。</span><span class="sxs-lookup"><span data-stu-id="a05d9-216">In such a case we know that there is at least one data item in the data source and therefore can hide the `NoProductsMessage` Label.</span></span> <span data-ttu-id="a05d9-217">除了這個事件處理常式中，我們還需要的事件處理常式 DataList`DataBinding`事件，我們用來初始化的標籤`Visible`屬性`True`。</span><span class="sxs-lookup"><span data-stu-id="a05d9-217">In addition to this event handler, we also need an event handler for the DataList's `DataBinding` event, where we initialize the Label's `Visible` property to `True`.</span></span> <span data-ttu-id="a05d9-218">因為`DataBinding`事件引發之前`ItemDataBound`事件，此標籤的`Visible`屬性一開始會設定為`True`; 如果沒有任何資料的項目，不過，它就會設定為`False`。</span><span class="sxs-lookup"><span data-stu-id="a05d9-218">Since the `DataBinding` event fires before the `ItemDataBound` events, the Label's `Visible` property will initially be set to `True`; if there are any data items, however, it will be set to `False`.</span></span> <span data-ttu-id="a05d9-219">下列程式碼會實作此邏輯：</span><span class="sxs-lookup"><span data-stu-id="a05d9-219">The following code implements this logic:</span></span>

[!code-csharp[Main](master-detail-filtering-acess-two-pages-datalist-cs/samples/sample6.cs)]

<span data-ttu-id="a05d9-220">所有 Northwind 資料庫中的類別會產生關聯的一或多個產品。</span><span class="sxs-lookup"><span data-stu-id="a05d9-220">All of the categories in the Northwind database are associated with one or more products.</span></span> <span data-ttu-id="a05d9-221">若要測試這項功能，我已經手動調整 Northwind 資料庫在此教學課程中，重新指派與產生的類別目錄相關聯的所有產品 (`CategoryID` = 7) Seafood 類別目錄 (`CategoryID` = 8)。</span><span class="sxs-lookup"><span data-stu-id="a05d9-221">To test this feature, I've manually adjusted the Northwind database for this tutorial, reassigning all products associated with the Produce category (`CategoryID` = 7) to the Seafood category (`CategoryID` = 8).</span></span> <span data-ttu-id="a05d9-222">達成這點可以從 [伺服器總管] 中選擇新的查詢，並使用下列`UPDATE`陳述式：</span><span class="sxs-lookup"><span data-stu-id="a05d9-222">This can be accomplished from the Server Explorer by choosing New Query and using the following `UPDATE` statement:</span></span>

[!code-sql[Main](master-detail-filtering-acess-two-pages-datalist-cs/samples/sample7.sql)]

<span data-ttu-id="a05d9-223">據以更新資料庫之後，返回`CategoryListMaster.aspx`頁面，然後按一下 [產生] 連結。</span><span class="sxs-lookup"><span data-stu-id="a05d9-223">After updating the database accordingly, return to the `CategoryListMaster.aspx` page and click on the Produce link.</span></span> <span data-ttu-id="a05d9-224">因為不再有任何屬於產生類別目錄的產品，您應該會看到"There are 任何產品選取的類別目錄..."</span><span class="sxs-lookup"><span data-stu-id="a05d9-224">Since there are no longer any products belonging to the Produce category, you should see the "There are no products for the selected category…"</span></span> <span data-ttu-id="a05d9-225">訊息，如圖 9 所示。</span><span class="sxs-lookup"><span data-stu-id="a05d9-225">message, as shown in Figure 9.</span></span>


<span data-ttu-id="a05d9-226">[![如果沒有產品屬於選取的類別，顯示一則訊息](master-detail-filtering-acess-two-pages-datalist-cs/_static/image26.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="a05d9-226">[![A Message is Displayed if there are No Products Belonging to the Selected Category](master-detail-filtering-acess-two-pages-datalist-cs/_static/image26.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image25.png)</span></span>

<span data-ttu-id="a05d9-227">**圖 9**: No 產品屬於選取的類別目錄時，會顯示訊息 ([按一下以檢視完整大小的影像](master-detail-filtering-acess-two-pages-datalist-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="a05d9-227">**Figure 9**: A Message is Displayed if there are No Products Belonging to the Selected Category ([Click to view full-size image](master-detail-filtering-acess-two-pages-datalist-cs/_static/image27.png))</span></span>


## <a name="summary"></a><span data-ttu-id="a05d9-228">總結</span><span class="sxs-lookup"><span data-stu-id="a05d9-228">Summary</span></span>

<span data-ttu-id="a05d9-229">雖然主要/詳細資料報表可以在單一頁面上會顯示主要和詳細記錄，在許多網站會分隔跨兩個網頁。</span><span class="sxs-lookup"><span data-stu-id="a05d9-229">While master/detail reports can display both the master and detail records on a single page, in many websites they are separated out across two web pages.</span></span> <span data-ttu-id="a05d9-230">在此教學課程中我們討論了如何實作主要/詳細資料報表具有 「 主要 」 的網頁中使用中繼器的項目符號清單中所列的類別和相關聯的產品列在 [詳細資料] 頁面中。</span><span class="sxs-lookup"><span data-stu-id="a05d9-230">In this tutorial we looked at how to implement such a master/detail report by having the categories listed in a bulleted list using a Repeater in the "master" web page and the associated products listed in the "details" page.</span></span> <span data-ttu-id="a05d9-231">主版網頁中的每個清單項目所包含的資料列所傳遞的詳細資料頁面的連結`CategoryID`值。</span><span class="sxs-lookup"><span data-stu-id="a05d9-231">Each list item in the master web page contained a link to the details page that passed along the row's `CategoryID` value.</span></span>

<span data-ttu-id="a05d9-232">透過已完成的詳細資料頁面擷取指定的供應商的那些產品`ProductsBLL`類別的`GetProductsByCategoryID(categoryID)`方法。</span><span class="sxs-lookup"><span data-stu-id="a05d9-232">In the details page retrieving those products for the specified supplier was accomplished through the `ProductsBLL` class's `GetProductsByCategoryID(categoryID)` method.</span></span> <span data-ttu-id="a05d9-233"> *`categoryID`* 使用以宣告方式指定參數值`CategoryID`querystring 值做為參數的來源。</span><span class="sxs-lookup"><span data-stu-id="a05d9-233">The *`categoryID`* parameter value was specified declaratively using the `CategoryID` querystring value as the parameter source.</span></span> <span data-ttu-id="a05d9-234">我們也討論了如何使用程式設計的詳細資料頁面中顯示類別目錄詳細資料以及如何顯示一則訊息，如果沒有任何屬於所選類別目錄的產品。</span><span class="sxs-lookup"><span data-stu-id="a05d9-234">We also looked at how to display category details in the details page using a FormView and how to display a message if there were no products belonging to the selected category.</span></span>

<span data-ttu-id="a05d9-235">祝您程式設計 ！</span><span class="sxs-lookup"><span data-stu-id="a05d9-235">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="a05d9-236">關於作者</span><span class="sxs-lookup"><span data-stu-id="a05d9-236">About the Author</span></span>

<span data-ttu-id="a05d9-237">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml)，作者的七個 ASP/ASP.NET 書籍和的創辦[4GuysFromRolla.com](http://www.4guysfromrolla.com)，已從 1998 年使用 Microsoft Web 技術。</span><span class="sxs-lookup"><span data-stu-id="a05d9-237">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="a05d9-238">Scott 可做為獨立顧問、 訓練和寫入器。</span><span class="sxs-lookup"><span data-stu-id="a05d9-238">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="a05d9-239">他最新的活頁簿[ *Sam 教導您自己 ASP.NET 2.0 24 小時內*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)。</span><span class="sxs-lookup"><span data-stu-id="a05d9-239">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="a05d9-240">他可以在達到[ mitchell@4GuysFromRolla.com。](mailto:mitchell@4GuysFromRolla.com)或透過他的部落格，這可以在找到[http://ScottOnWriting.NET](http://ScottOnWriting.NET)。</span><span class="sxs-lookup"><span data-stu-id="a05d9-240">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="a05d9-241">特別感謝...</span><span class="sxs-lookup"><span data-stu-id="a05d9-241">Special Thanks To…</span></span>

<span data-ttu-id="a05d9-242">許多有用的檢閱者已檢閱本教學課程系列。</span><span class="sxs-lookup"><span data-stu-id="a05d9-242">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="a05d9-243">此教學課程中的前導檢閱者已 Zack Jones 和 Liz Shulok。</span><span class="sxs-lookup"><span data-stu-id="a05d9-243">Lead reviewers for this tutorial were Zack Jones and Liz Shulok.</span></span> <span data-ttu-id="a05d9-244">檢閱我即將推出的 MSDN 文件有興趣嗎？</span><span class="sxs-lookup"><span data-stu-id="a05d9-244">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="a05d9-245">如果是這樣，卸除我一行[ mitchell@4GuysFromRolla.com。](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="a05d9-245">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="a05d9-246">[上一頁](master-detail-filtering-with-a-dropdownlist-datalist-cs.md)
[下一頁](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs.md)</span><span class="sxs-lookup"><span data-stu-id="a05d9-246">[Previous](master-detail-filtering-with-a-dropdownlist-datalist-cs.md)
[Next](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs.md)</span></span>
