---
uid: web-forms/overview/older-versions-getting-started/deploying-web-site-projects/deploying-a-database-cs
title: "部署資料庫 (C#) |Microsoft 文件"
author: rick-anderson
description: "ASP.NET web 應用程式部署需要取得必要的檔案和資源從開發環境到實際執行環境。 針對 da..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 04/23/2009
ms.topic: article
ms.assetid: ff537a10-9f1f-43fe-9bcb-3dda161ba8f5
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deploying-web-site-projects/deploying-a-database-cs
msc.type: authoredcontent
ms.openlocfilehash: f71e3cd1e81644df7b3dfed363b6f2ca826e610d
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 11/10/2017
---
<a name="deploying-a-database-c"></a><span data-ttu-id="ede8a-104">部署資料庫 (C#)</span><span class="sxs-lookup"><span data-stu-id="ede8a-104">Deploying a Database (C#)</span></span>
====================
<span data-ttu-id="ede8a-105">由[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="ede8a-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="ede8a-106">[下載程式碼](http://download.microsoft.com/download/E/6/F/E6FE3A1F-EE3A-4119-989A-33D1A9F6F6DD/ASPNET_Hosting_Tutorial_07_CS.zip)或[下載 PDF](http://download.microsoft.com/download/C/3/9/C391A649-B357-4A7B-BAA4-48C96871FEA6/aspnet_tutorial07_DeployDB_cs.pdf)</span><span class="sxs-lookup"><span data-stu-id="ede8a-106">[Download Code](http://download.microsoft.com/download/E/6/F/E6FE3A1F-EE3A-4119-989A-33D1A9F6F6DD/ASPNET_Hosting_Tutorial_07_CS.zip) or [Download PDF](http://download.microsoft.com/download/C/3/9/C391A649-B357-4A7B-BAA4-48C96871FEA6/aspnet_tutorial07_DeployDB_cs.pdf)</span></span>

> <span data-ttu-id="ede8a-107">ASP.NET web 應用程式部署需要取得必要的檔案和資源從開發環境到實際執行環境。</span><span class="sxs-lookup"><span data-stu-id="ede8a-107">Deploying an ASP.NET web application entails getting the necessary files and resources from the development environment to the production environment.</span></span> <span data-ttu-id="ede8a-108">資料驅動的 web 應用程式包括資料庫結構描述和資料。</span><span class="sxs-lookup"><span data-stu-id="ede8a-108">For data-driven web applications this includes the database schema and data.</span></span> <span data-ttu-id="ede8a-109">本教學課程是探索成功部署到生產環境資料庫從開發環境所需的步驟一系列中的第一個。</span><span class="sxs-lookup"><span data-stu-id="ede8a-109">This tutorial is the first in a series that explores the steps needed to successfully deploy the database from the development environment to production.</span></span>


## <a name="introduction"></a><span data-ttu-id="ede8a-110">簡介</span><span class="sxs-lookup"><span data-stu-id="ede8a-110">Introduction</span></span>

<span data-ttu-id="ede8a-111">ASP.NET web 應用程式部署需要取得必要的檔案和資源從開發環境到實際執行環境。</span><span class="sxs-lookup"><span data-stu-id="ede8a-111">Deploying an ASP.NET web application entails getting the necessary files and resources from the development environment to the production environment.</span></span> <span data-ttu-id="ede8a-112">我們探討了部署簡單的活頁簿檢閱過去六個教學課程的過程中，web 應用程式。</span><span class="sxs-lookup"><span data-stu-id="ede8a-112">Over the course of the past six tutorials we looked at deploying a simple Book Reviews web application.</span></span> <span data-ttu-id="ede8a-113">此示範站台所組成的數字的伺服器端資源-ASP.NET 網頁、 組態檔，`Web.sitemap`檔案和等位用戶端部署資源，例如映像和 CSS 檔案。</span><span class="sxs-lookup"><span data-stu-id="ede8a-113">This demo site was comprised of a number of server-side resources - ASP.NET pages, configuration files, a `Web.sitemap` file, and so forth - along with client-side resources, like images and CSS files.</span></span> <span data-ttu-id="ede8a-114">但呢資料驅動的 web 應用程式嗎？</span><span class="sxs-lookup"><span data-stu-id="ede8a-114">But what about data-driven web applications?</span></span> <span data-ttu-id="ede8a-115">部署 web 應用程式會使用的資料庫，必須採取何種額外的步驟？</span><span class="sxs-lookup"><span data-stu-id="ede8a-115">What extra steps must be taken to deploy a web application that uses a database?</span></span>

<span data-ttu-id="ede8a-116">透過 下一步的幾個教學課程中，我們會解決資料驅動的 web 應用程式部署所需的步驟。</span><span class="sxs-lookup"><span data-stu-id="ede8a-116">Over the next several tutorials we will address the steps needed to deploy a data-driven web application.</span></span> <span data-ttu-id="ede8a-117">本教學課程一開始會檢查如何取得資料庫 s 結構描述和內容從開發環境到實際執行環境，而後續的教學課程會查看所需的設定變更。</span><span class="sxs-lookup"><span data-stu-id="ede8a-117">This tutorial starts by examining how to get a database s schema and contents from the development environment to the production environment, while the subsequent tutorial looks at the needed configuration changes.</span></span> <span data-ttu-id="ede8a-118">之後，我們將探討挑戰的部署使用應用程式服務 （成員資格、 角色、 設定檔，等等） 的資料庫。</span><span class="sxs-lookup"><span data-stu-id="ede8a-118">Following that we'll explore challenges of deploying a database that uses the Application Services (Membership, Roles, Profile, and so on).</span></span>

## <a name="examining-the-updated-book-reviews-web-application"></a><span data-ttu-id="ede8a-119">正在檢查更新的活頁簿檢閱 Web 應用程式</span><span class="sxs-lookup"><span data-stu-id="ede8a-119">Examining the Updated Book Reviews Web Application</span></span>

<span data-ttu-id="ede8a-120">為了示範部署資料驅動的 web 應用程式中，我已更新活頁簿檢閱 web 應用程式從簡單的靜態網站資料驅動的一個。</span><span class="sxs-lookup"><span data-stu-id="ede8a-120">In order to demonstrate deploying a data-driven web application, I ve updated the Book Reviews web application from a simple, static website to a data-driven one.</span></span> <span data-ttu-id="ede8a-121">因為之前，有兩個版本的應用程式在此教學課程的下載中： 使用 Web 應用程式專案模型，另一個使用的網站專案模型。</span><span class="sxs-lookup"><span data-stu-id="ede8a-121">As before, there are two versions of the application in this tutorial s download: one that uses the Web Application Project model and one that uses the Web Site Project model.</span></span>

<span data-ttu-id="ede8a-122">更新的活頁簿檢閱 web 應用程式會使用[SQL Server 2008 Express Edition](https://www.microsoft.com/express/sql/default.aspx)資料庫，儲存在站台 s`App_Data`資料夾 (`~/App_Data/Reviews.mdf`)。</span><span class="sxs-lookup"><span data-stu-id="ede8a-122">The updated Book Reviews web application uses a [SQL Server 2008 Express Edition](https://www.microsoft.com/express/sql/default.aspx) database, which is stored in the site s `App_Data` folder (`~/App_Data/Reviews.mdf`).</span></span> <span data-ttu-id="ede8a-123">如果您有在電腦上安裝 SQL Server 2008 示範應該不會發生錯誤。</span><span class="sxs-lookup"><span data-stu-id="ede8a-123">If you have SQL Server 2008 installed on your computer then the demo should run without error.</span></span> <span data-ttu-id="ede8a-124">如果您有較舊版本的 SQL Server，您可以安裝免費 SQL Server 2008 Express Edition，或您可以使用指令碼可在本教學課程 s 下載自行建立資料庫的資料庫。</span><span class="sxs-lookup"><span data-stu-id="ede8a-124">If you have an older version of SQL Server you can either install the free SQL Server 2008 Express Edition or you can use the database scripts available in this tutorial s download to create the database yourself.</span></span>

<span data-ttu-id="ede8a-125">`Reviews.mdf`資料庫包含四個資料表：</span><span class="sxs-lookup"><span data-stu-id="ede8a-125">The `Reviews.mdf` database contains four tables:</span></span>

- <span data-ttu-id="ede8a-126">`Genres`-包含每個內容類型，例如技術、 小說，以及商務的記錄。</span><span class="sxs-lookup"><span data-stu-id="ede8a-126">`Genres` - includes a record for each genre, such as Technology, Fiction, and Business.</span></span>
- <span data-ttu-id="ede8a-127">`Books`-包含每個檢閱，並具有類似的資料行的記錄`Title`， `GenreId`， `ReviewDate`，和`Review`，和其他項目。</span><span class="sxs-lookup"><span data-stu-id="ede8a-127">`Books` - includes a record for each review, with columns like `Title`, `GenreId`, `ReviewDate`, and `Review`, among others.</span></span>
- <span data-ttu-id="ede8a-128">`Authors`-包含每個投稿檢閱書籍的作者相關資訊。</span><span class="sxs-lookup"><span data-stu-id="ede8a-128">`Authors` - includes information about each author who has contributed to a reviewed book.</span></span>
- <span data-ttu-id="ede8a-129">`BooksAuthors`-指定哪些作者撰寫哪些書籍的多對多聯結資料表。</span><span class="sxs-lookup"><span data-stu-id="ede8a-129">`BooksAuthors` - a many-to-many join table that specifies what authors have written what books.</span></span>
  

<span data-ttu-id="ede8a-130">圖 1 顯示這些四份資料表的 ER 圖表。</span><span class="sxs-lookup"><span data-stu-id="ede8a-130">Figure 1 shows an ER diagram of these four tables.</span></span>


<span data-ttu-id="ede8a-131">[![活頁簿檢閱 Web 應用程式資料庫是四個資料表所組成](deploying-a-database-cs/_static/image2.jpg)](deploying-a-database-cs/_static/image1.jpg)</span><span class="sxs-lookup"><span data-stu-id="ede8a-131">[![The Book Reviews Web Application s Database is Comprised of Four Tables](deploying-a-database-cs/_static/image2.jpg)](deploying-a-database-cs/_static/image1.jpg)</span></span> 

<span data-ttu-id="ede8a-132">**圖 1**: 書籍檢閱 Web 應用程式資料庫是四個資料表所組成 ([按一下以檢視完整大小的影像](deploying-a-database-cs/_static/image3.jpg))</span><span class="sxs-lookup"><span data-stu-id="ede8a-132">**Figure 1**: The Book Reviews Web Application s Database is Comprised of Four Tables ([Click to view full-size image](deploying-a-database-cs/_static/image3.jpg))</span></span>


<span data-ttu-id="ede8a-133">舊版的活頁簿檢閱網站有個別的 ASP.NET 頁面的每本書籍。</span><span class="sxs-lookup"><span data-stu-id="ede8a-133">The previous version of the Book Reviews website had a separate ASP.NET page for each book.</span></span> <span data-ttu-id="ede8a-134">例如，沒有名為的頁面`~/Tech/TYASP35.aspx`包含檢閱*教導您自己 ASP.NET 3.5 24 小時內*。</span><span class="sxs-lookup"><span data-stu-id="ede8a-134">For example, there was a page named `~/Tech/TYASP35.aspx` that contained the review for *Teach Yourself ASP.NET 3.5 in 24 Hours*.</span></span> <span data-ttu-id="ede8a-135">這個新資料驅動型版本的網站已儲存在資料庫和單一 ASP.NET 網頁，Review.aspx?ID= 檢閱*[bookid]*，這會顯示指定的書籍的檢閱。</span><span class="sxs-lookup"><span data-stu-id="ede8a-135">This new data-driven version of the website has the reviews stored in the database and a single ASP.NET page, Review.aspx?ID=*bookId*, which displays the review for the specified book.</span></span> <span data-ttu-id="ede8a-136">同樣地，沒有 Genre.aspx?ID=*genreId*頁面，其中列出檢閱的書籍，在指定的內容類型。</span><span class="sxs-lookup"><span data-stu-id="ede8a-136">Likewise, there is a Genre.aspx?ID=*genreId* page that lists the reviewed books in the specified genre.</span></span>

<span data-ttu-id="ede8a-137">圖 2 和 3 顯示`Genre.aspx`和`Review.aspx`動作中的頁面。</span><span class="sxs-lookup"><span data-stu-id="ede8a-137">Figures 2 and 3 show the `Genre.aspx` and `Review.aspx` pages in action.</span></span> <span data-ttu-id="ede8a-138">請注意每個頁面的 [網址] 列中的 URL。</span><span class="sxs-lookup"><span data-stu-id="ede8a-138">Note the URL in the Address bar for each page.</span></span> <span data-ttu-id="ede8a-139">在圖 2 it s Genre.aspx？ ID = 85d164ba 1123年 4 c 47-82a0-c8ec75de7e0e。</span><span class="sxs-lookup"><span data-stu-id="ede8a-139">In Figure 2 it s Genre.aspx?ID=85d164ba-1123-4c47-82a0-c8ec75de7e0e.</span></span> <span data-ttu-id="ede8a-140">因為 85d164ba-1123-4c47-82a0-c8ec75de7e0e`GenreId`技術內容類型、"檢閱技術 」 頁面的標題讀取和項目符號清單的值會列舉這些檢閱站台上的，落在此內容類型。</span><span class="sxs-lookup"><span data-stu-id="ede8a-140">Because 85d164ba-1123-4c47-82a0-c8ec75de7e0e is the `GenreId` value for the Technology genre, the page s heading reads "Technology Reviews" and the bulleted list enumerates those reviews on the site that fall under this genre.</span></span>


<span data-ttu-id="ede8a-141">[![技術內容類型頁面](deploying-a-database-cs/_static/image5.jpg)](deploying-a-database-cs/_static/image4.jpg)</span><span class="sxs-lookup"><span data-stu-id="ede8a-141">[![The Technology Genre Page](deploying-a-database-cs/_static/image5.jpg)](deploying-a-database-cs/_static/image4.jpg)</span></span> 

<span data-ttu-id="ede8a-142">**圖 2**: 技術內容類型頁面 ([按一下以檢視完整大小的影像](deploying-a-database-cs/_static/image6.jpg))</span><span class="sxs-lookup"><span data-stu-id="ede8a-142">**Figure 2**: The Technology Genre Page ([Click to view full-size image](deploying-a-database-cs/_static/image6.jpg))</span></span>


<span data-ttu-id="ede8a-143">[![檢閱教導您自己 ASP.NET 3.5 在 24 小時](deploying-a-database-cs/_static/image8.jpg)](deploying-a-database-cs/_static/image7.jpg)</span><span class="sxs-lookup"><span data-stu-id="ede8a-143">[![The Review for Teach Yourself ASP.NET 3.5 in 24 Hours](deploying-a-database-cs/_static/image8.jpg)](deploying-a-database-cs/_static/image7.jpg)</span></span> 

<span data-ttu-id="ede8a-144">**圖 3**: 檢閱*教導您自己 ASP.NET 3.5 24 小時內*([按一下以檢視完整大小的影像](deploying-a-database-cs/_static/image9.jpg))</span><span class="sxs-lookup"><span data-stu-id="ede8a-144">**Figure 3**: The Review for *Teach Yourself ASP.NET 3.5 in 24 Hours* ([Click to view full-size image](deploying-a-database-cs/_static/image9.jpg))</span></span>


<span data-ttu-id="ede8a-145">活頁簿會檢閱 web 應用程式也包含讓系統管理員可以新增、 編輯和刪除內容類型，檢閱並作者資訊的系統管理區段。</span><span class="sxs-lookup"><span data-stu-id="ede8a-145">The Book Reviews web application also includes an administration section where administrators can add, edit, and delete genres, reviews, and author information.</span></span> <span data-ttu-id="ede8a-146">目前，任何訪客可以存取管理 區段中。</span><span class="sxs-lookup"><span data-stu-id="ede8a-146">Currently, any visitor can access the administration section.</span></span> <span data-ttu-id="ede8a-147">在未來的教學課程中我們將新增使用者帳戶的支援，並只允許授權的使用者至 [管理] 頁面。</span><span class="sxs-lookup"><span data-stu-id="ede8a-147">In a future tutorial we'll add support for user accounts and only permit authorized users into the administration pages.</span></span>

<span data-ttu-id="ede8a-148">如果您要下載活頁簿檢閱應用程式請切記，其目的是要示範如何將資料導向應用程式部署。</span><span class="sxs-lookup"><span data-stu-id="ede8a-148">If you download the Book Reviews application please keep in mind that its purpose is to demonstrate deploying a data-driven application.</span></span> <span data-ttu-id="ede8a-149">它不會呈現延展應用程式的設計的最佳作法。</span><span class="sxs-lookup"><span data-stu-id="ede8a-149">It does not exhibit best practices as far as application design.</span></span> <span data-ttu-id="ede8a-150">例如，沒有任何個別的資料存取層 (DAL);ASP.NET 網頁直接通訊透過 SqlDataSource 控制項或其程式碼後置類別中的 ADO.NET 程式碼的資料庫。</span><span class="sxs-lookup"><span data-stu-id="ede8a-150">For example, there is no separate Data Access Layer (DAL); the ASP.NET pages communicate directly with the database through the SqlDataSource control or ADO.NET code in their code-behind classes.</span></span> <span data-ttu-id="ede8a-151">建立資料驅動的應用程式使用階層式的架構更深入了解，請參閱我[*使用資料*教學課程](../../data-access/index.md)。</span><span class="sxs-lookup"><span data-stu-id="ede8a-151">For a more in-depth look at creating data-driven applications using a tiered architecture, refer to my [*Working with Data* tutorials](../../data-access/index.md).</span></span>

## <a name="databases-on-development-versus-production"></a><span data-ttu-id="ede8a-152">在開發與實際執行的資料庫</span><span class="sxs-lookup"><span data-stu-id="ede8a-152">Databases on Development Versus Production</span></span>

<span data-ttu-id="ede8a-153">當您著手開發資料導向的 web 應用程式上時，您必須指定資料庫連接字串，其中提供有關如何連接到資料庫的應用程式詳細資料。</span><span class="sxs-lookup"><span data-stu-id="ede8a-153">When you start development on a data-driven web application you must specify a database connection string, which provides the application details on how to connect to the database.</span></span> <span data-ttu-id="ede8a-154">指定此連接字串之間，其他項目、 資料庫伺服器、 資料庫名稱和安全性資訊。</span><span class="sxs-lookup"><span data-stu-id="ede8a-154">This connection string specifies, among other things, the database server, the database name, and security information.</span></span> <span data-ttu-id="ede8a-155">通常，在開發期間的應用程式所使用的資料庫是不同於資料庫時使用它在生產環境中的 s。</span><span class="sxs-lookup"><span data-stu-id="ede8a-155">Most often, the database used by the application during development is different than the database used when it s in production.</span></span> <span data-ttu-id="ede8a-156">有許多優點的開發和生產環境使用不同的資料庫。</span><span class="sxs-lookup"><span data-stu-id="ede8a-156">There are many benefits of using different databases for development versus production.</span></span> <span data-ttu-id="ede8a-157">有不同，資料庫開發表示不要不必擔心不慎修改或刪除即時資料。</span><span class="sxs-lookup"><span data-stu-id="ede8a-157">Having a different database in development means you don t have to worry about accidentally modifying or deleting live data.</span></span> <span data-ttu-id="ede8a-158">它也可讓您將放在空測試資料，或對資料模型中的重大變更，而不必擔心對應用程式在生產環境中產生的影響。</span><span class="sxs-lookup"><span data-stu-id="ede8a-158">It also lets you put in dummy test data or make breaking changes to the data model without having to worry about the effects on the application in production.</span></span> <span data-ttu-id="ede8a-159">缺點是需要不同的資料庫開發和生產環境中，當應用程式部署到資料庫 s 結構描述的資料庫和相關的任何變更，或也必須部署的資料。</span><span class="sxs-lookup"><span data-stu-id="ede8a-159">The downside of having a different database in the development and production environments is that when the application is deployed the database and any pertinent changes to the database s schema or data must also be deployed.</span></span>

<span data-ttu-id="ede8a-160">第一次在部署之前，沒有在資料庫中，只有一個執行個體，該執行個體是在開發環境中。</span><span class="sxs-lookup"><span data-stu-id="ede8a-160">Prior to the first deployment, there is only one instance of the database, and that instance is in the development environment.</span></span> <span data-ttu-id="ede8a-161">當應用程式部署至生產環境適用於第一次我們必須將必要的伺服器端和用戶端檔案，複製不僅也將從開發環境的資料庫複製到生產環境。</span><span class="sxs-lookup"><span data-stu-id="ede8a-161">When deploying the application to production for the first time we must not only copy up the necessary server-side and client-side files, but also copy the database from the development environment to the production environment.</span></span> <span data-ttu-id="ede8a-162">這是其中我們獨立右現在與活頁簿檢閱 web 應用程式中的資料庫會位於`App_Data`不在我們的開發環境中的資料夾但有尚未被推入到生產環境。</span><span class="sxs-lookup"><span data-stu-id="ede8a-162">This is where we stand right now with the Book Reviews web application - the database resides in the `App_Data` folder in our development environment but has not yet been pushed up to the production environment.</span></span>

<span data-ttu-id="ede8a-163">一旦在部署應用程式有兩個資料庫的複本。</span><span class="sxs-lookup"><span data-stu-id="ede8a-163">Once the application has been deployed there are two copies of the database.</span></span> <span data-ttu-id="ede8a-164">成熟的應用程式，因為新的功能可能會增加，必要的資料模型的變更 （例如將新的資料行加入至現有的資料表，在現有的資料行，加入新的資料表、 變更等等）。</span><span class="sxs-lookup"><span data-stu-id="ede8a-164">As the application matures, new features may be added, necessitating a change to the data model (such as adding new columns to existing tables, making changes to existing columns, adding new tables, and so on).</span></span> <span data-ttu-id="ede8a-165">接下來部署 web 應用程式時，所做的變更套用至開發環境中的資料庫必須套用的最後一個部署到實際執行資料庫。</span><span class="sxs-lookup"><span data-stu-id="ede8a-165">When the web application is next deployed, the changes applied to the database in the development environment since the last deployment must be applied to the production database.</span></span> <span data-ttu-id="ede8a-166">未來的教學課程中討論的一些策略，來管理此程序。</span><span class="sxs-lookup"><span data-stu-id="ede8a-166">Some strategies for managing this process are discussed in a future tutorial.</span></span> <span data-ttu-id="ede8a-167">本教學課程著重在將整個資料庫從開發環境至實際執行環境部署。</span><span class="sxs-lookup"><span data-stu-id="ede8a-167">This tutorial focuses on deploying the entire database from the development environment to production.</span></span>

## <a name="deploying-the-database-to-the-production-environment"></a><span data-ttu-id="ede8a-168">將資料庫部署到生產環境</span><span class="sxs-lookup"><span data-stu-id="ede8a-168">Deploying the Database to the Production Environment</span></span>

<span data-ttu-id="ede8a-169">本教學課程的其餘部分會查看如何部署到生產環境資料庫從開發環境。</span><span class="sxs-lookup"><span data-stu-id="ede8a-169">The remainder of this tutorial looks at how to deploy the database from the development environment to the production environment.</span></span> <span data-ttu-id="ede8a-170">如果您是按照您需要先確定您的帳戶與您的 web 主機提供者包含 Microsoft SQL Server 資料庫支援。</span><span class="sxs-lookup"><span data-stu-id="ede8a-170">If you are following along you need to make sure that your account with your web host provider includes Microsoft SQL Server database support.</span></span> <span data-ttu-id="ede8a-171">您還需要有一些資訊同時角度來看，也就是資料庫伺服器名稱、 資料庫名稱，以及使用者名稱和密碼用來連接到資料庫。</span><span class="sxs-lookup"><span data-stu-id="ede8a-171">You'll also need to have some information at hand, namely the database server name, the database name, and the username and password used to connect to the database.</span></span>

<span data-ttu-id="ede8a-172">如稍早在本教學課程中所述，活頁簿檢閱網站的資料庫是儲存在 SQL Server 2008 Express Edition 資料庫`App_Data`資料夾。</span><span class="sxs-lookup"><span data-stu-id="ede8a-172">As noted earlier in this tutorial, the Book Reviews website s database is a SQL Server 2008 Express Edition database stored in the `App_Data` folder.</span></span> <span data-ttu-id="ede8a-173">它會方面的原因，部署這類資料庫會是只要複製`App_Data`從開發環境到實際執行環境的資料夾。</span><span class="sxs-lookup"><span data-stu-id="ede8a-173">It would stand to reason that deploying such a database would be as simple as copying the `App_Data` folder from the development environment to the production environment.</span></span> <span data-ttu-id="ede8a-174">然而，大部分的 web 主機提供者不支援在裝載資料庫`App_Data`資料夾，因為安全性考量。</span><span class="sxs-lookup"><span data-stu-id="ede8a-174">However, most web host providers do not support hosting databases in the `App_Data` folder because of security reasons.</span></span> <span data-ttu-id="ede8a-175">相反地，web 主機提供的帳戶在其環境中的 SQL Server 資料庫伺服器上。</span><span class="sxs-lookup"><span data-stu-id="ede8a-175">Instead, web hosts provide an account on a SQL Server database server within their environment.</span></span> <span data-ttu-id="ede8a-176">將資料庫從開發環境到生產環境部署需要取得您註冊您的 web 主機的資料庫伺服器上的資料庫。</span><span class="sxs-lookup"><span data-stu-id="ede8a-176">Deploying the database from your development environment to the production environment requires getting your database registered on your web host s database server.</span></span>

<span data-ttu-id="ede8a-177">如何取得您的資料庫從開發環境到實際執行環境？</span><span class="sxs-lookup"><span data-stu-id="ede8a-177">So how do you get your database from the development environment to the production environment?</span></span> <span data-ttu-id="ede8a-178">有幾種方式可以完成這項作業，視何種服務您的 web 主機提供。</span><span class="sxs-lookup"><span data-stu-id="ede8a-178">There are a couple ways to accomplish this depending on what services your web host offers.</span></span> <span data-ttu-id="ede8a-179">您可以使用某些主機，例如 DiscountASP.NET，FTP 資料庫或實際的備份`.mdf`檔案到您的網站，然後，從 [控制台] 中還原備份的檔案或附加`.mdf`SQL Server 資料庫伺服器的檔案。</span><span class="sxs-lookup"><span data-stu-id="ede8a-179">With some hosts, such as DiscountASP.NET, you can FTP a backup of the database or the actual `.mdf` file to your website and then, from the Control Panel, restore the backup file or attach the `.mdf` file to the SQL Server database server.</span></span> <span data-ttu-id="ede8a-180">這類工具以將資料庫部署很簡單，只複製`App_Data`至生產環境，然後將它連接透過 [控制台] 資料夾。</span><span class="sxs-lookup"><span data-stu-id="ede8a-180">With such tools deploying the database is as simple as copying the `App_Data` folder to the production environment and then attaching it via the Control Panel.</span></span> <span data-ttu-id="ede8a-181">這可能是第一次發行資料庫的最快速簡便方式。</span><span class="sxs-lookup"><span data-stu-id="ede8a-181">This is perhaps the easiest and quickest way to publish your database for the first time.</span></span>

<span data-ttu-id="ede8a-182">另一種方法是使用資料庫發行精靈。</span><span class="sxs-lookup"><span data-stu-id="ede8a-182">Another approach is to use the Database Publishing Wizard.</span></span> <span data-ttu-id="ede8a-183">資料庫發行精靈 」 是 Windows 桌面應用程式將會產生其資料表中建立資料庫 s 結構描述-資料表、 預存程序、 檢視、 使用者定義函式和等位，並選擇性地將資料的 SQL 命令。</span><span class="sxs-lookup"><span data-stu-id="ede8a-183">The Database Publishing Wizard is a Windows desktop application that will generate the SQL commands to create your database s schema - the tables, stored procedures, views, user-defined functions, and so forth - and, optionally, the data in its tables.</span></span> <span data-ttu-id="ede8a-184">您可以再連接到 web 主機提供者的資料庫伺服器透過 SQL Server Management Studio，然後執行 複製實際執行資料庫指令碼。</span><span class="sxs-lookup"><span data-stu-id="ede8a-184">You can then connect to your web host provider s database server through SQL Server Management Studio and then execute this script to duplicate the database on production.</span></span> <span data-ttu-id="ede8a-185">更好，如果您的 web 主機提供者支援 Microsoft s [Database Publishing Services](http://www.codeplex.com/sqlhost/Wiki/View.aspx?title=Database%20Publishing%20Services&amp;referringTitle=Home)可以自動代表您的資料庫伺服器上執行的資料庫發行精靈所產生的指令碼。</span><span class="sxs-lookup"><span data-stu-id="ede8a-185">Even better, if your web host provider supports Microsoft s [Database Publishing Services](http://www.codeplex.com/sqlhost/Wiki/View.aspx?title=Database%20Publishing%20Services&amp;referringTitle=Home) you can have the script generated by the Database Publishing Wizard automatically executed on the database server on your behalf.</span></span> <span data-ttu-id="ede8a-186">資料庫發行精靈產生的指令碼，建立資料庫 s 結構描述和資料，因為它會使用不論您的 web 主機提供者是否提供功能，例如將上傳`.mdf`檔案。</span><span class="sxs-lookup"><span data-stu-id="ede8a-186">Because the Database Publishing Wizard generates a script that creates the database s schema and data, it will work regardless of whether your web host provider offers features like attaching an uploaded `.mdf` file.</span></span>

### <a name="generating-the-sql-commands-to-create-the-database-schema-and-data-using-the-database-publishing-wizard"></a><span data-ttu-id="ede8a-187">產生 SQL 命令來建立資料庫結構描述和資料使用資料庫發行精靈</span><span class="sxs-lookup"><span data-stu-id="ede8a-187">Generating the SQL Commands to Create the Database Schema and Data Using the Database Publishing Wizard</span></span>

<span data-ttu-id="ede8a-188">可讓 s 逐步解說將書籍檢閱資料庫部署到生產環境中使用資料庫發行精靈。</span><span class="sxs-lookup"><span data-stu-id="ede8a-188">Let s walk through using the Database Publishing Wizard to deploy the Book Reviews database to production.</span></span> <span data-ttu-id="ede8a-189">如果您使用 Visual Studio 2008 或更新版本，已安裝資料庫發行精靈。</span><span class="sxs-lookup"><span data-stu-id="ede8a-189">If you are using Visual Studio 2008 or beyond, the Database Publishing Wizard is already installed.</span></span> <span data-ttu-id="ede8a-190">如果您使用 Visual Studio 2005，則您必須先[下載並安裝](https://www.microsoft.com/downloads/details.aspx?familyid=56E5B1C5-BF17-42E0-A410-371A838E570A&amp;displaylang=en)精靈。</span><span class="sxs-lookup"><span data-stu-id="ede8a-190">If you are using Visual Studio 2005 then you will need to first [download and install](https://www.microsoft.com/downloads/details.aspx?familyid=56E5B1C5-BF17-42E0-A410-371A838E570A&amp;displaylang=en) the wizard.</span></span>

<span data-ttu-id="ede8a-191">開啟 Visual Studio，並瀏覽至`Reviews.mdf`資料庫。</span><span class="sxs-lookup"><span data-stu-id="ede8a-191">Open Visual Studio and navigate to the `Reviews.mdf` database.</span></span> <span data-ttu-id="ede8a-192">如果您使用 Visual Web Developer 中，請移至 [資料庫總管] 中;如果您使用 Visual Studio，請使用 [伺服器總管] 中。</span><span class="sxs-lookup"><span data-stu-id="ede8a-192">If you are using Visual Web Developer, go to the Database Explorer; if you are using Visual Studio, use the Server Explorer.</span></span> <span data-ttu-id="ede8a-193">圖 4 顯示`Reviews.mdf`在 Visual Web Developer 的 [資料庫總管] 中的資料庫。</span><span class="sxs-lookup"><span data-stu-id="ede8a-193">Figure 4 shows the `Reviews.mdf` database in the Database Explorer in Visual Web Developer.</span></span> <span data-ttu-id="ede8a-194">如圖 4 所示，`Reviews.mdf`資料庫由四個資料表、 三個預存程序，和使用者定義函式所組成。</span><span class="sxs-lookup"><span data-stu-id="ede8a-194">As Figure 4 shows, the `Reviews.mdf` database is composed of four tables, three stored procedures, and a user-defined function.</span></span>


<span data-ttu-id="ede8a-195">[![在 資料庫總管 或 伺服器總管中尋找資料庫](deploying-a-database-cs/_static/image11.jpg)](deploying-a-database-cs/_static/image10.jpg)</span><span class="sxs-lookup"><span data-stu-id="ede8a-195">[![Locate the Database in the Database Explorer or Server Explorer](deploying-a-database-cs/_static/image11.jpg)](deploying-a-database-cs/_static/image10.jpg)</span></span> 

<span data-ttu-id="ede8a-196">**圖 4**: [資料庫總管] 或 伺服器總管中找出資料庫 ([按一下以檢視完整大小的影像](deploying-a-database-cs/_static/image12.jpg))</span><span class="sxs-lookup"><span data-stu-id="ede8a-196">**Figure 4**: Locate the Database in the Database Explorer or Server Explorer ([Click to view full-size image](deploying-a-database-cs/_static/image12.jpg))</span></span>


<span data-ttu-id="ede8a-197">以滑鼠右鍵按一下資料庫名稱，並從內容功能表中選擇 [發佈到提供者] 選項。</span><span class="sxs-lookup"><span data-stu-id="ede8a-197">Right-click on the database name and choose the "Publish to provider" option from the context menu.</span></span> <span data-ttu-id="ede8a-198">這會啟動 「 資料庫發行精靈 」 （請參閱圖 5）。</span><span class="sxs-lookup"><span data-stu-id="ede8a-198">This launches the Database Publishing Wizard (see Figure 5).</span></span> <span data-ttu-id="ede8a-199">按一下旁邊提前過去的啟動顯示畫面。</span><span class="sxs-lookup"><span data-stu-id="ede8a-199">Click Next to advance past the splash screen.</span></span>


<span data-ttu-id="ede8a-200">[![資料庫發行精靈啟動顯示畫面](deploying-a-database-cs/_static/image14.jpg)](deploying-a-database-cs/_static/image13.jpg)</span><span class="sxs-lookup"><span data-stu-id="ede8a-200">[![The Database Publishing Wizard Splash Screen](deploying-a-database-cs/_static/image14.jpg)](deploying-a-database-cs/_static/image13.jpg)</span></span> 

<span data-ttu-id="ede8a-201">**圖 5**: 資料庫發行精靈啟動顯示畫面 ([按一下以檢視完整大小的影像](deploying-a-database-cs/_static/image15.jpg))</span><span class="sxs-lookup"><span data-stu-id="ede8a-201">**Figure 5**: The Database Publishing Wizard Splash Screen ([Click to view full-size image](deploying-a-database-cs/_static/image15.jpg))</span></span>


<span data-ttu-id="ede8a-202">在精靈的第二個畫面中列出的資料庫發行精靈 」 可存取的資料庫，並讓您選擇要選取的資料庫中的所有物件編寫指令碼，或是選擇哪些物件要編寫指令碼。</span><span class="sxs-lookup"><span data-stu-id="ede8a-202">The second screen in the wizard lists the databases accessible to the Database Publishing Wizard and lets you choose whether to script all objects in the selected database or to pick which objects to script.</span></span> <span data-ttu-id="ede8a-203">選取適當的資料庫，並將 [物件選取的資料庫中的所有指令碼] 選項處於選取狀態。</span><span class="sxs-lookup"><span data-stu-id="ede8a-203">Select the appropriate database and leave the "Script all objects in the selected database" option checked.</span></span>

> [!NOTE]
> <span data-ttu-id="ede8a-204">如果您收到錯誤 「 資料庫中沒有任何物件*databaseName*此精靈可編寫指令碼的類型 」 時圖 6 所示的畫面中，按一下 [下一步]，請確定您的資料庫檔案的路徑不是過長。</span><span class="sxs-lookup"><span data-stu-id="ede8a-204">If you get the error "There are no objects in database *databaseName* of the types scriptable by this wizard" when clicking Next in the screen shown in Figure 6, make sure that the path to your database file is not overly long.</span></span> <span data-ttu-id="ede8a-205">它已找到，是否資料庫檔案的路徑太長，可能會發生此錯誤。</span><span class="sxs-lookup"><span data-stu-id="ede8a-205">It has been discovered that this error can arise if the path to the database file is too long.</span></span>


<span data-ttu-id="ede8a-206">[![資料庫發行精靈啟動顯示畫面](deploying-a-database-cs/_static/image17.jpg)](deploying-a-database-cs/_static/image16.jpg)</span><span class="sxs-lookup"><span data-stu-id="ede8a-206">[![The Database Publishing Wizard Splash Screen](deploying-a-database-cs/_static/image17.jpg)](deploying-a-database-cs/_static/image16.jpg)</span></span> 

<span data-ttu-id="ede8a-207">**圖 6**: 資料庫發行精靈啟動顯示畫面 ([按一下以檢視完整大小的影像](deploying-a-database-cs/_static/image18.jpg))</span><span class="sxs-lookup"><span data-stu-id="ede8a-207">**Figure 6**: The Database Publishing Wizard Splash Screen ([Click to view full-size image](deploying-a-database-cs/_static/image18.jpg))</span></span>


<span data-ttu-id="ede8a-208">從下一個畫面中您可以產生指令碼檔案，或是 web 主機可支援此功能，如果資料庫直接發佈到 web 主機提供者的資料庫伺服器。</span><span class="sxs-lookup"><span data-stu-id="ede8a-208">From the next screen you can generate a script file or, if your web host supports it, publish the database directly to your web host provider s database server.</span></span> <span data-ttu-id="ede8a-209">如圖 7 所示，無法寫入檔案的指令碼`C:\REVIEWS.MDF.sql`。</span><span class="sxs-lookup"><span data-stu-id="ede8a-209">As Figure 7 shows, I am having the script written to the file `C:\REVIEWS.MDF.sql`.</span></span>


<span data-ttu-id="ede8a-210">[![編寫資料庫備份至檔案，或直接發行至您的 Web 主機提供者](deploying-a-database-cs/_static/image20.jpg)](deploying-a-database-cs/_static/image19.jpg)</span><span class="sxs-lookup"><span data-stu-id="ede8a-210">[![Script the Database to a File or Publish it Directly to Your Web Host Provider](deploying-a-database-cs/_static/image20.jpg)](deploying-a-database-cs/_static/image19.jpg)</span></span> 

<span data-ttu-id="ede8a-211">**圖 7**： 編寫資料庫備份至檔案，或直接發行至您的 Web 主機提供者 ([按一下以檢視完整大小的影像](deploying-a-database-cs/_static/image21.jpg))</span><span class="sxs-lookup"><span data-stu-id="ede8a-211">**Figure 7**: Script the Database to a File or Publish it Directly to Your Web Host Provider ([Click to view full-size image](deploying-a-database-cs/_static/image21.jpg))</span></span>


<span data-ttu-id="ede8a-212">後續畫面提示您針對各種不同的指令碼選項。</span><span class="sxs-lookup"><span data-stu-id="ede8a-212">The subsequent screen prompts you for a variety of scripting options.</span></span> <span data-ttu-id="ede8a-213">您可以指定指令碼是否應包含 drop 陳述式來移除這些現有的物件。</span><span class="sxs-lookup"><span data-stu-id="ede8a-213">You can specify whether the script should include drop statements to remove these existing objects.</span></span> <span data-ttu-id="ede8a-214">預設值為 True，當第一次部署資料庫時，這也沒有問題。</span><span class="sxs-lookup"><span data-stu-id="ede8a-214">This defaults to True, which is fine when deploying a database for the first time.</span></span> <span data-ttu-id="ede8a-215">您也可以指定目標資料庫是 SQL Server 2000、 SQL Server 2005 或 SQL Server 2008。</span><span class="sxs-lookup"><span data-stu-id="ede8a-215">You can also specify whether the target database is SQL Server 2000, SQL Server 2005, or SQL Server 2008.</span></span> <span data-ttu-id="ede8a-216">最後，您可以指出是否編寫指令碼的結構描述和資料，只有資料或只有結構描述。</span><span class="sxs-lookup"><span data-stu-id="ede8a-216">Finally, you can indicate whether to script the schema and data, just the data, or just the schema.</span></span> <span data-ttu-id="ede8a-217">結構描述是資料庫物件、 資料表、 預存程序、 檢視和等等的集合。</span><span class="sxs-lookup"><span data-stu-id="ede8a-217">The schema is the collection of database objects, the tables, stored procedures, views, and so on.</span></span> <span data-ttu-id="ede8a-218">資料是位於資料表中的資訊。</span><span class="sxs-lookup"><span data-stu-id="ede8a-218">The data is the information residing in the tables.</span></span>

<span data-ttu-id="ede8a-219">如圖 8 所示，我發生了精靈設定為卸除現有的資料庫物件，來產生指令碼的 SQL Server 2008 資料庫，並將發行的結構描述和資料。</span><span class="sxs-lookup"><span data-stu-id="ede8a-219">As Figure 8 illustrates, I ve got the wizard configured to drop existing database objects, to generate script for a SQL Server 2008 database, and to publish both the schema and data.</span></span>


<span data-ttu-id="ede8a-220">[![指定發行選項](deploying-a-database-cs/_static/image23.jpg)](deploying-a-database-cs/_static/image22.jpg)</span><span class="sxs-lookup"><span data-stu-id="ede8a-220">[![Specify the Publishing Options](deploying-a-database-cs/_static/image23.jpg)](deploying-a-database-cs/_static/image22.jpg)</span></span> 

<span data-ttu-id="ede8a-221">**圖 8**： 指定發行選項 ([按一下以檢視完整大小的影像](deploying-a-database-cs/_static/image24.jpg))</span><span class="sxs-lookup"><span data-stu-id="ede8a-221">**Figure 8**: Specify the Publishing Options ([Click to view full-size image](deploying-a-database-cs/_static/image24.jpg))</span></span>


<span data-ttu-id="ede8a-222">最後兩個畫面摘要即將進行並顯示狀態的指令碼的動作。</span><span class="sxs-lookup"><span data-stu-id="ede8a-222">The final two screens summarize the actions that are about to be taken and then display the status of the scripting.</span></span> <span data-ttu-id="ede8a-223">執行精靈的最後結果就是我們有包含實際執行上建立資料庫，並使用相同的資料填入上開發所需的 SQL 命令的指令碼檔案。</span><span class="sxs-lookup"><span data-stu-id="ede8a-223">The net result of running the wizard is that we have a script file that contains the SQL commands needed to create the database on production and populate it with the same data as on development.</span></span>

### <a name="executing-the-sql-commands-on-the-production-environment-database"></a><span data-ttu-id="ede8a-224">在生產環境資料庫上執行的 SQL 命令</span><span class="sxs-lookup"><span data-stu-id="ede8a-224">Executing the SQL Commands On the Production Environment Database</span></span>

<span data-ttu-id="ede8a-225">現在我們有指令碼，其中包含要建立所有資料庫和其資料的 SQL 命令，所保留下來就是在生產資料庫上執行指令碼。</span><span class="sxs-lookup"><span data-stu-id="ede8a-225">Now that we have the script that contains the SQL commands to create the database and its data all that remains is to execute the script on the production database.</span></span> <span data-ttu-id="ede8a-226">有些 web 主機提供者提供的文字方塊中，您可以在其中輸入您的資料庫上執行的 SQL 命令及其控制台中。</span><span class="sxs-lookup"><span data-stu-id="ede8a-226">Some web host providers offer a textbox in their Control Panel where you can enter SQL commands to execute on your database.</span></span> <span data-ttu-id="ede8a-227">如果您有非常大的指令碼檔案，則此選項可能無法運作 (`REVIEWS.MDF.sql`指令碼檔案是超過 425 KB 的大小，例如)。</span><span class="sxs-lookup"><span data-stu-id="ede8a-227">If you have a very large script file then this option might not work (the `REVIEWS.MDF.sql` script file is over 425 KB in size, for instance).</span></span>

<span data-ttu-id="ede8a-228">更好的方法是直接連接到實際執行資料庫伺服器使用 SQL Server Management Studio (SSMS)。</span><span class="sxs-lookup"><span data-stu-id="ede8a-228">A better approach is to connect directly to the production database server using SQL Server Management Studio (SSMS).</span></span> <span data-ttu-id="ede8a-229">如果您有非 Express Edition 的 SQL Server 電腦上安裝然後您應該已有安裝 SSMS。</span><span class="sxs-lookup"><span data-stu-id="ede8a-229">If you have a non-Express Edition of SQL Server installed on your computer then you likely already have SSMS installed.</span></span> <span data-ttu-id="ede8a-230">否則，您可以[下載並安裝](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en)一份免費的 SQL Server Management Studio Express 的版本。</span><span class="sxs-lookup"><span data-stu-id="ede8a-230">Otherwise, you can [download and install](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en) a free copy of SQL Server Management Studio Express Edition.</span></span>

<span data-ttu-id="ede8a-231">啟動 SSMS 並連接到 web 主機的資料庫伺服器使用 web 主機提供者所提供的資訊。</span><span class="sxs-lookup"><span data-stu-id="ede8a-231">Launch SSMS and connect to your web host s database server using the information provided by your web host provider.</span></span>


<span data-ttu-id="ede8a-232">[![連接到 Web 主機提供者的資料庫伺服器](deploying-a-database-cs/_static/image26.jpg)](deploying-a-database-cs/_static/image25.jpg)</span><span class="sxs-lookup"><span data-stu-id="ede8a-232">[![Connect to Your Web Host Provider s Database Server](deploying-a-database-cs/_static/image26.jpg)](deploying-a-database-cs/_static/image25.jpg)</span></span> 

<span data-ttu-id="ede8a-233">**圖 9**： 連接到您的 Web 主機提供者 s 資料庫伺服器 ([按一下以檢視完整大小的影像](deploying-a-database-cs/_static/image27.jpg))</span><span class="sxs-lookup"><span data-stu-id="ede8a-233">**Figure 9**: Connect to Your Web Host Provider s Database Server ([Click to view full-size image](deploying-a-database-cs/_static/image27.jpg))</span></span>


<span data-ttu-id="ede8a-234">展開 [資料庫] 索引標籤，然後找出您的資料庫。</span><span class="sxs-lookup"><span data-stu-id="ede8a-234">Expand the Databases tab and locate your database.</span></span> <span data-ttu-id="ede8a-235">按一下工具列的左上角的 [新增查詢] 按鈕，貼上 SQL 命令，從資料庫發行精靈所建立的指令碼檔案中，按一下 [執行] 按鈕來實際執行資料庫伺服器上執行下列命令。</span><span class="sxs-lookup"><span data-stu-id="ede8a-235">Click the New Query button in the upper left corner of the Toolbar, paste in the SQL commands from the script file created by the Database Publishing Wizard, and click the Execute button to run these commands on the production database server.</span></span> <span data-ttu-id="ede8a-236">如果您的指令碼檔案是特別大可能需要幾分鐘才能執行命令。</span><span class="sxs-lookup"><span data-stu-id="ede8a-236">If your script file is especially large it may take several minutes to execute the commands.</span></span>


<span data-ttu-id="ede8a-237">[![連接到 Web 主機提供者的資料庫伺服器](deploying-a-database-cs/_static/image29.jpg)](deploying-a-database-cs/_static/image28.jpg)</span><span class="sxs-lookup"><span data-stu-id="ede8a-237">[![Connect to Your Web Host Provider s Database Server](deploying-a-database-cs/_static/image29.jpg)](deploying-a-database-cs/_static/image28.jpg)</span></span> 

<span data-ttu-id="ede8a-238">**圖 10**： 連接到您的 Web 主機提供者 s 資料庫伺服器 ([按一下以檢視完整大小的影像](deploying-a-database-cs/_static/image30.jpg))</span><span class="sxs-lookup"><span data-stu-id="ede8a-238">**Figure 10**: Connect to Your Web Host Provider s Database Server ([Click to view full-size image](deploying-a-database-cs/_static/image30.jpg))</span></span>


<span data-ttu-id="ede8a-239">S 都是這麼簡單 ！</span><span class="sxs-lookup"><span data-stu-id="ede8a-239">That s all there is to it!</span></span> <span data-ttu-id="ede8a-240">此時已經重複開發資料庫到生產環境。</span><span class="sxs-lookup"><span data-stu-id="ede8a-240">At this point the development database has been duplicated to production.</span></span> <span data-ttu-id="ede8a-241">如果您重新整理在 SSMS 中的資料庫應該會看到新的資料庫物件。</span><span class="sxs-lookup"><span data-stu-id="ede8a-241">If you Refresh the database in SSMS you should see the new database objects.</span></span> <span data-ttu-id="ede8a-242">圖 11 顯示實際執行資料庫的資料表、 預存程序和使用者定義函數，其會鏡像上開發資料庫。</span><span class="sxs-lookup"><span data-stu-id="ede8a-242">Figure 11 shows the production database s tables, stored procedures, and user-defined functions, which mirror those on the development database.</span></span> <span data-ttu-id="ede8a-243">和實際執行資料庫的資料表我們指示資料庫發行精靈 」 將資料發行，因為在執行精靈時具有開發資料庫的資料表相同的資料。</span><span class="sxs-lookup"><span data-stu-id="ede8a-243">And because we instructed the Database Publishing Wizard to publish the data, the production database s tables have the same data as the development database s tables at the time the wizard was executed.</span></span> <span data-ttu-id="ede8a-244">圖 12 顯示中的資料`Books`生產資料庫上的資料表。</span><span class="sxs-lookup"><span data-stu-id="ede8a-244">Figure 12 shows the data in the `Books` table on the production database.</span></span>


<span data-ttu-id="ede8a-245">[![在生產資料庫上已有重複的資料庫物件](deploying-a-database-cs/_static/image32.jpg)](deploying-a-database-cs/_static/image31.jpg)</span><span class="sxs-lookup"><span data-stu-id="ede8a-245">[![The Database Objects Have Been Duplicated on the Production Database](deploying-a-database-cs/_static/image32.jpg)](deploying-a-database-cs/_static/image31.jpg)</span></span> 

<span data-ttu-id="ede8a-246">**圖 11**: 資料庫物件已被重複的生產資料庫上 ([按一下以檢視完整大小的影像](deploying-a-database-cs/_static/image33.jpg))</span><span class="sxs-lookup"><span data-stu-id="ede8a-246">**Figure 11**: The Database Objects Have Been Duplicated on the Production Database ([Click to view full-size image](deploying-a-database-cs/_static/image33.jpg))</span></span>


<span data-ttu-id="ede8a-247">[![實際執行資料庫包含相同資料做為開發資料庫](deploying-a-database-cs/_static/image35.jpg)](deploying-a-database-cs/_static/image34.jpg)</span><span class="sxs-lookup"><span data-stu-id="ede8a-247">[![The Production Database Contains the Same Data as on the Development Database](deploying-a-database-cs/_static/image35.jpg)](deploying-a-database-cs/_static/image34.jpg)</span></span> 

<span data-ttu-id="ede8a-248">**圖 12**： 實際執行資料庫開發資料庫上包含相同的資料 ([按一下以檢視完整大小的影像](deploying-a-database-cs/_static/image36.jpg))</span><span class="sxs-lookup"><span data-stu-id="ede8a-248">**Figure 12**: The Production Database Contains the Same Data as on the Development Database ([Click to view full-size image](deploying-a-database-cs/_static/image36.jpg))</span></span>


<span data-ttu-id="ede8a-249">此時我們只擁有開發資料庫部署到生產環境。</span><span class="sxs-lookup"><span data-stu-id="ede8a-249">At this point we have only deployed the development database to production.</span></span> <span data-ttu-id="ede8a-250">我們尚未有看部署 web 應用程式本身，或檢查實際執行應用程式使用的實際執行資料庫所需的組態變更。</span><span class="sxs-lookup"><span data-stu-id="ede8a-250">We have not yet looked at deploying the web application itself or examined what configuration changes are needed to have the application on production use the production database.</span></span> <span data-ttu-id="ede8a-251">在下一個教學課程中，我們將討論這些問題 ！</span><span class="sxs-lookup"><span data-stu-id="ede8a-251">We'll cover these issues in the next tutorial!</span></span>

## <a name="summary"></a><span data-ttu-id="ede8a-252">總結</span><span class="sxs-lookup"><span data-stu-id="ede8a-252">Summary</span></span>

<span data-ttu-id="ede8a-253">資料驅動的 web 應用程式部署需要複製到生產環境的開發過程中使用的資料庫。</span><span class="sxs-lookup"><span data-stu-id="ede8a-253">Deploying a data-driven web application requires copying the database used during development to the production environment.</span></span> <span data-ttu-id="ede8a-254">許多 web 主機提供者會提供工具，可簡化部署資料庫的程序。</span><span class="sxs-lookup"><span data-stu-id="ede8a-254">Many web host providers offer tools to simplify the process of deploying a database.</span></span> <span data-ttu-id="ede8a-255">例如，與 DiscountASP.NET 您可以 FTP 資料庫`.mdf`檔案 （或備份），從 控制台，然後將資料庫附加至資料庫伺服器。</span><span class="sxs-lookup"><span data-stu-id="ede8a-255">For example, with DiscountASP.NET you can FTP your database `.mdf` file (or a backup) and then attach the database to the database server from the Control Panel.</span></span> <span data-ttu-id="ede8a-256">另一個選項，無論何種功能的運作方式您網站的主機提供者服務是 Microsoft 的資料庫發行精靈 工具，可產生的指令碼來建立開發資料庫 s 結構描述和資料的 SQL 命令。</span><span class="sxs-lookup"><span data-stu-id="ede8a-256">Another option that works regardless of what features your web host provider offers is Microsoft s Database Publishing Wizard tool, which generates a script of SQL commands to create the development database s schema and data.</span></span> <span data-ttu-id="ede8a-257">一旦產生此指令碼可以在生產資料庫上執行。</span><span class="sxs-lookup"><span data-stu-id="ede8a-257">Once this script has been generated you can execute it on the production database.</span></span>

<span data-ttu-id="ede8a-258">既然書籍檢閱 web 應用程式的資料庫是實際執行，我們可以部署應用程式。</span><span class="sxs-lookup"><span data-stu-id="ede8a-258">Now that the Book Reviews web application s database is on production we can deploy the application.</span></span> <span data-ttu-id="ede8a-259">不過，web 應用程式的組態資訊指定連接字串至資料庫，而且該連接字串參考開發資料庫。</span><span class="sxs-lookup"><span data-stu-id="ede8a-259">However, the web application s configuration information specifies the connection string to the database, and that connection string references the development database.</span></span> <span data-ttu-id="ede8a-260">我們需要將網站部署到生產環境時，更新此連接字串資訊。</span><span class="sxs-lookup"><span data-stu-id="ede8a-260">We need to update this connection string information when deploying the site to production.</span></span> <span data-ttu-id="ede8a-261">下一個教學課程會查看這些設定的差異，並逐步引導正式發行的資料導向書籍檢閱站台所需的步驟。</span><span class="sxs-lookup"><span data-stu-id="ede8a-261">The next tutorial looks at these configuration differences and walks through the steps needed to publish the data-driven Book Reviews site to production.</span></span>

<span data-ttu-id="ede8a-262">祝您程式設計 ！</span><span class="sxs-lookup"><span data-stu-id="ede8a-262">Happy Programming!</span></span>

#### <a name="further-reading"></a><span data-ttu-id="ede8a-263">進一步閱讀</span><span class="sxs-lookup"><span data-stu-id="ede8a-263">Further Reading</span></span>

<span data-ttu-id="ede8a-264">如需有關在本教學課程所討論的主題的詳細資訊，請參閱下列資源：</span><span class="sxs-lookup"><span data-stu-id="ede8a-264">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="ede8a-265">下載 Microsoft SQL Server 資料庫發行精靈 1.1</span><span class="sxs-lookup"><span data-stu-id="ede8a-265">Download the Microsoft SQL Server Database Publishing Wizard 1.1</span></span>](https://www.microsoft.com/downloads/details.aspx?familyid=56E5B1C5-BF17-42E0-A410-371A838E570A&amp;displaylang=en)
- [<span data-ttu-id="ede8a-266">下載 Microsoft SQL Server Management Studio Express Edition</span><span class="sxs-lookup"><span data-stu-id="ede8a-266">Download the Microsoft SQL Server Management Studio Express Edition</span></span>](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en)

>[!div class="step-by-step"]
<span data-ttu-id="ede8a-267">[上一頁](core-differences-between-iis-and-the-asp-net-development-server-cs.md)
[下一頁](configuring-the-production-web-application-to-use-the-production-database-cs.md)</span><span class="sxs-lookup"><span data-stu-id="ede8a-267">[Previous](core-differences-between-iis-and-the-asp-net-development-server-cs.md)
[Next](configuring-the-production-web-application-to-use-the-production-database-cs.md)</span></span>
