# <a name="aspnet-core-health-check-sample"></a><span data-ttu-id="4d8b5-101">ASP.NET Core 健康狀態檢查範例</span><span class="sxs-lookup"><span data-stu-id="4d8b5-101">ASP.NET Core Health Check Sample</span></span>

<span data-ttu-id="4d8b5-102">此範例說明如何使用健康狀態檢查中介軟體和服務。</span><span class="sxs-lookup"><span data-stu-id="4d8b5-102">This sample illustrates the use of Health Check Middleware and services.</span></span> <span data-ttu-id="4d8b5-103">此範例示範 [ASP.NET Core 中的健康狀態檢查](https://docs.microsoft.com/aspnet/core/host-and-deploy/health-checks)主題中所述的案例。</span><span class="sxs-lookup"><span data-stu-id="4d8b5-103">This sample demonstrates the scenario described in the [Health checks in ASP.NET Core](https://docs.microsoft.com/aspnet/core/host-and-deploy/health-checks) topic.</span></span>

<span data-ttu-id="4d8b5-104">若要在該主題所述案例中執行範例應用程式，請在命令殼層中使用來自專案資料夾的 [dotnet run](https://docs.microsoft.com/dotnet/core/tools/dotnet-run) 命令。</span><span class="sxs-lookup"><span data-stu-id="4d8b5-104">To run the sample app for a scenario described in the topic, use the [dotnet run](https://docs.microsoft.com/dotnet/core/tools/dotnet-run) command from the project's folder in a command shell.</span></span> <span data-ttu-id="4d8b5-105">傳遞您要探索的案例參數。</span><span class="sxs-lookup"><span data-stu-id="4d8b5-105">Pass a switch for the scenario that you're exploring.</span></span> <span data-ttu-id="4d8b5-106">若未提供參數給 `dotnet run`，應用程式會預設為 `basic` 組態。</span><span class="sxs-lookup"><span data-stu-id="4d8b5-106">The app defaults to the `basic` configuration when a switch isn't provided to `dotnet run`.</span></span>

| <span data-ttu-id="4d8b5-107">狀況</span><span class="sxs-lookup"><span data-stu-id="4d8b5-107">Scenario</span></span>                                               | <span data-ttu-id="4d8b5-108">範例應用程式命令</span><span class="sxs-lookup"><span data-stu-id="4d8b5-108">Sample app command</span></span>               | <span data-ttu-id="4d8b5-109">描述</span><span class="sxs-lookup"><span data-stu-id="4d8b5-109">Description</span></span> |
| ------------------------------------------------------ | -------------------------------- | ----------- |
| <span data-ttu-id="4d8b5-110">基本健康狀態探查 (預設)</span><span class="sxs-lookup"><span data-stu-id="4d8b5-110">Basic health probe (default)</span></span>                           | `dotnet run --scenario basic`    | <span data-ttu-id="4d8b5-111">確認應用程式可處理 HTTP 要求。</span><span class="sxs-lookup"><span data-stu-id="4d8b5-111">Confirms that the app can process HTTP requests.</span></span> |
| <span data-ttu-id="4d8b5-112">資料庫探查</span><span class="sxs-lookup"><span data-stu-id="4d8b5-112">Database probe</span></span>                                         | `dotnet run --scenario db`       | <span data-ttu-id="4d8b5-113">檢查 SQL Server 資料庫連線。</span><span class="sxs-lookup"><span data-stu-id="4d8b5-113">Checks a SQL Server database connection.</span></span> <span data-ttu-id="4d8b5-114">如需指示，請參閱該主題的[資料庫探查](https://docs.microsoft.com/aspnet/core/host-and-deploy/health-checks#database-probe)一節。</span><span class="sxs-lookup"><span data-stu-id="4d8b5-114">See the [Database probe](https://docs.microsoft.com/aspnet/core/host-and-deploy/health-checks#database-probe) section of the topic for instructions.</span></span> |
| <span data-ttu-id="4d8b5-115">整備度/活躍度探查</span><span class="sxs-lookup"><span data-stu-id="4d8b5-115">Readiness/liveness probes</span></span>                              | `dotnet run --scenario liveness` | <span data-ttu-id="4d8b5-116">執行即時應用程式狀態 (「活躍度」**) 與應用程式準備成為即時 (「整備度」**) 的檢查。</span><span class="sxs-lookup"><span data-stu-id="4d8b5-116">Performs checks for a live app status (*liveness*) versus the app preparing to become live (*readiness*).</span></span> |
| <span data-ttu-id="4d8b5-117">計量型探查 (記憶體)/</span><span class="sxs-lookup"><span data-stu-id="4d8b5-117">Metric-based probe (memory)/</span></span><br><span data-ttu-id="4d8b5-118">自訂回應寫入器</span><span class="sxs-lookup"><span data-stu-id="4d8b5-118">custom response writer</span></span> | `dotnet run --scenario writer`   | <span data-ttu-id="4d8b5-119">檢查記憶體使用量，並在檢查健康狀態端點時撰寫自訂 JSON。</span><span class="sxs-lookup"><span data-stu-id="4d8b5-119">Checks against memory use and writes out custom JSON when the health endpoint is checked.</span></span> |
| <span data-ttu-id="4d8b5-120">依連接埠篩選</span><span class="sxs-lookup"><span data-stu-id="4d8b5-120">Filter by port</span></span>                                         | `dotnet run --scenario port`     | <span data-ttu-id="4d8b5-121">將健康狀態檢查篩選至指定的連接埠。</span><span class="sxs-lookup"><span data-stu-id="4d8b5-121">Filters health checks to a given port.</span></span> <span data-ttu-id="4d8b5-122">如需指示，請參閱該主題的[依連接埠篩選](https://docs.microsoft.com/aspnet/core/host-and-deploy/health-checks#filter-by-port)一節。</span><span class="sxs-lookup"><span data-stu-id="4d8b5-122">See the [Filter by port](https://docs.microsoft.com/aspnet/core/host-and-deploy/health-checks#filter-by-port) section of the topic for instructions.</span></span> |

<span data-ttu-id="4d8b5-123">資料庫探查和連接埠篩選案例需要其他組態。</span><span class="sxs-lookup"><span data-stu-id="4d8b5-123">The database probe and port filter scenarios require additional configuration.</span></span> <span data-ttu-id="4d8b5-124">如需詳細資訊，請參閱[健康狀態檢查](https://docs.microsoft.com/aspnet/core/host-and-deploy/health-checks)主題。</span><span class="sxs-lookup"><span data-stu-id="4d8b5-124">See the [Health checks](https://docs.microsoft.com/aspnet/core/host-and-deploy/health-checks) topic for details.</span></span>
